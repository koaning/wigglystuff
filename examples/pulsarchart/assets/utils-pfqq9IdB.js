import{d as w,i as x,l as z,p as r,u as C}from"./useEvent-DlWF5OMa.js";import{A as l,B as D,I as j,J as I,N as d,P as h,R as t,T as n,U as J,b as o,w as _}from"./zod-Cg4WLWh2.js";import{t as N}from"./compiler-runtime-DeeZ7FnK.js";import{t as R}from"./merge-BBX6ug-N.js";import{d as m,n as S,u as U}from"./hotkeys-uKX61F1_.js";import{t as F}from"./invariant-C6yE60hi.js";const M=["pip","uv","rye","poetry","pixi"];var $=["normal","compact","medium","full","columns"],q=["auto","native","polars","lazy-polars","pandas"];const G="openai/gpt-4o";var O=["html","markdown","ipynb"];const H=["manual","ask","agent"];var p=h({api_key:t().optional(),base_url:t().optional(),project:t().optional()}).loose(),K=h({chat_model:t().nullish(),edit_model:t().nullish(),autocomplete_model:t().nullish(),displayed_models:_(t()).default([]),custom_models:_(t()).default([])});const v=l({completion:h({activate_on_typing:n().prefault(!0),signature_hint_on_typing:n().prefault(!1),copilot:D([n(),o(["github","codeium","custom"])]).prefault(!1).transform(a=>a===!0?"github":a),codeium_api_key:t().nullish()}).prefault({}),save:l({autosave:o(["off","after_delay"]).prefault("after_delay"),autosave_delay:d().nonnegative().transform(a=>Math.max(a,1e3)).prefault(1e3),format_on_save:n().prefault(!1)}).prefault({}),formatting:l({line_length:d().nonnegative().prefault(79).transform(a=>Math.min(a,1e3))}).prefault({}),keymap:l({preset:o(["default","vim"]).prefault("default"),overrides:j(t(),t()).prefault({}),destructive_delete:n().prefault(!0)}).prefault({}),runtime:l({auto_instantiate:n().prefault(!0),on_cell_change:o(["lazy","autorun"]).prefault("autorun"),auto_reload:o(["off","lazy","autorun"]).prefault("off"),reactive_tests:n().prefault(!0),watcher_on_save:o(["lazy","autorun"]).prefault("lazy"),default_sql_output:o(q).prefault("auto"),default_auto_download:_(o(O)).prefault([])}).prefault({}),display:l({theme:o(["light","dark","system"]).prefault("light"),code_editor_font_size:d().nonnegative().prefault(14),cell_output:o(["above","below"]).prefault("below"),dataframes:o(["rich","plain"]).prefault("rich"),default_table_page_size:d().prefault(10),default_table_max_columns:d().prefault(50),default_width:o($).prefault("medium").transform(a=>a==="normal"?"compact":a),locale:t().nullable().optional(),reference_highlighting:n().prefault(!0)}).prefault({}),package_management:l({manager:o(M).prefault("pip")}).prefault({}),ai:l({rules:t().prefault(""),mode:o(H).prefault("manual"),inline_tooltip:n().prefault(!1),open_ai:p.optional(),anthropic:p.optional(),google:p.optional(),ollama:p.optional(),openrouter:p.optional(),wandb:p.optional(),open_ai_compatible:p.optional(),azure:p.optional(),bedrock:l({region_name:t().optional(),profile_name:t().optional(),aws_access_key_id:t().optional(),aws_secret_access_key:t().optional()}).optional(),custom_providers:j(t(),p).prefault({}),models:K.prefault({displayed_models:[],custom_models:[]})}).prefault({}),experimental:l({markdown:n().optional(),rtc:n().optional()}).prefault(()=>({})),server:l({}).prefault(()=>({})),diagnostics:l({enabled:n().optional(),sql_linter:n().optional()}).prefault(()=>({})),sharing:l({html:n().optional(),wasm:n().optional()}).optional(),mcp:l({presets:_(o(["marimo","context7"])).optional()}).optional().prefault({})}).partial().prefault(()=>({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},diagnostics:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})),E=t(),L=o(q).prefault("auto"),b=h({width:o($).prefault("medium").transform(a=>a==="normal"?"compact":a),app_title:E.nullish(),css_file:t().nullish(),html_head_file:t().nullish(),auto_download:_(o(O)).prefault([]),sql_output:L}).prefault(()=>({width:"medium",auto_download:[],sql_output:"auto"}));function P(a){try{return b.parse(a)}catch(e){return m.error(`Marimo got an unexpected value in the configuration file: ${e}`),b.parse({})}}function Q(a){try{let e=v.parse(a);for(let[u,s]of Object.entries(e.experimental??{}))s===!0&&m.log(`\u{1F9EA} Experimental feature "${u}" is enabled.`);return e}catch(e){return e instanceof J?m.error(`Marimo got an unexpected value in the configuration file: ${I(e)}`):m.error(`Marimo got an unexpected value in the configuration file: ${e}`),T()}}function V(a){try{let e=a;return F(typeof e=="object","internal-error: marimo-config-overrides is not an object"),Object.keys(e).length>0&&m.log("\u{1F527} Project configuration overrides:",e),e}catch(e){return m.error(`Marimo got an unexpected configuration overrides: ${e}`),{}}}function T(){return v.parse({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},diagnostics:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})}var W=N();const y=r(T()),A=r({}),i=r(a=>{let e=a(A);return R({},a(y),e)}),X=r(a=>a(i).runtime.auto_instantiate),Y=r(a=>a(i).keymap.overrides??{}),Z=r(U()),aa=r(a=>new S(a(Y),{platform:a(Z)})),ea=r(a=>a(i).save),ta=r(a=>a(i).ai),oa=r(a=>a(i).completion),ra=r(a=>a(i).keymap.preset);function na(){return z(y)}function la(){let a=(0,W.c)(3),e=C(i),u=w(y),s;return a[0]!==e||a[1]!==u?(s=[e,u],a[0]=e,a[1]=u,a[2]=s):s=a[2],s}function ia(){return x.get(i)}const sa=r(a=>B(a(i)));r(a=>a(i).display.code_editor_font_size);const ua=r(a=>a(i).display.locale);function B(a){var e,u,s,f,c,k;return!!((u=(e=a.ai)==null?void 0:e.models)!=null&&u.chat_model)||!!((f=(s=a.ai)==null?void 0:s.models)!=null&&f.edit_model)||!!((k=(c=a.ai)==null?void 0:c.models)!=null&&k.autocomplete_model)}const g=r(P({}));function pa(){return z(g)}function ma(){return w(g)}function fa(){return x.get(g)}const ca=r(a=>a(g).width);r(a=>{var f,c;let e=a(i),u=((f=e.snippets)==null?void 0:f.custom_paths)??[],s=(c=e.snippets)==null?void 0:c.include_default_snippets;return u.length>0||s===!0});function da(){return!1}export{E as C,P as D,v as E,V as O,b as S,M as T,pa as _,ca as a,na as b,oa as c,ia as d,aa as f,i as g,ua as h,g as i,Q as k,A as l,ra as m,ta as n,X as o,B as p,sa as r,ea as s,da as t,fa as u,la as v,G as w,y as x,ma as y};
