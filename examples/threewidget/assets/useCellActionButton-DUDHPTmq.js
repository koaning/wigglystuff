import{s as ae}from"./chunk-LvLJmgfZ.js";import{d as ne,u as x}from"./useEvent-BhXAndur.js";import{Gn as ie,Sn as de,Tn as se,Un as re,Wn as ce,_ as he,dt as G,oi as me,qn as pe,w as ke}from"./cells-DPp5cDaO.js";import{t as fe}from"./compiler-runtime-B3qBwwSJ.js";import{a as ue,o as ye,r as be}from"./utils-YqBXNpsM.js";import{t as xe}from"./jsx-runtime-ZmTK25f3.js";import{r as je}from"./requests-B4FYHTZl.js";import{t as f}from"./createLucideIcon-BCdY6lG5.js";import{n as K,r as V}from"./x-ZP5cObgf.js";import{a as ve,m as Ce}from"./download-os8QlW6l.js";import{t as ge}from"./chevron-right--18M_6o9.js";import{t as Q}from"./circle-plus-haI9GLDP.js";import{t as Ie}from"./code-xml-CgN_Yig7.js";import{t as we}from"./eye-off-AK_9uodG.js";import{n as ze,t as We}from"./play-GLWQQs7F.js";import{t as Me}from"./link-DxicfMbs.js";import{a as _e,n as Se}from"./state-D4T75eZb.js";import{t as Te}from"./trash-2-DDsWrxuJ.js";import{t as Ae}from"./use-toast-BDYuj3zG.js";import{r as Ne}from"./mode-Bn7pdJvO.js";import{a as De,c as Re,n as Be}from"./dialog-eb-NieZw.js";import{n as Ee}from"./ImperativeModal-BNN1HA7x.js";import{t as He}from"./copy-DHrHayPa.js";import{i as Ue}from"./useRunCells-D2HBb4DB.js";import{r as F}from"./html-to-image-CIQqSu-S.js";import{t as qe}from"./label-E64zk6_7.js";import{t as Oe}from"./useDeleteCell-DdRX94yC.js";import{n as Pe,t as Le}from"./icons-CCHmxi8d.js";import{n as $}from"./name-cell-input-Bc7geMVf.js";import{t as J}from"./multi-icon-jM74Rbvg.js";import{t as Fe}from"./useSplitCell-C4khe6eU.js";var X=f("chevrons-down",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]),Y=f("chevrons-up",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),Z=f("scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),Ge=f("text-cursor-input",[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]]),ee=f("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),le=f("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Ke(a){let e=new URL(window.location.href);return e.hash=`scrollTo=${encodeURIComponent(a)}`,e.toString()}function Ve(a){var c;let e=(c=a.match(/scrollTo=([^&]+)/))==null?void 0:c[1];return e?decodeURIComponent(e.split("&")[0]):null}function te(a){return a==="_"?!1:!!(a&&a.trim().length>0)}var Qe=fe(),l=ae(xe(),1);function $e(a){let e=(0,Qe.c)(47),{cell:c,closePopover:u}=a,{createNewCell:h,updateCellConfig:d,updateCellName:j,moveCell:p,sendToTop:W,sendToBottom:M,addColumnBreakpoint:_,clearCellOutput:S,markUntouched:T}=ke(),A=Fe(),N=Ue(c==null?void 0:c.cellId),D=!x(he),R=Oe(),{openModal:v}=Ee(),B=ne(Se),E=x(be),y=x(ye),oe=x(Ne),b=x(ue),{saveCellConfig:s}=je();if(!c||oe){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],t}let{cellId:o,config:n,getEditorView:r,name:m,hasOutput:C,hasConsoleOutput:H,status:U}=c,g;e[1]!==o||e[2]!==n.disabled||e[3]!==s||e[4]!==d?(g=async()=>{let t={disabled:!n.disabled};await s({configs:{[o]:t}}),d({cellId:o,config:t})},e[1]=o,e[2]=n.disabled,e[3]=s,e[4]=d,e[5]=g):g=e[5];let q=g,I;e[6]!==o||e[7]!==n.hide_code||e[8]!==r||e[9]!==s||e[10]!==d?(I=async()=>{let t={hide_code:!n.hide_code};await s({configs:{[o]:t}}),d({cellId:o,config:t});let L=r();L&&(t.hide_code?L.contentDOM.blur():L.focus())},e[6]=o,e[7]=n.hide_code,e[8]=r,e[9]=s,e[10]=d,e[11]=I):I=e[11];let O=I,i=o===me,w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=(0,l.jsx)(We,{size:13,strokeWidth:1.5}),e[12]=w):w=e[12];let P=U==="running"||U==="queued"||U==="disabled-transitively"||n.disabled,k;e[13]===N?k=e[14]:(k=()=>N(),e[13]=N,e[14]=k);let z;return e[15]!==_||e[16]!==E||e[17]!==b||e[18]!==y||e[19]!==D||e[20]!==o||e[21]!==S||e[22]!==u||e[23]!==n.disabled||e[24]!==n.hide_code||e[25]!==h||e[26]!==R||e[27]!==r||e[28]!==H||e[29]!==C||e[30]!==i||e[31]!==T||e[32]!==p||e[33]!==m||e[34]!==v||e[35]!==s||e[36]!==M||e[37]!==W||e[38]!==B||e[39]!==A||e[40]!==P||e[41]!==k||e[42]!==q||e[43]!==O||e[44]!==d||e[45]!==j?(z=[[{icon:w,label:"Run cell",hotkey:"cell.run",hidden:P,redundant:!0,handle:k},{icon:(0,l.jsx)(_e,{size:13,strokeWidth:1.5}),label:"Refactor with AI",hidden:!E,handle:()=>{B(t=>(t==null?void 0:t.cellId)===o?null:{cellId:o})},hotkey:"cell.aiCompletion"},{icon:(0,l.jsx)(Z,{size:13,strokeWidth:1.5}),label:"Split",hotkey:"cell.splitCell",handle:()=>A({cellId:o})},{icon:(0,l.jsx)(Ie,{size:13,strokeWidth:1.5}),label:"Format",hotkey:"cell.format",handle:()=>{let t=r();t&&se({[o]:t})}},{icon:n.hide_code?(0,l.jsx)(re,{size:13,strokeWidth:1.5}):(0,l.jsx)(we,{size:13,strokeWidth:1.5}),label:n.hide_code?"Show code":"Hide code",handle:O,hotkey:"cell.hideCode"},{icon:n.disabled?(0,l.jsx)(ee,{size:13,strokeWidth:1.5}):(0,l.jsx)(le,{size:13,strokeWidth:1.5}),label:n.disabled?"Enable execution":"Disable execution",handle:q,hidden:i}],[{icon:(0,l.jsx)(Le,{}),label:"Convert to Markdown",hotkey:"cell.viewAsMarkdown",handle:async()=>{let t=r();t&&(F({autoInstantiate:y,createNewCell:h}),G(t,{language:"markdown",keepCodeAsIs:!1}),n.hide_code||(await s({configs:{[o]:{hide_code:!0}}}),d({cellId:o,config:{hide_code:!0}}),T({cellId:o})))},hidden:i},{icon:(0,l.jsx)(ce,{size:13,strokeWidth:1.5}),label:"Convert to SQL",handle:()=>{let t=r();t&&(F({autoInstantiate:y,createNewCell:h}),G(t,{language:"sql",keepCodeAsIs:!1}))},hidden:i},{icon:(0,l.jsx)(Pe,{}),label:"Toggle as Python",handle:()=>{let t=r();t&&(F({autoInstantiate:y,createNewCell:h}),de(t,"python",{force:!0}))},hidden:i}],[{icon:(0,l.jsxs)(J,{children:[(0,l.jsx)(Q,{size:13,strokeWidth:1.5}),(0,l.jsx)(K,{size:8,strokeWidth:2})]}),label:"Create cell above",hotkey:"cell.createAbove",handle:()=>h({cellId:o,before:!0}),hidden:i,redundant:!0},{icon:(0,l.jsxs)(J,{children:[(0,l.jsx)(Q,{size:13,strokeWidth:1.5}),(0,l.jsx)(V,{size:8,strokeWidth:2})]}),label:"Create cell below",hotkey:"cell.createBelow",handle:()=>h({cellId:o,before:!1}),redundant:!0},{icon:(0,l.jsx)(K,{size:13,strokeWidth:1.5}),label:"Move cell up",hotkey:"cell.moveUp",handle:()=>p({cellId:o,before:!0}),hidden:i},{icon:(0,l.jsx)(V,{size:13,strokeWidth:1.5}),label:"Move cell down",hotkey:"cell.moveDown",handle:()=>p({cellId:o,before:!1}),hidden:i},{icon:(0,l.jsx)(Ce,{size:13,strokeWidth:1.5}),label:"Move cell left",hotkey:"cell.moveLeft",handle:()=>p({cellId:o,direction:"left"}),hidden:b!=="columns"||i},{icon:(0,l.jsx)(ge,{size:13,strokeWidth:1.5}),label:"Move cell right",hotkey:"cell.moveRight",handle:()=>p({cellId:o,direction:"right"}),hidden:b!=="columns"||i},{icon:(0,l.jsx)(Y,{size:13,strokeWidth:1.5}),label:"Send to top",hotkey:"cell.sendToTop",handle:()=>W({cellId:o,scroll:!1}),hidden:i},{icon:(0,l.jsx)(X,{size:13,strokeWidth:1.5}),label:"Send to bottom",hotkey:"cell.sendToBottom",handle:()=>M({cellId:o,scroll:!1}),hidden:i},{icon:(0,l.jsx)(ie,{size:13,strokeWidth:1.5}),label:"Break into new column",hotkey:"cell.addColumnBreakpoint",handle:()=>_({cellId:o}),hidden:b!=="columns"||i}],[{icon:(0,l.jsx)(ze,{size:13,strokeWidth:1.5}),label:"Export output as PNG",hidden:!C,handle:()=>ve(o,"result")},{icon:(0,l.jsx)(pe,{size:13,strokeWidth:1.5}),label:"Clear output",hidden:!(C||H),handle:()=>{S({cellId:o})}}],[{icon:(0,l.jsx)(Ge,{size:13,strokeWidth:1.5}),label:"Name",disableClick:!0,handle:Ze,handleHeadless:()=>{v((0,l.jsxs)(Be,{children:[(0,l.jsx)(De,{children:(0,l.jsx)(Re,{children:"Rename cell"})}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(qe,{htmlFor:"cell-name",children:"Cell name"}),(0,l.jsx)($,{placeholder:"cell name",value:m,onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),t.stopPropagation(),v(null))},onChange:t=>j({cellId:o,name:t})})]})]}))},rightElement:(0,l.jsx)($,{placeholder:"cell name",value:m,onChange:t=>j({cellId:o,name:t}),onEnterKey:()=>u==null?void 0:u()}),hidden:i},{icon:(0,l.jsx)(Me,{size:13,strokeWidth:1.5}),label:"Copy link to cell",disabled:!te(m),tooltip:te(m)?void 0:"Only named cells can be linked to",handle:async()=>{await He(Ke(m)),Ae({description:"Link copied to clipboard"})}}],[{label:"Delete",hidden:!D,variant:"danger",icon:(0,l.jsx)(Te,{size:13,strokeWidth:1.5}),handle:()=>{R({cellId:o})}}]].map(Xe).filter(Je),e[15]=_,e[16]=E,e[17]=b,e[18]=y,e[19]=D,e[20]=o,e[21]=S,e[22]=u,e[23]=n.disabled,e[24]=n.hide_code,e[25]=h,e[26]=R,e[27]=r,e[28]=H,e[29]=C,e[30]=i,e[31]=T,e[32]=p,e[33]=m,e[34]=v,e[35]=s,e[36]=M,e[37]=W,e[38]=B,e[39]=A,e[40]=P,e[41]=k,e[42]=q,e[43]=O,e[44]=d,e[45]=j,e[46]=z):z=e[46],z}function Je(a){return a.length>0}function Xe(a){return a.filter(Ye)}function Ye(a){return!a.hidden}function Ze(a){a==null||a.stopPropagation(),a==null||a.preventDefault()}export{Z as a,ee as i,Ve as n,Y as o,le as r,X as s,$e as t};
