import{s as oe}from"./chunk-LvLJmgfZ.js";import{d as ae,u as x}from"./useEvent-DlWF5OMa.js";import{Bn as ne,Hn as ie,Sn as se,Vn as de,Wn as re,_ as ce,dt as F,ei as he,ri as me,w as pe,yn as ke}from"./cells-CpvLRFsM.js";import{t as fe}from"./compiler-runtime-DeeZ7FnK.js";import{a as ue,o as ye,r as be}from"./utils-pfqq9IdB.js";import{t as xe}from"./jsx-runtime-DN_bIXfG.js";import{r as je}from"./requests-C0HaHO6a.js";import{t as f}from"./createLucideIcon-CW2xpJ57.js";import{_ as V,g as K}from"./select-D9lTzMzP.js";import{r as ve,s as ge}from"./download-CcAOzx6T.js";import{t as Ce}from"./chevron-right-CqEd11Di.js";import{t as G}from"./circle-plus-D1IRnTdM.js";import{t as we}from"./code-xml-MBUyxNtK.js";import{t as Ie}from"./eye-off-D9zAYqG9.js";import{n as ze,t as We}from"./play-BJDBXApx.js";import{t as Me}from"./link-54sBkoQp.js";import{a as _e,n as Te}from"./state-CJMywDNY.js";import{t as Se}from"./trash-2-C-lF7BNB.js";import{t as Ae}from"./use-toast-Bzf3rpev.js";import{r as Be}from"./mode-wovPGH9p.js";import{a as Ne,c as De,n as Ee}from"./dialog-CF5DtF1E.js";import{n as He}from"./ImperativeModal-DVhvP4lH.js";import{t as Re}from"./copy-DRhpWiOq.js";import{i as Le}from"./useRunCells-Cm_P3BT1.js";import{r as U}from"./es-Biy2OCfF.js";import{t as Oe}from"./label-CNZLffHW.js";import{t as Pe}from"./useDeleteCell-DMZ3UAH-.js";import{n as qe,t as Ue}from"./icons-D4lB4En9.js";import{n as Q}from"./name-cell-input-BujUF0zO.js";import{t as $}from"./multi-icon-BOYRpNB_.js";import{t as Fe}from"./useSplitCell-BtJDIssu.js";var J=f("chevrons-down",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]),X=f("chevrons-up",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),Y=f("scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),Ve=f("text-cursor-input",[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]]),Z=f("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ee=f("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Ke(a){let e=document.getElementById(he.create(a));e&&(e.classList.add("printing-output"),ve(e,"result.png").finally(()=>{e.classList.remove("printing-output")}))}function Ge(a){let e=new URL(window.location.href);return e.hash=`scrollTo=${encodeURIComponent(a)}`,e.toString()}function Qe(a){var d;let e=(d=a.match(/scrollTo=([^&]+)/))==null?void 0:d[1];return e?decodeURIComponent(e.split("&")[0]):null}function le(a){return a==="_"?!1:!!(a&&a.trim().length>0)}var $e=fe(),l=oe(xe(),1);function Je(a){let e=(0,$e.c)(44),{cell:d,closePopover:u}=a,{createNewCell:r,updateCellConfig:h,updateCellName:j,moveCell:m,sendToTop:W,sendToBottom:M,addColumnBreakpoint:_,clearCellOutput:T}=pe(),S=Fe(),A=Le(d==null?void 0:d.cellId),B=!x(ce),N=Pe(),{openModal:v}=He(),D=ae(Te),E=x(be),y=x(ye),te=x(Be),b=x(ue),{saveCellConfig:p}=je();if(!d||te){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],t}let{cellId:o,config:n,getEditorView:s,name:c,hasOutput:g,hasConsoleOutput:H,status:R}=d,C;e[1]!==o||e[2]!==n.disabled||e[3]!==p||e[4]!==h?(C=async()=>{let t={disabled:!n.disabled};await p({configs:{[o]:t}}),h({cellId:o,config:t})},e[1]=o,e[2]=n.disabled,e[3]=p,e[4]=h,e[5]=C):C=e[5];let L=C,w;e[6]!==o||e[7]!==n.hide_code||e[8]!==s||e[9]!==p||e[10]!==h?(w=async()=>{let t={hide_code:!n.hide_code};await p({configs:{[o]:t}}),h({cellId:o,config:t});let q=s();q&&(t.hide_code?q.contentDOM.blur():q.focus())},e[6]=o,e[7]=n.hide_code,e[8]=s,e[9]=p,e[10]=h,e[11]=w):w=e[11];let O=w,i=o===me,I;e[12]===Symbol.for("react.memo_cache_sentinel")?(I=(0,l.jsx)(We,{size:13,strokeWidth:1.5}),e[12]=I):I=e[12];let P=R==="running"||R==="queued"||R==="disabled-transitively"||n.disabled,k;e[13]===A?k=e[14]:(k=()=>A(),e[13]=A,e[14]=k);let z;return e[15]!==_||e[16]!==E||e[17]!==b||e[18]!==y||e[19]!==B||e[20]!==o||e[21]!==T||e[22]!==u||e[23]!==n.disabled||e[24]!==n.hide_code||e[25]!==r||e[26]!==N||e[27]!==s||e[28]!==H||e[29]!==g||e[30]!==i||e[31]!==m||e[32]!==c||e[33]!==v||e[34]!==M||e[35]!==W||e[36]!==D||e[37]!==S||e[38]!==P||e[39]!==k||e[40]!==L||e[41]!==O||e[42]!==j?(z=[[{icon:I,label:"Run cell",hotkey:"cell.run",hidden:P,redundant:!0,handle:k},{icon:(0,l.jsx)(_e,{size:13,strokeWidth:1.5}),label:"Refactor with AI",hidden:!E,handle:()=>{D(t=>(t==null?void 0:t.cellId)===o?null:{cellId:o})},hotkey:"cell.aiCompletion"},{icon:(0,l.jsx)(Y,{size:13,strokeWidth:1.5}),label:"Split",hotkey:"cell.splitCell",handle:()=>S({cellId:o})},{icon:(0,l.jsx)(we,{size:13,strokeWidth:1.5}),label:"Format",hotkey:"cell.format",handle:()=>{let t=s();t&&se({[o]:t})}},{icon:n.hide_code?(0,l.jsx)(ne,{size:13,strokeWidth:1.5}):(0,l.jsx)(Ie,{size:13,strokeWidth:1.5}),label:n.hide_code?"Show code":"Hide code",handle:O,hotkey:"cell.hideCode"},{icon:n.disabled?(0,l.jsx)(Z,{size:13,strokeWidth:1.5}):(0,l.jsx)(ee,{size:13,strokeWidth:1.5}),label:n.disabled?"Enable execution":"Disable execution",handle:L,hidden:i}],[{icon:(0,l.jsx)(Ue,{}),label:"Convert to Markdown",hotkey:"cell.viewAsMarkdown",handle:()=>{let t=s();t&&(U({autoInstantiate:y,createNewCell:r}),F(t,{language:"markdown",keepCodeAsIs:!1}))},hidden:i},{icon:(0,l.jsx)(de,{size:13,strokeWidth:1.5}),label:"Convert to SQL",handle:()=>{let t=s();t&&(U({autoInstantiate:y,createNewCell:r}),F(t,{language:"sql",keepCodeAsIs:!1}))},hidden:i},{icon:(0,l.jsx)(qe,{}),label:"Toggle as Python",handle:()=>{let t=s();t&&(U({autoInstantiate:y,createNewCell:r}),ke(t,"python",{force:!0}))},hidden:i}],[{icon:(0,l.jsxs)($,{children:[(0,l.jsx)(G,{size:13,strokeWidth:1.5}),(0,l.jsx)(K,{size:8,strokeWidth:2})]}),label:"Create cell above",hotkey:"cell.createAbove",handle:()=>r({cellId:o,before:!0}),hidden:i,redundant:!0},{icon:(0,l.jsxs)($,{children:[(0,l.jsx)(G,{size:13,strokeWidth:1.5}),(0,l.jsx)(V,{size:8,strokeWidth:2})]}),label:"Create cell below",hotkey:"cell.createBelow",handle:()=>r({cellId:o,before:!1}),redundant:!0},{icon:(0,l.jsx)(K,{size:13,strokeWidth:1.5}),label:"Move cell up",hotkey:"cell.moveUp",handle:()=>m({cellId:o,before:!0}),hidden:i},{icon:(0,l.jsx)(V,{size:13,strokeWidth:1.5}),label:"Move cell down",hotkey:"cell.moveDown",handle:()=>m({cellId:o,before:!1}),hidden:i},{icon:(0,l.jsx)(ge,{size:13,strokeWidth:1.5}),label:"Move cell left",hotkey:"cell.moveLeft",handle:()=>m({cellId:o,direction:"left"}),hidden:b!=="columns"||i},{icon:(0,l.jsx)(Ce,{size:13,strokeWidth:1.5}),label:"Move cell right",hotkey:"cell.moveRight",handle:()=>m({cellId:o,direction:"right"}),hidden:b!=="columns"||i},{icon:(0,l.jsx)(X,{size:13,strokeWidth:1.5}),label:"Send to top",hotkey:"cell.sendToTop",handle:()=>W({cellId:o,scroll:!1}),hidden:i},{icon:(0,l.jsx)(J,{size:13,strokeWidth:1.5}),label:"Send to bottom",hotkey:"cell.sendToBottom",handle:()=>M({cellId:o,scroll:!1}),hidden:i},{icon:(0,l.jsx)(ie,{size:13,strokeWidth:1.5}),label:"Break into new column",hotkey:"cell.addColumnBreakpoint",handle:()=>_({cellId:o}),hidden:b!=="columns"||i}],[{icon:(0,l.jsx)(ze,{size:13,strokeWidth:1.5}),label:"Export output as PNG",hidden:!g,handle:()=>Ke(o)},{icon:(0,l.jsx)(re,{size:13,strokeWidth:1.5}),label:"Clear output",hidden:!(g||H),handle:()=>{T({cellId:o})}}],[{icon:(0,l.jsx)(Ve,{size:13,strokeWidth:1.5}),label:"Name",disableClick:!0,handle:el,handleHeadless:()=>{v((0,l.jsxs)(Ee,{children:[(0,l.jsx)(Ne,{children:(0,l.jsx)(De,{children:"Rename cell"})}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(Oe,{htmlFor:"cell-name",children:"Cell name"}),(0,l.jsx)(Q,{placeholder:"cell name",value:c,onKeyDown:t=>{t.key==="Enter"&&(t.preventDefault(),t.stopPropagation(),v(null))},onChange:t=>j({cellId:o,name:t})})]})]}))},rightElement:(0,l.jsx)(Q,{placeholder:"cell name",value:c,onChange:t=>j({cellId:o,name:t}),onEnterKey:()=>u==null?void 0:u()}),hidden:i},{icon:(0,l.jsx)(Me,{size:13,strokeWidth:1.5}),label:"Copy link to cell",disabled:!le(c),tooltip:le(c)?void 0:"Only named cells can be linked to",handle:async()=>{await Re(Ge(c)),Ae({description:"Link copied to clipboard"})}}],[{label:"Delete",hidden:!B,variant:"danger",icon:(0,l.jsx)(Se,{size:13,strokeWidth:1.5}),handle:()=>{N({cellId:o})}}]].map(Ye).filter(Xe),e[15]=_,e[16]=E,e[17]=b,e[18]=y,e[19]=B,e[20]=o,e[21]=T,e[22]=u,e[23]=n.disabled,e[24]=n.hide_code,e[25]=r,e[26]=N,e[27]=s,e[28]=H,e[29]=g,e[30]=i,e[31]=m,e[32]=c,e[33]=v,e[34]=M,e[35]=W,e[36]=D,e[37]=S,e[38]=P,e[39]=k,e[40]=L,e[41]=O,e[42]=j,e[43]=z):z=e[43],z}function Xe(a){return a.length>0}function Ye(a){return a.filter(Ze)}function Ze(a){return!a.hidden}function el(a){a==null||a.stopPropagation(),a==null||a.preventDefault()}export{Y as a,Z as i,Qe as n,X as o,ee as r,J as s,Je as t};
