import{s as ie}from"./chunk-LvLJmgfZ.js";import{c as w,l as ne}from"./jotai-D74Ef_p1.js";import{Br as se,Cn as de,En as re,Ln as ce,Rn as he,Ur as me,_ as pe,dt as V,w as ke,zn as fe}from"./cells-B1ds6ZjK.js";import{t as ue}from"./compiler-runtime-QczY1yfQ.js";import{a as ye,o as be,r as xe}from"./utils-Clm_pCuX.js";import{t as ge}from"./jsx-runtime-B4_2-8Ho.js";import{r as je}from"./requests-CMMs4cl8.js";import{t as h}from"./createLucideIcon-C9QGcv--.js";import{_ as G,g as Q}from"./select-Dre1F6mo.js";import{t as ve}from"./chevron-right-Cn1LhTdd.js";import{c as Ce,r as we}from"./download-Yhx6Ym5-.js";import{t as $}from"./circle-plus-Bi4xcvVC.js";import{t as ze}from"./circle-x-72ItD0Ur.js";import{t as Ie}from"./code-xml-fIuLXB6s.js";import{t as We}from"./eye-off-CkynlJbW.js";import{t as Me}from"./image-D-xr8yWr.js";import{t as _e}from"./link-CbS4fPBa.js";import{n as J,r as Te}from"./name-cell-input-Do6XiA3C.js";import{a as Ae,n as Be}from"./state-GOQmrHWh.js";import{t as Ee}from"./trash-2-DkyoQBeV.js";import{t as Ne}from"./use-toast-CTk3v2Fk.js";import{r as Re}from"./mode-DQrmKtLw.js";import{a as Se,c as Le,n as De}from"./dialog-C-S4uQH4.js";import{n as He}from"./ImperativeModal-DD50EU1G.js";import{t as qe}from"./copy-CL0ql7QN.js";import{i as Oe}from"./useRunCells-D8WfVv85.js";import{t as Pe}from"./label-CzgZucd0.js";import{n as K}from"./add-missing-import-BkauGlV2.js";import{t as Ue}from"./useDeleteCell-BCwFj4vN.js";import{n as Fe,t as Ke}from"./icons-CVbUY4lM.js";import{t as Ve}from"./switch-DXZyYXuk.js";import{t as X}from"./multi-icon-Du4jZia9.js";import{t as Ge}from"./useSplitCell-BwGnS2JP.js";var Y=h("chevrons-down",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]),Z=h("chevrons-up",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),Qe=h("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),ee=h("scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),$e=h("text-cursor-input",[["path",{d:"M12 20h-1a2 2 0 0 1-2-2 2 2 0 0 1-2 2H6",key:"1528k5"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M6 4h1a2 2 0 0 1 2 2 2 2 0 0 1 2-2h1",key:"1mj8rg"}],["path",{d:"M9 6v12",key:"velyjx"}]]),te=h("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),le=h("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Je(a){let e=document.getElementById(se.create(a));e&&(e.classList.add("printing-output"),we(e,"result.png").finally(()=>{e.classList.remove("printing-output")}))}function Xe(a){let e=new URL(window.location.href);return e.hash=`scrollTo=${encodeURIComponent(a)}`,e.toString()}function Ye(a){var r;let e=(r=a.match(/scrollTo=([^&]+)/))==null?void 0:r[1];return e?decodeURIComponent(e.split("&")[0]):null}function oe(a){return a==="_"?!1:!!(a&&a.trim().length>0)}var Ze=ue(),t=ie(ge(),1);function et(a){let e=(0,Ze.c)(55),{cell:r,closePopover:g}=a,{createNewCell:c,updateCellConfig:m,updateCellName:p,moveCell:k,sendToTop:B,sendToBottom:E,addColumnBreakpoint:N,clearCellOutput:R}=ke(),S=Ge(),L=Oe(r==null?void 0:r.cellId),D=!w(pe),H=Ue(),{openModal:z}=He(),q=ne(Be),O=w(xe),j=w(be),ae=w(Re),v=w(ye),{saveCellConfig:f}=je();if(!r||ae){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0],l}let{cellId:o,config:i,getEditorView:d,name:s,hasOutput:I,hasConsoleOutput:P,status:C}=r,W;e[1]!==o||e[2]!==i.disabled||e[3]!==f||e[4]!==m?(W=async()=>{let l={disabled:!i.disabled};await f({configs:{[o]:l}}),m({cellId:o,config:l})},e[1]=o,e[2]=i.disabled,e[3]=f,e[4]=m,e[5]=W):W=e[5];let M=W,_;e[6]!==o||e[7]!==i.hide_code||e[8]!==d||e[9]!==f||e[10]!==m?(_=async()=>{let l={hide_code:!i.hide_code};await f({configs:{[o]:l}}),m({cellId:o,config:l});let F=d();F&&(l.hide_code?F.contentDOM.blur():F.focus())},e[6]=o,e[7]=i.hide_code,e[8]=d,e[9]=f,e[10]=m,e[11]=_):_=e[11];let U=_,n=o===me,T;e[12]===Symbol.for("react.memo_cache_sentinel")?(T=(0,t.jsx)($e,{size:13,strokeWidth:1.5}),e[12]=T):T=e[12];let u;e[13]!==o||e[14]!==s||e[15]!==z||e[16]!==p?(u=()=>{z((0,t.jsxs)(De,{children:[(0,t.jsx)(Se,{children:(0,t.jsx)(Le,{children:"Rename cell"})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(Pe,{htmlFor:"cell-name",children:"Cell name"}),(0,t.jsx)(J,{placeholder:"cell name",value:s,onKeyDown:l=>{l.key==="Enter"&&(l.preventDefault(),l.stopPropagation(),z(null))},onChange:l=>p({cellId:o,name:l})})]})]}))},e[13]=o,e[14]=s,e[15]=z,e[16]=p,e[17]=u):u=e[17];let y;e[18]!==o||e[19]!==p?(y=l=>p({cellId:o,name:l}),e[18]=o,e[19]=p,e[20]=y):y=e[20];let b;e[21]===g?b=e[22]:(b=()=>g==null?void 0:g(),e[21]=g,e[22]=b);let x;e[23]!==s||e[24]!==y||e[25]!==b?(x=(0,t.jsx)(J,{placeholder:"cell name",value:s,onChange:y,onEnterKey:b}),e[23]=s,e[24]=y,e[25]=b,e[26]=x):x=e[26];let A;return e[27]!==N||e[28]!==O||e[29]!==v||e[30]!==j||e[31]!==D||e[32]!==o||e[33]!==R||e[34]!==i.disabled||e[35]!==i.hide_code||e[36]!==c||e[37]!==H||e[38]!==d||e[39]!==P||e[40]!==I||e[41]!==n||e[42]!==k||e[43]!==s||e[44]!==L||e[45]!==E||e[46]!==B||e[47]!==q||e[48]!==S||e[49]!==C||e[50]!==u||e[51]!==x||e[52]!==M||e[53]!==U?(A=[[{icon:T,label:"Name",disableClick:!0,handle:at,handleHeadless:u,rightElement:x,hidden:n},{icon:(0,t.jsx)(Te,{size:13,strokeWidth:1.5}),label:"Run cell",hotkey:"cell.run",hidden:C==="running"||C==="queued"||C==="disabled-transitively"||i.disabled,handle:()=>L()},{icon:(0,t.jsx)(Ae,{size:13,strokeWidth:1.5}),label:"AI completion",hidden:!O,handle:()=>{q(l=>(l==null?void 0:l.cellId)===o?null:{cellId:o})},hotkey:"cell.aiCompletion"},{icon:(0,t.jsx)(ee,{size:13,strokeWidth:1.5}),label:"Split cell",hotkey:"cell.splitCell",handle:()=>S({cellId:o})},{icon:(0,t.jsx)(Me,{size:13,strokeWidth:1.5}),label:"Export output as PNG",hidden:!I,handle:()=>Je(o)},{icon:(0,t.jsx)(Ie,{size:13,strokeWidth:1.5}),label:"Format cell",hotkey:"cell.format",handle:()=>{let l=d();l&&re({[o]:l})}},{icon:i.hide_code?(0,t.jsx)(ce,{size:13,strokeWidth:1.5}):(0,t.jsx)(We,{size:13,strokeWidth:1.5}),label:i.hide_code?"Show code":"Hide code",handle:U,hotkey:"cell.hideCode"},{icon:i.disabled?(0,t.jsx)(te,{size:13,strokeWidth:1.5}):(0,t.jsx)(le,{size:13,strokeWidth:1.5}),label:"Reactive execution",rightElement:(0,t.jsx)(Ve,{"data-testid":"cell-disable-switch",checked:!i.disabled,size:"sm",onCheckedChange:M}),handle:M,hidden:n},{icon:(0,t.jsx)(ze,{size:13,strokeWidth:1.5}),label:"Clear output",hidden:!(I||P),handle:()=>{R({cellId:o})}}],[{icon:(0,t.jsx)(Ke,{}),label:"Convert to Markdown",hotkey:"cell.viewAsMarkdown",handle:()=>{let l=d();l&&(K({autoInstantiate:j,createNewCell:c}),V(l,{language:"markdown",keepCodeAsIs:!1}))},hidden:n},{icon:(0,t.jsx)(he,{size:13,strokeWidth:1.5}),label:"Convert to SQL",handle:()=>{let l=d();l&&(K({autoInstantiate:j,createNewCell:c}),V(l,{language:"sql",keepCodeAsIs:!1}))},hidden:n},{icon:(0,t.jsx)(Fe,{}),label:"Toggle as Python",handle:()=>{let l=d();l&&(K({autoInstantiate:j,createNewCell:c}),de(l,"python",{force:!0}))},hidden:n}],[{icon:(0,t.jsxs)(X,{children:[(0,t.jsx)($,{size:13,strokeWidth:1.5}),(0,t.jsx)(Q,{size:8,strokeWidth:2})]}),label:"Create cell above",hotkey:"cell.createAbove",handle:()=>c({cellId:o,before:!0}),hidden:n},{icon:(0,t.jsxs)(X,{children:[(0,t.jsx)($,{size:13,strokeWidth:1.5}),(0,t.jsx)(G,{size:8,strokeWidth:2})]}),label:"Create cell below",hotkey:"cell.createBelow",handle:()=>c({cellId:o,before:!1})},{icon:(0,t.jsx)(Q,{size:13,strokeWidth:1.5}),label:"Move cell up",hotkey:"cell.moveUp",handle:()=>k({cellId:o,before:!0}),hidden:n},{icon:(0,t.jsx)(G,{size:13,strokeWidth:1.5}),label:"Move cell down",hotkey:"cell.moveDown",handle:()=>k({cellId:o,before:!1}),hidden:n},{icon:(0,t.jsx)(Ce,{size:13,strokeWidth:1.5}),label:"Move cell left",hotkey:"cell.moveLeft",handle:()=>k({cellId:o,direction:"left"}),hidden:v!=="columns"||n},{icon:(0,t.jsx)(ve,{size:13,strokeWidth:1.5}),label:"Move cell right",hotkey:"cell.moveRight",handle:()=>k({cellId:o,direction:"right"}),hidden:v!=="columns"||n},{icon:(0,t.jsx)(Z,{size:13,strokeWidth:1.5}),label:"Send to top",hotkey:"cell.sendToTop",handle:()=>B({cellId:o,scroll:!1}),hidden:n},{icon:(0,t.jsx)(Y,{size:13,strokeWidth:1.5}),label:"Send to bottom",hotkey:"cell.sendToBottom",handle:()=>E({cellId:o,scroll:!1}),hidden:n},{icon:(0,t.jsx)(fe,{size:13,strokeWidth:1.5}),label:"Break into new column",hotkey:"cell.addColumnBreakpoint",handle:()=>N({cellId:o}),hidden:v!=="columns"||n}],[{icon:(0,t.jsx)(_e,{size:13,strokeWidth:1.5}),label:"Copy link to cell",disabled:!oe(s),tooltip:oe(s)?void 0:"Only named cells can be linked to",handle:async()=>{await qe(Xe(s)),Ne({description:"Link copied to clipboard"})}}],[{label:"Delete",hidden:!D,variant:"danger",icon:(0,t.jsx)(Ee,{size:13,strokeWidth:1.5}),handle:()=>{H({cellId:o})}}]].map(lt).filter(tt),e[27]=N,e[28]=O,e[29]=v,e[30]=j,e[31]=D,e[32]=o,e[33]=R,e[34]=i.disabled,e[35]=i.hide_code,e[36]=c,e[37]=H,e[38]=d,e[39]=P,e[40]=I,e[41]=n,e[42]=k,e[43]=s,e[44]=L,e[45]=E,e[46]=B,e[47]=q,e[48]=S,e[49]=C,e[50]=u,e[51]=x,e[52]=M,e[53]=U,e[54]=A):A=e[54],A}function tt(a){return a.length>0}function lt(a){return a.filter(ot)}function ot(a){return!a.hidden}function at(a){a==null||a.stopPropagation(),a==null||a.preventDefault()}export{ee as a,Y as c,te as i,Ye as n,Qe as o,le as r,Z as s,et as t};
