import{t as R}from"./chunk-LvLJmgfZ.js";import{d as D}from"./hotkeys-BHHWjLlp.js";import{r as j}from"./constants-B6Cb__3x.js";var Q=R((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toBig=t.shrSL=t.shrSH=t.rotrSL=t.rotrSH=t.rotrBL=t.rotrBH=t.rotr32L=t.rotr32H=t.rotlSL=t.rotlSH=t.rotlBL=t.rotlBH=t.add5L=t.add5H=t.add4L=t.add4H=t.add3L=t.add3H=void 0,t.add=y,t.fromBig=k,t.split=g;var u=BigInt(2**32-1),c=BigInt(32);function k(o,e=!1){return e?{h:Number(o&u),l:Number(o>>c&u)}:{h:Number(o>>c&u)|0,l:Number(o&u)|0}}function g(o,e=!1){let n=o.length,l=new Uint32Array(n),m=new Uint32Array(n);for(let S=0;S<n;S++){let{h:M,l:$}=k(o[S],e);[l[S],m[S]]=[M,$]}return[l,m]}var H=(o,e)=>BigInt(o>>>0)<<c|BigInt(e>>>0);t.toBig=H;var x=(o,e,n)=>o>>>n;t.shrSH=x;var A=(o,e,n)=>o<<32-n|e>>>n;t.shrSL=A;var E=(o,e,n)=>o>>>n|e<<32-n;t.rotrSH=E;var P=(o,e,n)=>o<<32-n|e>>>n;t.rotrSL=P;var I=(o,e,n)=>o<<64-n|e>>>n-32;t.rotrBH=I;var _=(o,e,n)=>o>>>n-32|e<<64-n;t.rotrBL=_;var C=(o,e)=>e;t.rotr32H=C;var F=(o,e)=>o;t.rotr32L=F;var O=(o,e,n)=>o<<n|e>>>32-n;t.rotlSH=O;var B=(o,e,n)=>e<<n|o>>>32-n;t.rotlSL=B;var h=(o,e,n)=>e<<n-32|o>>>64-n;t.rotlBH=h;var w=(o,e,n)=>o<<n-32|e>>>64-n;t.rotlBL=w;function y(o,e,n,l){let m=(e>>>0)+(l>>>0);return{h:o+n+(m/2**32|0)|0,l:m|0}}var p=(o,e,n)=>(o>>>0)+(e>>>0)+(n>>>0);t.add3L=p;var T=(o,e,n,l)=>e+n+l+(o/2**32|0)|0;t.add3H=T;var f=(o,e,n,l)=>(o>>>0)+(e>>>0)+(n>>>0)+(l>>>0);t.add4L=f;var i=(o,e,n,l,m)=>e+n+l+m+(o/2**32|0)|0;t.add4H=i;var a=(o,e,n,l,m)=>(o>>>0)+(e>>>0)+(n>>>0)+(l>>>0)+(m>>>0);t.add5L=a;var d=(o,e,n,l,m,S)=>e+n+l+m+S+(o/2**32|0)|0;t.add5H=d,t.default={fromBig:k,split:g,toBig:H,shrSH:x,shrSL:A,rotrSH:E,rotrSL:P,rotrBH:I,rotrBL:_,rotr32H:C,rotr32L:F,rotlSH:O,rotlSL:B,rotlBH:h,rotlBL:w,add:y,add3L:p,add3H:T,add4L:f,add4H:i,add5H:d,add5L:a}})),Y=R((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0})),Z=R((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=c,t.anumber=k,t.abytes=g,t.ahash=H,t.aexists=x,t.aoutput=A,t.u8=E,t.u32=P,t.clean=I,t.createView=_,t.rotr=C,t.rotl=F,t.byteSwap=O,t.byteSwap32=B,t.bytesToHex=y,t.hexToBytes=f,t.asyncLoop=i,t.utf8ToBytes=a,t.bytesToUtf8=d,t.toBytes=o,t.kdfInputToBytes=e,t.concatBytes=n,t.checkOpts=l,t.createHasher=m,t.createOptHasher=S,t.createXOFer=M,t.randomBytes=$;var u=Y();function c(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function k(r){if(!Number.isSafeInteger(r)||r<0)throw Error("positive integer expected, got "+r)}function g(r,...s){if(!c(r))throw Error("Uint8Array expected");if(s.length>0&&!s.includes(r.length))throw Error("Uint8Array expected of length "+s+", got length="+r.length)}function H(r){if(typeof r!="function"||typeof r.create!="function")throw Error("Hash should be wrapped by utils.createHasher");k(r.outputLen),k(r.blockLen)}function x(r,s=!0){if(r.destroyed)throw Error("Hash instance has been destroyed");if(s&&r.finished)throw Error("Hash#digest() has already been called")}function A(r,s){g(r);let b=s.outputLen;if(r.length<b)throw Error("digestInto() expects output buffer of length at least "+b)}function E(r){return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}function P(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function I(...r){for(let s=0;s<r.length;s++)r[s].fill(0)}function _(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function C(r,s){return r<<32-s|r>>>s}function F(r,s){return r<<s|r>>>32-s>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function O(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}t.swap8IfBE=t.isLE?r=>r:r=>O(r),t.byteSwapIfBE=t.swap8IfBE;function B(r){for(let s=0;s<r.length;s++)r[s]=O(r[s]);return r}t.swap32IfBE=t.isLE?r=>r:B;var h=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",w=Array.from({length:256},(r,s)=>s.toString(16).padStart(2,"0"));function y(r){if(g(r),h)return r.toHex();let s="";for(let b=0;b<r.length;b++)s+=w[r[b]];return s}var p={_0:48,_9:57,A:65,F:70,a:97,f:102};function T(r){if(r>=p._0&&r<=p._9)return r-p._0;if(r>=p.A&&r<=p.F)return r-(p.A-10);if(r>=p.a&&r<=p.f)return r-(p.a-10)}function f(r){if(typeof r!="string")throw Error("hex string expected, got "+typeof r);if(h)return Uint8Array.fromHex(r);let s=r.length,b=s/2;if(s%2)throw Error("hex string expected, got unpadded hex of length "+s);let L=new Uint8Array(b);for(let v=0,U=0;v<b;v++,U+=2){let X=T(r.charCodeAt(U)),W=T(r.charCodeAt(U+1));if(X===void 0||W===void 0){let J=r[U]+r[U+1];throw Error('hex string expected, got non-hex character "'+J+'" at index '+U)}L[v]=X*16+W}return L}t.nextTick=async()=>{};async function i(r,s,b){let L=Date.now();for(let v=0;v<r;v++){b(v);let U=Date.now()-L;U>=0&&U<s||(await(0,t.nextTick)(),L+=U)}}function a(r){if(typeof r!="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function d(r){return new TextDecoder().decode(r)}function o(r){return typeof r=="string"&&(r=a(r)),g(r),r}function e(r){return typeof r=="string"&&(r=a(r)),g(r),r}function n(...r){let s=0;for(let L=0;L<r.length;L++){let v=r[L];g(v),s+=v.length}let b=new Uint8Array(s);for(let L=0,v=0;L<r.length;L++){let U=r[L];b.set(U,v),v+=U.length}return b}function l(r,s){if(s!==void 0&&{}.toString.call(s)!=="[object Object]")throw Error("options should be object or undefined");return Object.assign(r,s)}t.Hash=class{};function m(r){let s=L=>r().update(o(L)).digest(),b=r();return s.outputLen=b.outputLen,s.blockLen=b.blockLen,s.create=()=>r(),s}function S(r){let s=(L,v)=>r(v).update(o(L)).digest(),b=r({});return s.outputLen=b.outputLen,s.blockLen=b.blockLen,s.create=L=>r(L),s}function M(r){let s=(L,v)=>r(v).update(o(L)).digest(),b=r({});return s.outputLen=b.outputLen,s.blockLen=b.blockLen,s.create=L=>r(L),s}t.wrapConstructor=m,t.wrapConstructorWithOpts=S,t.wrapXOFConstructorWithOpts=M;function $(r=32){if(u.crypto&&typeof u.crypto.getRandomValues=="function")return u.crypto.getRandomValues(new Uint8Array(r));if(u.crypto&&typeof u.crypto.randomBytes=="function")return Uint8Array.from(u.crypto.randomBytes(r));throw Error("crypto.getRandomValues must be defined")}})),tt=R((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=void 0,t.keccakP=w;var u=Q(),c=Z(),k=BigInt(0),g=BigInt(1),H=BigInt(2),x=BigInt(7),A=BigInt(256),E=BigInt(113),P=[],I=[],_=[];for(let f=0,i=g,a=1,d=0;f<24;f++){[a,d]=[d,(2*a+3*d)%5],P.push(2*(5*d+a)),I.push((f+1)*(f+2)/2%64);let o=k;for(let e=0;e<7;e++)i=(i<<g^(i>>x)*E)%A,i&H&&(o^=g<<(g<<BigInt(e))-g);_.push(o)}var C=(0,u.split)(_,!0),F=C[0],O=C[1],B=(f,i,a)=>a>32?(0,u.rotlBH)(f,i,a):(0,u.rotlSH)(f,i,a),h=(f,i,a)=>a>32?(0,u.rotlBL)(f,i,a):(0,u.rotlSL)(f,i,a);function w(f,i=24){let a=new Uint32Array(10);for(let d=24-i;d<24;d++){for(let n=0;n<10;n++)a[n]=f[n]^f[n+10]^f[n+20]^f[n+30]^f[n+40];for(let n=0;n<10;n+=2){let l=(n+8)%10,m=(n+2)%10,S=a[m],M=a[m+1],$=B(S,M,1)^a[l],r=h(S,M,1)^a[l+1];for(let s=0;s<50;s+=10)f[n+s]^=$,f[n+s+1]^=r}let o=f[2],e=f[3];for(let n=0;n<24;n++){let l=I[n],m=B(o,e,l),S=h(o,e,l),M=P[n];o=f[M],e=f[M+1],f[M]=m,f[M+1]=S}for(let n=0;n<50;n+=10){for(let l=0;l<10;l++)a[l]=f[n+l];for(let l=0;l<10;l++)f[n+l]^=~a[(l+2)%10]&a[(l+4)%10]}f[0]^=F[d],f[1]^=O[d]}(0,c.clean)(a)}var y=class G extends c.Hash{constructor(i,a,d,o=!1,e=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=i,this.suffix=a,this.outputLen=d,this.enableXOF=o,this.rounds=e,(0,c.anumber)(d),!(0<i&&i<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,c.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,c.swap32IfBE)(this.state32),w(this.state32,this.rounds),(0,c.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(i){(0,c.aexists)(this),i=(0,c.toBytes)(i),(0,c.abytes)(i);let{blockLen:a,state:d}=this,o=i.length;for(let e=0;e<o;){let n=Math.min(a-this.pos,o-e);for(let l=0;l<n;l++)d[this.pos++]^=i[e++];this.pos===a&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:i,suffix:a,pos:d,blockLen:o}=this;i[d]^=a,a&128&&d===o-1&&this.keccak(),i[o-1]^=128,this.keccak()}writeInto(i){(0,c.aexists)(this,!1),(0,c.abytes)(i),this.finish();let a=this.state,{blockLen:d}=this;for(let o=0,e=i.length;o<e;){this.posOut>=d&&this.keccak();let n=Math.min(d-this.posOut,e-o);i.set(a.subarray(this.posOut,this.posOut+n),o),this.posOut+=n,o+=n}return i}xofInto(i){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(i)}xof(i){return(0,c.anumber)(i),this.xofInto(new Uint8Array(i))}digestInto(i){if((0,c.aoutput)(i,this),this.finished)throw Error("digest() was already called");return this.writeInto(i),this.destroy(),i}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,c.clean)(this.state)}_cloneInto(i){let{blockLen:a,suffix:d,outputLen:o,rounds:e,enableXOF:n}=this;return i||(i=new G(a,d,o,n,e)),i.state32.set(this.state32),i.pos=this.pos,i.posOut=this.posOut,i.finished=this.finished,i.rounds=e,i.suffix=d,i.outputLen=o,i.enableXOF=n,i.destroyed=this.destroyed,i}};t.Keccak=y;var p=(f,i,a)=>(0,c.createHasher)(()=>new y(i,f,a));t.sha3_224=p(6,144,224/8),t.sha3_256=p(6,136,256/8),t.sha3_384=p(6,104,384/8),t.sha3_512=p(6,72,512/8),t.keccak_224=p(1,144,224/8),t.keccak_256=p(1,136,256/8),t.keccak_384=p(1,104,384/8),t.keccak_512=p(1,72,512/8);var T=(f,i,a)=>(0,c.createXOFer)((d={})=>new y(i,f,d.dkLen===void 0?a:d.dkLen,!0));t.shake128=T(31,168,128/8),t.shake256=T(31,136,256/8)})),rt=R(((t,u)=>{var{sha3_512:c}=tt(),k=24,g=32,H=(h=4,w=Math.random)=>{let y="";for(;y.length<h;)y+=Math.floor(w()*36).toString(36);return y};function x(h){let w=0n;for(let y of h.values()){let p=BigInt(y);w=(w<<8n)+p}return w}var A=(h="")=>x(c(h)).toString(36).slice(1),E=Array.from({length:26},(h,w)=>String.fromCharCode(w+97)),P=h=>E[Math.floor(h()*E.length)],I=({globalObj:h=typeof global<"u"?global:typeof window<"u"?window:{},random:w=Math.random}={})=>{let y=Object.keys(h).toString();return A(y.length?y+H(g,w):H(g,w)).substring(0,g)},_=h=>()=>h++,C=476782367,F=({random:h=Math.random,counter:w=_(Math.floor(h()*C)),length:y=k,fingerprint:p=I({random:h})}={})=>function(){let T=P(h),f=Date.now().toString(36),i=w().toString(36);return`${T+A(`${f+H(y,h)+i+p}`).substring(1,y)}`},O=F(),B=(h,{minLength:w=2,maxLength:y=g}={})=>{let p=h.length,T=/^[0-9a-z]+$/;return!!(typeof h=="string"&&p>=w&&p<=y&&T.test(h))};u.exports.getConstants=()=>({defaultLength:k,bigLength:g}),u.exports.init=F,u.exports.createId=O,u.exports.bufToBigInt=x,u.exports.createCounter=_,u.exports.createFingerprint=I,u.exports.isCuid=B})),N=R(((t,u)=>{var{createId:c,init:k,getConstants:g,isCuid:H}=rt();u.exports.createId=c,u.exports.init=k,u.exports.getConstants=g,u.exports.isCuid=H}));function V(t){return new URL(t,document.baseURI)}function z(t){let u=new URL(window.location.href);t(u.searchParams),window.history.replaceState({},"",u.toString())}function nt(t,u){if(typeof window>"u")return!1;let c=new URLSearchParams(window.location.search);return u===void 0?c.has(t):c.get(t)===u}function ot(){return V(`?file=${`__new__${K()}`}`).toString()}var et=/^(https?:\/\/\S+)$/;function it(t){return typeof t=="string"&&et.test(t)}function st({href:t,queryParams:u,keys:c}){let k=typeof u=="string"?new URLSearchParams(u):u;if(k.size===0||t.startsWith("http://")||t.startsWith("https://"))return t;let g=t.startsWith("#"),H=g&&t.includes("?");if(g&&!H){let B=c?[...k.entries()].filter(([y])=>c.includes(y)):[...k.entries()],h=new URLSearchParams;for(let[y,p]of B)h.set(y,p);let w=h.toString();return w?`/?${w}${t}`:t}let x=t,A="",E=new URLSearchParams,P=g?1:0,I=t.indexOf("#",P);I!==-1&&(A=t.slice(I),x=t.slice(0,I));let _=x.indexOf("?");_!==-1&&(E=new URLSearchParams(x.slice(_+1)),x=x.slice(0,_));let C=new URLSearchParams(E),F=c?[...k.entries()].filter(([B])=>c.includes(B)):[...k.entries()];for(let[B,h]of F)C.set(B,h);let O=C.toString();return O?`${x}?${O}${A}`:t}var at=(0,N().init)({length:6});function K(){return`s_${at()}`}function q(t){return t?/^s_[\da-z]{6}$/.test(t):!1}var ut=(()=>{let t=new URL(window.location.href).searchParams.get(j.sessionId);return q(t)?(z(u=>{u.has(j.kiosk)||u.delete(j.sessionId)}),D.debug("Connecting to existing session",{sessionId:t}),t):(D.debug("Starting a new session",{sessionId:t}),K())})();function ft(){return ut}export{it as a,V as c,nt as i,N as l,q as n,ot as o,st as r,z as s,ft as t};
