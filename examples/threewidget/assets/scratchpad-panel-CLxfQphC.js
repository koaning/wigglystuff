import{s as lt}from"./chunk-LvLJmgfZ.js";import{c as St,d as ct,l as Ct,s as zt}from"./jotai-D74Ef_p1.js";import{t as Ot}from"./react-XTZdWHwa.js";import{Hr as f,N as At,Nr as It,St as Lt,Vr as Et,w as Ht,__tla as Mt}from"./cells-DoKM12vd.js";import"./react-dom-BZDtXk6t.js";import"./zod-BBqism5D.js";import{t as nt}from"./compiler-runtime-QczY1yfQ.js";import"./_Uint8Array-BGESiCQL.js";import"./isSymbol-BGkTcW3U.js";import"./toString-DlRqgfqz.js";import"./toNumber-GB_lFVaq.js";import"./toInteger-Cl1doThW.js";import"./isArrayLikeObject-BkJc8lDE.js";import"./_getTag-BWqNuuwU.js";import"./_baseIsEqual-C8v2yRqO.js";import"./merge-5YNOh9ZD.js";import"./_baseSlice-BoaxdS7L.js";import"./useLifecycle-8fgb5Nue.js";import"./_hasUnicode-CNlKPr15.js";import"./capitalize-L9-XHPtm.js";import"./_arrayReduce-DdxhySYh.js";import"./type-kFt-n-jZ.js";import"./_baseProperty-D0ckTA0L.js";import"./now-CAWn5i9V.js";import"./debounce-Bgq-wc7M.js";import"./tooltip-CSAGVmjx.js";import"./range-Bbli-TEL.js";import"./client-DDEDbGlo.js";import{d as dt}from"./hotkeys-Dh4gy4JD.js";import"./invariant-Amh6wt4N.js";import{v as Pt}from"./utils-x9KlwLm7.js";import{t as Rt}from"./constants-BmIIVBf_.js";import"./config-CbG7e0K6.js";import"./api-CoLss8_O.js";import"./globals-oV9pRUSB.js";import"./ErrorBoundary-6EjkHrSV.js";import"./useEventListener-4mpeqPxW.js";import{t as Vt}from"./jsx-runtime-DUsrKwmN.js";import{t as W}from"./button-D8mnDDLX.js";import"./clsx-FpJB9huX.js";import{t as qt}from"./cn-Cs2e4A8T.js";import"./dist-C3a_7WFa.js";import"./dist-BzfTz_Dx.js";import{t as Dt}from"./Output-DxdWGPFi.js";import"./once-BxRirs3K.js";import"./capabilities-Bdlrhekp.js";import"./cjs-Ba5CQnxe.js";import"./createReducer-VgoBNe3M.js";import{r as Ft}from"./requests-THIDPq-F.js";import"./dist-0z0sEYV-.js";import"./dist-BzDb7E9f.js";import{t as ht}from"./createLucideIcon-BJ2I6csQ.js";import{__tla as Gt}from"./layout-D1r2uzeH.js";import"./add-cell-with-ai-85tnyxYo.js";import{n as Ut,t as Bt,__tla as Jt}from"./LazyAnyLanguageCodeMirror-C7KtNlRp.js";import"./ai-model-dropdown-CO52rzQt.js";import"./table-kHJ0xpFt.js";import"./check-CWbw3kKW.js";import"./select-CgZgQ5hV.js";import"./chevron-right-B_qBg_RU.js";import"./download-CCvBQ7qL.js";import"./maps-D4abje2p.js";import"./circle-check-CnXWPDK7.js";import"./toDate-Y5T6FHPx.js";import"./dropdown-menu-Ciqx4yT-.js";import"./code-xml-DdSOsi73.js";import"./copy-DhmkXAPp.js";import"./ellipsis-CTI4YSrp.js";import"./eye-off-BUwXWtH0.js";import"./file-video-camera-BGBfFNDn.js";import"./types-BMriRmf-.js";import{t as Kt,__tla as Qt}from"./cell-editor-CNIw28Dr.js";import"./file-text-O5IflCIn.js";import"./file-CqXxt3_J.js";import"./image-pHMJgfaR.js";import"./DeferredRequestRegistry-DfLQSvoS.js";import{t as Wt}from"./spinner-DpaQpaiI.js";import"./readonly-python-code-CkaJ4Tks.js";import"./MarimoErrorOutput-Bh7Bgl2Z.js";import{r as Xt}from"./name-cell-input-C6ZYU6mN.js";import"./plus-CiGrWbgb.js";import"./save-CdEr1MvH.js";import"./input-CVoLDDk-.js";import{t as Yt}from"./ConsoleOutput-D8ETq-cc.js";import"./state-i7G4J1VS.js";import"./trash-Df8Wb7xS.js";import"./badge-Cm0WUI-_.js";import"./preload-helper-g1IWzEZ-.js";import"./dist-DsSBESho.js";import"./dist-_bGPtAsk.js";import"./dist-DmruaXMM.js";import"./dist-DU0YrNRK.js";import"./dist-B2TjmP7E.js";import"./stex-C4ZxI0N3.js";import"./Deferred-9HYzcD3r.js";import"./uuid-B8w6pjWV.js";import"./use-toast-DKTyV2AR.js";import"./main-CC_mbgxK.js";import"./useNonce-D8CLFIrY.js";import"./connection-B11rCPnY.js";import{n as Zt}from"./useTheme-DpA-8Qyy.js";import"./Combination-D2HqSOvH.js";import"./dist-Dj-O1Spr.js";import{t as X}from"./tooltip-DqNvr2Rw.js";import"./menu-items-B57SjdWM.js";import"./en-US-Lc4gASCJ.js";import"./isValid-Cd_L_2Pm.js";import"./mode-DKDAYLK9.js";import"./alert-dialog-D9SwG8oA.js";import"./dialog-BPIq0Dmw.js";import"./usePress-DHxqjtDm.js";import"./SSRProvider-DlZbKHsu.js";import"./useDateFormatter-BMdQ9MI_.js";import"./context-CO64Gasq.js";import"./useNumberFormatter-B5HAJDUq.js";import"./shim-D-ElLTBO.js";import"./useHotkey-B0ylhc2m.js";import"./numbers-BigybruE.js";import{n as Y}from"./useEvent-l9BzRqpK.js";import"./useDebounce-C9S6xmGh.js";import"./ImperativeModal-ameyIrhc.js";import"./error-banner-C9tkg1MX.js";import"./vega-loader.browser-DZ31-605.js";import"./precisionRound-CQhbsDNz.js";import"./defaultLocale-8c1ixjJ_.js";import"./defaultLocale-BECdiY5x.js";import"./copy-BS3uwoaq.js";import"./copy-icon-Lyk2_Z8G.js";import"./RenderHTML-Dlz0Ew2i.js";import"./purify.es-hXMlfS4W.js";import"./useRunCells-DT1En-Te.js";import"./multi-map-D3NvLiI9.js";import"./emotion-is-prop-valid.esm-c4A1huxA.js";import"./extends-C2lJEiP_.js";import"./prop-types-WJwGTMoZ.js";import"./objectWithoutPropertiesLoose-DDabolgJ.js";import"./alert-D5BMn3Et.js";import"./useAsyncData-_-DLduEH.js";import"./kbd-EdFdwHEs.js";import{a as $t}from"./renderShortcut-CLenKJO6.js";import"./dist-D1pae9A2.js";import"./label-4Nancvon.js";import"./popover-DZBXSGEz.js";import"./cell-link-BiAu_8pk.js";import"./dist-CqHWOZu2.js";import"./dist-BcLYYUSi.js";import"./dist-BVXr6b5T.js";import"./dist-BrEX5EQl.js";import"./dist-CalRK9ms.js";import"./dist-Cc4T7UUX.js";import"./dist-D3MC5WiF.js";import"./dist-DgaCIZAa.js";import"./dist-rqHtY98i.js";import"./dist-w7c0BKrD.js";import"./dist-CCZcRJI9.js";import"./dist-CrDb6akR.js";import"./apl-BQt6lLuE.js";import"./asciiarmor-BjX7bs0j.js";import"./asn1-xn1MtyoW.js";import"./brainfuck-BjO-UY1i.js";import"./cobol-CyWIev3Y.js";import"./clike-DW9tQWfF.js";import"./clojure-BSW96HRx.js";import"./css-D7fWzevp.js";import"./cmake-C7UlMfz3.js";import"./coffeescript-DTvziYTK.js";import"./commonlisp-yMdkdGMi.js";import"./cypher-Cr1dl0Qf.js";import"./python-BuKrulde.js";import"./crystal-BGnoSp3z.js";import"./d-C2bS5bA6.js";import"./diff-B2mHQyn6.js";import"./dtd-Cy-lUE7p.js";import"./dylan-mm60grwk.js";import"./ecl-Cqi05Wy1.js";import"./eiffel-FkvfLQq7.js";import"./elm-Da5txHw0.js";import"./erlang-CdnCEH5x.js";import"./simple-mode-B185hCuE.js";import"./factor-CamlR8EJ.js";import"./forth-UcMX0m31.js";import"./fortran-DZ_vNVsP.js";import"./mllike-xVJsauJ8.js";import"./gas-CM88o6Zj.js";import"./gherkin-BhrpTeN9.js";import"./groovy-BFju68Wx.js";import"./haskell-CrWHY4et.js";import"./haxe-1eKW-tbO.js";import"./idl-Do4AwvU2.js";import"./javascript-CTXZKRYd.js";import"./esm-DnNh7vdQ.js";import"./julia-BRynwHI4.js";import"./livescript-ZmIBNA-I.js";import"./lua-mUfZ-MRC.js";import"./mirc-auEWieOB.js";import"./mathematica-Dil5dTHO.js";import"./modelica-B8kajVDm.js";import"./mumps-CMw16b5q.js";import"./mbox-Dnkn9wSr.js";import"./nsis-DwPdi8sw.js";import"./ntriples-O5lQxirn.js";import"./octave-CMfAar-E.js";import"./oz-CLRI9Qww.js";import"./pascal-D2M_3HBx.js";import"./perl-B8lV7aKt.js";import"./pig-Bima2bfE.js";import"./powershell-v_t41ydu.js";import"./properties-ChrStSby.js";import"./protobuf-Bin6kmlf.js";import"./pug-UWVdYLYW.js";import"./puppet-DYrtWvYn.js";import"./q-CrXUTiVN.js";import"./r-Bk2Tiso2.js";import"./rpm-CmmZphz3.js";import"./ruby-ElyOTVeQ.js";import"./sas-jE3ZlG0K.js";import"./scheme-CZF1tRbv.js";import"./shell-LqT3ZqMa.js";import"./sieve-y15yT7Pp.js";import"./smalltalk-pk5PvsMs.js";import"./sparql-DTZ_gfPQ.js";import"./stylus-CrGj0eNT.js";import"./swift-tt3PlBbI.js";import"./verilog-BWdtOJH8.js";import"./tcl-1P4b0GMJ.js";import"./textile-BHDIuMYh.js";import"./toml-C8qoqk_i.js";import"./troff-DMiF5Zmz.js";import"./ttcn-BAUp3RZn.js";import"./ttcn-cfg-qLZtNU-E.js";import"./turtle-BizIwmKv.js";import"./webidl-DDEKCqSy.js";import"./vb-Bn_uCxNL.js";import"./vbscript-BTKW8Atx.js";import"./velocity-CcB05fpi.js";import"./vhdl-CzFOaOHx.js";import"./xquery-BcF6ZhQP.js";import"./yacas-BARQAiXa.js";import"./z80-DO_Ep0iT.js";import"./mscgen-Bsnta1jn.js";import"./dist-tj-jaP-y.js";import"./esm-Crqxhl3F.js";import"./links-Iv0WhyKW.js";import"./useIframeCapabilities-r0LQMxAQ.js";import{__tla as Tt}from"./lazy-Cbg8zRvU.js";import"./tabs-BjAbB8w_.js";import{o as tr}from"./focus-CyxSol0W.js";import"./formats-C3exma5i.js";import{__tla as rr}from"./chunk-T7OEMACY-CdGEwedE.js";import"./katex-BmfUoCWW.js";import"./marked.esm-idL59iHw.js";import"./dist-DL3W3q-2.js";import"./add-missing-import-DV1FOw9w.js";import"./table-CesNYRF-.js";import"./blob-LiDbeYko.js";import"./useDeleteCell-BDBSmjLV.js";import"./icons-BgmgMjOV.js";import"./useAddCell-DYfGo4T8.js";import"./switch-Ct8mUApv.js";import"./floating-outline-DmCT2Mvg.js";import"./dist-BFEiMwlb.js";import"./TinyCode-JBJVbMa1.js";import"./useSplitCell-wt-T-D4e.js";import"./Inputs-BO2OWWt5.js";import"./constants-BHucZ-1O.js";import{__tla as or}from"./loro_wasm_bg-CTr3_1Qc.js";import"./ws-DMpROw4m.js";import"./useInterval-DwG7yiQ-.js";import{t as ir}from"./kiosk-mode-Bbz5NAh7.js";let ft,mr=Promise.all([(()=>{try{return Mt}catch{}})(),(()=>{try{return Gt}catch{}})(),(()=>{try{return Jt}catch{}})(),(()=>{try{return Qt}catch{}})(),(()=>{try{return Tt}catch{}})(),(()=>{try{return rr}catch{}})(),(()=>{try{return or}catch{}})()]).then(async()=>{var ut=ht("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),_t=ht("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),xt=nt(),Z=lt(Ot(),1),vt=15;const $=It("marimo:scratchpadHistory:v1",[],Lt),gt=ct(!1),jt=ct(null,(t,m,e)=>{if(e=e.trim(),!e)return;let a=t($);m($,[e,...a.filter(u=>u!==e)].slice(0,vt))});var r=lt(Vt(),1),bt={hide_code:!1,disabled:!1};const yt=()=>{var st;let t=(0,xt.c)(84),m=At(),[e]=Pt(),{theme:a}=Zt(),u=(0,Z.useRef)(null),T=tr(),{createNewCell:tt,updateCellCode:_}=Ht(),{sendRunScratchpad:x}=Ft(),p=m.cellRuntime[f],rt=p==null?void 0:p.output,v=p==null?void 0:p.status,ot=p==null?void 0:p.consoleOutputs,i=((st=m.cellData.__scratch__)==null?void 0:st.code)??"",it=Ct(jt),[o,s]=zt(gt),g=St($),P;t[0]!==it||t[1]!==i||t[2]!==x?(P=()=>{x({code:i}),it(i)},t[0]=it,t[1]=i,t[2]=x,t[3]=P):P=t[3];let j=Y(P),R;t[4]!==i||t[5]!==tt||t[6]!==T?(R=()=>{i.trim()&&tt({code:i,before:!1,cellId:T??"__end__"})},t[4]=i,t[5]=tt,t[6]=T,t[7]=R):R=t[7];let E=Y(R),V;t[8]!==x||t[9]!==_?(V=()=>{_({cellId:f,code:"",formattingChange:!1}),x({code:""});let d=u.current;d&&d.dispatch({changes:{from:0,to:d.state.doc.length,insert:""}})},t[8]=x,t[9]=_,t[10]=V):V=t[10];let H=Y(V),q;t[11]!==s||t[12]!==_?(q=d=>{s(!1),_({cellId:f,code:d,formattingChange:!1});let h=u.current;h&&h.dispatch({changes:{from:0,to:h.state.doc.length,insert:d}})},t[11]=s,t[12]=_,t[13]=q):q=t[13];let M=Y(q),[mt,wt]=(0,Z.useState)(),b,y,w,N,l,c,n;if(t[14]!==i||t[15]!==ot||t[16]!==H||t[17]!==E||t[18]!==j||t[19]!==M||t[20]!==g||t[21]!==o||t[22]!==mt||t[23]!==rt||t[24]!==s||t[25]!==v||t[26]!==a||t[27]!==e){let d=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-auto shrink-0 max-h-[40%]",children:(0,r.jsx)(Kt,{theme:a,showPlaceholder:!1,id:f,code:i,config:bt,status:"idle",serializedEditorState:null,runCell:j,userConfig:e,editorViewRef:u,setEditorView:Q=>{u.current=Q},hidden:!1,showHiddenCode:dt.NOOP,languageAdapter:mt,setLanguageAdapter:wt})}),(0,r.jsx)("div",{className:"flex-1 overflow-auto shrink-0",children:(0,r.jsx)(Dt,{allowExpand:!1,output:rt,className:Rt.outputArea,cellId:f,stale:!1,loading:!1})}),(0,r.jsx)("div",{className:"overflow-auto shrink-0 max-h-[35%]",children:(0,r.jsx)(Yt,{consoleOutputs:ot,className:"overflow-auto",stale:!1,cellName:"_",onSubmitDebugger:dt.NOOP,cellId:f,debuggerActive:!1})})]}),h;t[35]!==M||t[36]!==g||t[37]!==o||t[38]!==a?(h=()=>o?(0,r.jsx)("div",{className:"absolute inset-0 z-100 bg-background p-3 border-none overflow-auto",children:(0,r.jsx)("div",{className:"overflow-auto flex flex-col gap-3",children:g.map((Q,kt)=>(0,r.jsx)("div",{className:"border rounded-md hover:shadow-sm cursor-pointer hover:border-input overflow-hidden",onClick:()=>M(Q),children:(0,r.jsx)(Z.Suspense,{children:(0,r.jsx)(Bt,{language:"python",theme:a,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1},value:Q.trim(),editable:!1,readOnly:!0})})},kt))})}):null,t[35]=M,t[36]=g,t[37]=o,t[38]=a,t[39]=h):h=t[39];let Nt=h;N="flex flex-col h-full overflow-hidden divide-y",t[40]===Symbol.for("react.memo_cache_sentinel")?(l=Et.create(f),c=(0,r.jsx)("p",{className:"p-2 text-muted-foreground text-sm",children:"Use this scratchpad cell to experiment with code without restrictions on variable names. Scratchpad code is ephemeral: variables defined in the scratchpad aren't saved to notebook memory, and the code is not saved in the notebook file."}),t[40]=l,t[41]=c):(l=t[40],c=t[41]);let F;t[42]===Symbol.for("react.memo_cache_sentinel")?(F=$t("cell.run"),t[42]=F):F=t[42];let G;t[43]===Symbol.for("react.memo_cache_sentinel")?(G=(0,r.jsx)(Xt,{color:"var(--grass-11)",size:16}),t[43]=G):G=t[43];let S;t[44]!==j||t[45]!==o?(S=(0,r.jsx)(X,{content:F,children:(0,r.jsx)(W,{"data-testid":"scratchpad-run-button",onClick:j,disabled:o,variant:"text",size:"xs",children:G})}),t[44]=j,t[45]=o,t[46]=S):S=t[46];let U;t[47]===Symbol.for("react.memo_cache_sentinel")?(U=(0,r.jsx)(ut,{size:16}),t[47]=U):U=t[47];let C;t[48]!==H||t[49]!==o?(C=(0,r.jsx)(X,{content:"Clear code and outputs",children:(0,r.jsx)(W,{disabled:o,size:"xs",variant:"text",onClick:H,children:U})}),t[48]=H,t[49]=o,t[50]=C):C=t[50];let B;t[51]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.jsx)(Ut,{size:16}),t[51]=B):B=t[51];let z;t[52]!==E||t[53]!==o?(z=(0,r.jsx)(ir,{children:(0,r.jsx)(X,{content:"Insert code",children:(0,r.jsx)(W,{disabled:o,size:"xs",variant:"text",onClick:E,children:B})})}),t[52]=E,t[53]=o,t[54]=z):z=t[54];let O;t[55]===v?O=t[56]:(O=(v==="running"||v==="queued")&&(0,r.jsx)(Wt,{className:"inline",size:"small"}),t[55]=v,t[56]=O);let J;t[57]===Symbol.for("react.memo_cache_sentinel")?(J=(0,r.jsx)("div",{className:"flex-1"}),t[57]=J):J=t[57];let et=o&&"bg-(--sky-3) rounded-none",A;t[58]===et?A=t[59]:(A=qt(et),t[58]=et,t[59]=A);let I;t[60]!==o||t[61]!==s?(I=()=>s(!o),t[60]=o,t[61]=s,t[62]=I):I=t[62];let pt=g.length===0,K;t[63]===Symbol.for("react.memo_cache_sentinel")?(K=(0,r.jsx)(_t,{size:16}),t[63]=K):K=t[63];let L;t[64]!==A||t[65]!==I||t[66]!==pt?(L=(0,r.jsx)(X,{content:"Toggle history",children:(0,r.jsx)(W,{size:"xs",variant:"text",className:A,onClick:I,disabled:pt,children:K})}),t[64]=A,t[65]=I,t[66]=pt,t[67]=L):L=t[67],t[68]!==S||t[69]!==C||t[70]!==z||t[71]!==O||t[72]!==L?(n=(0,r.jsxs)("div",{className:"flex items-center shrink-0",children:[S,C,z,O,J,L]}),t[68]=S,t[69]=C,t[70]=z,t[71]=O,t[72]=L,t[73]=n):n=t[73],y="flex-1 divide-y relative overflow-hidden flex flex-col",w=d(),b=Nt(),t[14]=i,t[15]=ot,t[16]=H,t[17]=E,t[18]=j,t[19]=M,t[20]=g,t[21]=o,t[22]=mt,t[23]=rt,t[24]=s,t[25]=v,t[26]=a,t[27]=e,t[28]=b,t[29]=y,t[30]=w,t[31]=N,t[32]=l,t[33]=c,t[34]=n}else b=t[28],y=t[29],w=t[30],N=t[31],l=t[32],c=t[33],n=t[34];let k;t[74]!==b||t[75]!==y||t[76]!==w?(k=(0,r.jsxs)("div",{className:y,children:[w,b]}),t[74]=b,t[75]=y,t[76]=w,t[77]=k):k=t[77];let D;return t[78]!==k||t[79]!==N||t[80]!==l||t[81]!==c||t[82]!==n?(D=(0,r.jsxs)("div",{className:N,id:l,children:[c,n,k]}),t[78]=k,t[79]=N,t[80]=l,t[81]=c,t[82]=n,t[83]=D):D=t[83],D};let at;at=nt(),ft=()=>{let t=(0,at.c)(1),m;return t[0]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.jsx)(yt,{}),t[0]=m):m=t[0],m}});export{mr as __tla,ft as default};
