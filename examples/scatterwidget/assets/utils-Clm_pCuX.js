import{c as B,d as r,l as w,n as x,s as z}from"./jotai-D74Ef_p1.js";import{A as l,B as C,I as D,J as I,N as f,P as _,R as t,T as n,U as J,b as o,w as c}from"./zod-BBqism5D.js";import{t as N}from"./compiler-runtime-QczY1yfQ.js";import{t as R}from"./merge-DVX6Ez37.js";import{l as S,n as U,u as m}from"./hotkeys-sK-kaEBC.js";import{t as F}from"./invariant-EWlZS5z8.js";const j=["pip","uv","rye","poetry","pixi"];var M=["normal","compact","medium","full","columns"],$=["auto","native","polars","lazy-polars","pandas"];const G="openai/gpt-4o";var q=["html","markdown","ipynb"];const H=["manual","ask","agent"];var p=_({api_key:t().optional(),base_url:t().optional(),project:t().optional()}).loose(),K=_({chat_model:t().nullish(),edit_model:t().nullish(),autocomplete_model:t().nullish(),displayed_models:c(t()).default([]),custom_models:c(t()).default([])});const h=l({completion:_({activate_on_typing:n().prefault(!0),copilot:C([n(),o(["github","codeium","custom"])]).prefault(!1).transform(a=>a===!0?"github":a),codeium_api_key:t().nullish()}).prefault({}),save:l({autosave:o(["off","after_delay"]).prefault("after_delay"),autosave_delay:f().nonnegative().transform(a=>Math.max(a,1e3)).prefault(1e3),format_on_save:n().prefault(!1)}).prefault({}),formatting:l({line_length:f().nonnegative().prefault(79).transform(a=>Math.min(a,1e3))}).prefault({}),keymap:l({preset:o(["default","vim"]).prefault("default"),overrides:D(t(),t()).prefault({}),destructive_delete:n().prefault(!0)}).prefault({}),runtime:l({auto_instantiate:n().prefault(!0),on_cell_change:o(["lazy","autorun"]).prefault("autorun"),auto_reload:o(["off","lazy","autorun"]).prefault("off"),reactive_tests:n().prefault(!0),watcher_on_save:o(["lazy","autorun"]).prefault("lazy"),default_sql_output:o($).prefault("auto"),default_auto_download:c(o(q)).prefault([])}).prefault({}),display:l({theme:o(["light","dark","system"]).prefault("light"),code_editor_font_size:f().nonnegative().prefault(14),cell_output:o(["above","below"]).prefault("above"),dataframes:o(["rich","plain"]).prefault("rich"),default_table_page_size:f().prefault(10),default_table_max_columns:f().prefault(50),default_width:o(M).prefault("medium").transform(a=>a==="normal"?"compact":a),locale:t().nullable().optional(),reference_highlighting:n().prefault(!1)}).prefault({}),package_management:l({manager:o(j).prefault("pip")}).prefault({}),ai:l({rules:t().prefault(""),mode:o(H).prefault("manual"),inline_tooltip:n().prefault(!1),open_ai:p.optional(),anthropic:p.optional(),google:p.optional(),ollama:p.optional(),openrouter:p.optional(),wandb:p.optional(),open_ai_compatible:p.optional(),azure:p.optional(),bedrock:l({region_name:t().optional(),profile_name:t().optional(),aws_access_key_id:t().optional(),aws_secret_access_key:t().optional()}).optional(),models:K.prefault({displayed_models:[],custom_models:[]})}).prefault({}),experimental:l({markdown:n().optional(),rtc:n().optional()}).prefault(()=>({})),server:l({}).prefault(()=>({})),diagnostics:l({enabled:n().optional(),sql_linter:n().optional()}).prefault(()=>({})),sharing:l({html:n().optional(),wasm:n().optional()}).optional(),mcp:l({presets:c(o(["marimo","context7"])).optional()}).optional().prefault({})}).partial().prefault(()=>({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},diagnostics:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})),O=t(),L=o($).prefault("auto"),v=_({width:o(M).prefault("medium").transform(a=>a==="normal"?"compact":a),app_title:O.nullish(),css_file:t().nullish(),html_head_file:t().nullish(),auto_download:c(o(q)).prefault([]),sql_output:L}).prefault(()=>({width:"medium",auto_download:[],sql_output:"auto"}));function E(a){try{return v.parse(a)}catch(e){return m.error(`Marimo got an unexpected value in the configuration file: ${e}`),v.parse({})}}function Q(a){try{let e=h.parse(a);for(let[u,s]of Object.entries(e.experimental??{}))s===!0&&m.log(`\u{1F9EA} Experimental feature "${u}" is enabled.`);return e}catch(e){return e instanceof J?m.error(`Marimo got an unexpected value in the configuration file: ${I(e)}`):m.error(`Marimo got an unexpected value in the configuration file: ${e}`),P()}}function V(a){try{let e=a;return F(typeof e=="object","internal-error: marimo-config-overrides is not an object"),Object.keys(e).length>0&&m.log("\u{1F527} Project configuration overrides:",e),e}catch(e){return m.error(`Marimo got an unexpected configuration overrides: ${e}`),{}}}function P(){return h.parse({completion:{},save:{},formatting:{},keymap:{},runtime:{},display:{},diagnostics:{},experimental:{},server:{},ai:{},package_management:{},mcp:{}})}var W=N();const g=r(P()),T=r({}),i=r(a=>{let e=a(T);return R({},a(g),e)}),X=r(a=>a(i).runtime.auto_instantiate),Y=r(a=>a(i).keymap.overrides??{}),Z=r(S()),aa=r(a=>new U(a(Y),{platform:a(Z)})),ea=r(a=>a(i).save),ta=r(a=>a(i).ai),oa=r(a=>a(i).completion),ra=r(a=>a(i).keymap.preset);function la(){return z(g)}function na(){let a=(0,W.c)(3),e=B(i),u=w(g),s;return a[0]!==e||a[1]!==u?(s=[e,u],a[0]=e,a[1]=u,a[2]=s):s=a[2],s}function ia(){return x.get(i)}const sa=r(a=>A(a(i)));r(a=>a(i).display.code_editor_font_size);const ua=r(a=>a(i).display.locale);function A(a){var e,u,s,y,b,k;return!!((u=(e=a.ai)==null?void 0:e.models)!=null&&u.chat_model)||!!((y=(s=a.ai)==null?void 0:s.models)!=null&&y.edit_model)||!!((k=(b=a.ai)==null?void 0:b.models)!=null&&k.autocomplete_model)}const d=r(E({}));function pa(){return z(d)}function ma(){return w(d)}function fa(){return x.get(d)}const ca=r(a=>a(d).width);function da(){return!1}export{O as C,E as D,h as E,V as O,v as S,j as T,pa as _,ca as a,la as b,oa as c,ia as d,aa as f,i as g,ua as h,d as i,Q as k,T as l,ra as m,ta as n,X as o,A as p,sa as r,ea as s,da as t,fa as u,na as v,G as w,g as x,ma as y};
