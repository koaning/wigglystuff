import{s as z}from"./chunk-LvLJmgfZ.js";import"./jotai-D74Ef_p1.js";import{t as P}from"./react-XTZdWHwa.js";import{w as W}from"./cells-B1ds6ZjK.js";import"./react-dom-BZDtXk6t.js";import"./zod-BBqism5D.js";import{t as I}from"./compiler-runtime-QczY1yfQ.js";import"./_Uint8Array-BGESiCQL.js";import"./isSymbol-BGkTcW3U.js";import"./toString-DlRqgfqz.js";import"./toNumber-GB_lFVaq.js";import"./toInteger-Cl1doThW.js";import"./isArrayLikeObject-BkJc8lDE.js";import"./_getTag-BWqNuuwU.js";import"./_baseIsEqual-C8v2yRqO.js";import"./merge-DVX6Ez37.js";import"./_baseSlice-CskhCEVH.js";import"./useLifecycle-bYJVBwo9.js";import"./_hasUnicode-BC4vb_bF.js";import"./_arrayReduce-BPS6ICyD.js";import"./type-Bx7IFbhF.js";import"./_baseProperty-Bl8lQyHQ.js";import"./now-DBnXnRPe.js";import"./debounce-BzCP2SOK.js";import"./hotkeys-sK-kaEBC.js";import"./invariant-EWlZS5z8.js";import"./utils-Clm_pCuX.js";import{t as H}from"./constants-Bt6NlroV.js";import"./config-BwUC_LRl.js";import"./useEventListener-BMXqdHZ5.js";import{t as M}from"./jsx-runtime-B4_2-8Ho.js";import{i as G,t as S}from"./button-BtVgadIf.js";import"./clsx-CGw3WJH5.js";import{t as J}from"./cn-f3ruLt4G.js";import{at as $}from"./dist-hQAzR0Cy.js";import"./dist-BWV-5FQQ.js";import"./once-DF3Ybce_.js";import"./capabilities-DPEuN0Kv.js";import"./cjs-VdEqhsWH.js";import"./createReducer-uDMmKGBt.js";import{r as A}from"./requests-CMMs4cl8.js";import"./dist-a5AhnPua.js";import"./dist-AYL4p4Dn.js";import"./createLucideIcon-C9QGcv--.js";import{n as D,t as F}from"./LazyAnyLanguageCodeMirror-49uxEXHt.js";import"./check-Pczj-rmu.js";import{h as B}from"./select-Dre1F6mo.js";import"./toDate-J43JkZRd.js";import"./copy-CGmj_xHa.js";import"./DeferredRequestRegistry-DUZWfqOX.js";import{t as K}from"./spinner-cyqSIlb0.js";import{t as L}from"./plus-CcDW_rEW.js";import{r as R}from"./input-fjIzfaON.js";import"./badge-DjEl44tW.js";import"./preload-helper-WDmkW-6F.js";import"./dist-BFZNB01C.js";import"./dist-DjRxw7g7.js";import"./dist-BRKC9vDH.js";import"./dist-C2lGLtUJ.js";import"./dist-CiIxDFsH.js";import"./stex-BQjjdb1n.js";import"./Deferred-cELqHKYi.js";import"./uuid-DFgsIVBI.js";import{t as U}from"./use-toast-CTk3v2Fk.js";import"./main-B1nOh376.js";import"./useNonce-BPtPhVM4.js";import"./connection-DZfQ0nfK.js";import{n as O}from"./useTheme-DNzypnwR.js";import"./Combination-DIF6wDxT.js";import"./dist-DTKIwXcy.js";import{t as V}from"./tooltip-DEUNsdbK.js";import"./menu-items-QU91GQzu.js";import"./mode-DQrmKtLw.js";import"./alert-dialog-CYJZg0vV.js";import{a as Q,c as X,i as Y,n as Z,r as ee}from"./dialog-C-S4uQH4.js";import"./usePress-CuSksPzr.js";import"./SSRProvider-DrIPqn2D.js";import"./context-C5uPODSj.js";import"./useNumberFormatter-C1aNc7b4.js";import"./numbers-BWXaNlZC.js";import"./useEvent-bc5jSpSz.js";import"./useDebounce-Dz48GAub.js";import{n as te}from"./ImperativeModal-DD50EU1G.js";import{n as re}from"./error-banner-BVpxvuDQ.js";import"./copy-CL0ql7QN.js";import"./copy-icon-DyWZDAiU.js";import{t as oe}from"./RenderHTML-JtHAHXUk.js";import"./purify.es-B1k9qoU6.js";import"./useRunCells-D8WfVv85.js";import{n as ie}from"./useAsyncData-CWTnKpYp.js";import"./dist-CSuUnJvL.js";import{d as se,f as le,g as me,l as ae,o as ne,s as pe}from"./focus-BwsN5YFR.js";import{r as ce}from"./textarea-BOYy-qvB.js";import{t as de}from"./empty-state-Q1kmIC8W.js";import{t as q}from"./kiosk-mode-BJ_ZGDx5.js";var E=I(),w=z(P(),1),r=z(M(),1);const he=t=>{let e=(0,E.c)(6),{children:o}=t,{openModal:l,closeModal:m}=te(),s;e[0]!==m||e[1]!==l?(s=()=>l((0,r.jsx)(xe,{onClose:m})),e[0]=m,e[1]=l,e[2]=s):s=e[2];let i;return e[3]!==o||e[4]!==s?(i=(0,r.jsx)(G,{onClick:s,children:o}),e[3]=o,e[4]=s,e[5]=i):i=e[5],i};var fe=[$.lineWrapping],xe=t=>{let e=(0,E.c)(23),{onClose:o}=t,[l,m]=(0,w.useState)(""),{theme:s}=O(),i;e[0]===o?i=e[1]:(i=async n=>{n.preventDefault();let g=new FormData(n.target),C=g.get("title"),_=g.get("description"),N=g.get("code");fetch("https://marimo.io/api/suggest-snippet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:C,description:_,code:N})}),o(),U({title:"Snippet Submitted",description:"Thank you for contributing! We will review your snippet shortly."})},e[0]=o,e[1]=i);let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(X,{children:"Contribute a Snippet"}),e[2]=p):p=e[2];let y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsxs)(Q,{children:[p,(0,r.jsxs)(ee,{children:["Have a useful snippet you want to share with the community? Submit it here or make a pull request"," ",(0,r.jsx)("a",{href:H.githubPage,target:"_blank",className:"underline",children:"on GitHub"}),"."]})]}),e[3]=y):y=e[3];let b,u;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=(0,r.jsx)(R,{id:"title",name:"title",autoFocus:!0,placeholder:"Title",required:!0,autoComplete:"off"}),u=(0,r.jsx)(ce,{id:"description",name:"description",autoFocus:!0,placeholder:"Description",rows:5,required:!0,autoComplete:"off"}),e[4]=b,e[5]=u):(b=e[4],u=e[5]);let c;e[6]===l?c=e[7]:(c=(0,r.jsx)("input",{type:"hidden",name:"code",value:l}),e[6]=l,e[7]=c);let v=s==="dark"?"dark":"light",d;e[8]!==l||e[9]!==v?(d=(0,r.jsx)(F,{theme:v,language:"python",className:"cm border rounded overflow-hidden",extensions:fe,value:l,onChange:m}),e[8]=l,e[9]=v,e[10]=d):d=e[10];let h;e[11]!==c||e[12]!==d?(h=(0,r.jsxs)("div",{className:"flex flex-col gap-6 py-4",children:[b,u,c,d]}),e[11]=c,e[12]=d,e[13]=h):h=e[13];let f;e[14]===o?f=e[15]:(f=(0,r.jsx)(S,{"data-testid":"snippet-cancel-button",variant:"secondary",onClick:o,children:"Cancel"}),e[14]=o,e[15]=f);let x;e[16]===Symbol.for("react.memo_cache_sentinel")?(x=(0,r.jsx)(S,{"data-testid":"snippet-send-button","aria-label":"Save",variant:"default",type:"submit",children:"Send"}),e[16]=x):x=e[16];let a;e[17]===f?a=e[18]:(a=(0,r.jsxs)(Y,{children:[f,x]}),e[17]=f,e[18]=a);let j;return e[19]!==i||e[20]!==a||e[21]!==h?(j=(0,r.jsx)(Z,{className:"w-fit",children:(0,r.jsxs)("form",{onSubmit:i,children:[y,h,a]})}),e[19]=i,e[20]=a,e[21]=h,e[22]=j):j=e[22],j},T=I(),ue=[$.lineWrapping],je=()=>{let t=(0,T.c)(22),{readSnippets:e}=A(),[o,l]=w.useState(),m;t[0]===e?m=t[1]:(m=()=>e(),t[0]=e,t[1]=m);let s;t[2]===Symbol.for("react.memo_cache_sentinel")?(s=[],t[2]=s):s=t[2];let{data:i,error:p,isPending:y}=ie(m,s);if(p){let n;return t[3]===p?n=t[4]:(n=(0,r.jsx)(re,{error:p}),t[3]=p,t[4]=n),n}if(y||!i){let n;return t[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)(K,{size:"medium",centered:!0}),t[5]=n):n=t[5],n}let b=o?"h-1/3":"h-full",u;t[6]===b?u=t[7]:(u=J("border-b rounded-none",b),t[6]=b,t[7]=u);let c;t[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(se,{placeholder:"Search snippets...",className:"h-6 m-1",rootClassName:"flex-1 border-r"}),t[8]=c):c=t[8];let v,d;t[9]===Symbol.for("react.memo_cache_sentinel")?(v=(0,r.jsxs)("div",{className:"flex items-center w-full",children:[c,(0,r.jsx)(he,{children:(0,r.jsx)("button",{className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:(0,r.jsx)(L,{className:"h-4 w-4"})})})]}),d=(0,r.jsx)(ae,{children:"No results"}),t[9]=v,t[10]=d):(v=t[9],d=t[10]);let h;t[11]===Symbol.for("react.memo_cache_sentinel")?(h=n=>l(n),t[11]=h):h=t[11];let f;t[12]===i.snippets?f=t[13]:(f=(0,r.jsx)(ve,{onSelect:h,snippets:i.snippets}),t[12]=i.snippets,t[13]=f);let x;t[14]!==u||t[15]!==f?(x=(0,r.jsxs)(pe,{className:u,children:[v,d,f]}),t[14]=u,t[15]=f,t[16]=x):x=t[16];let a;t[17]===o?a=t[18]:(a=(0,r.jsx)(w.Suspense,{children:(0,r.jsx)("div",{className:"h-2/3 snippet-viewer flex flex-col",children:o?(0,r.jsx)(be,{snippet:o,onClose:()=>l(void 0)},o.title):(0,r.jsx)(de,{title:"",description:"Click on a snippet to view its content."})})}),t[17]=o,t[18]=a);let j;return t[19]!==a||t[20]!==x?(j=(0,r.jsxs)("div",{className:"flex-1 overflow-hidden",children:[x,a]}),t[19]=a,t[20]=x,t[21]=j):j=t[21],j},be=t=>{let e=(0,T.c)(33),{snippet:o,onClose:l}=t,{theme:m}=O(),{createNewCell:s}=W(),i=ne(),p;e[0]!==s||e[1]!==i||e[2]!==o.sections?(p=()=>{for(let g of[...o.sections].reverse())g.code&&s({code:g.code,before:!1,cellId:i??"__end__",skipIfCodeExists:!0})},e[0]=s,e[1]=i,e[2]=o.sections,e[3]=p):p=e[3];let y=p,b;e[4]!==s||e[5]!==i?(b=g=>{s({code:g,before:!1,cellId:i??"__end__"})},e[4]=s,e[5]=i,e[6]=b):b=e[6];let u=b,c;e[7]===o.title?c=e[8]:(c=(0,r.jsx)("span",{children:o.title}),e[7]=o.title,e[8]=c);let v;e[9]===Symbol.for("react.memo_cache_sentinel")?(v=(0,r.jsx)(B,{className:"h-4 w-4"}),e[9]=v):v=e[9];let d;e[10]===l?d=e[11]:(d=(0,r.jsx)(S,{size:"sm",variant:"ghost",onClick:l,className:"h-6 w-6 p-0 hover:bg-muted-foreground/10",children:v}),e[10]=l,e[11]=d);let h;e[12]!==c||e[13]!==d?(h=(0,r.jsxs)("div",{className:"text-sm font-semibold bg-muted border-y px-2 py-1 flex justify-between items-center",children:[c,d]}),e[12]=c,e[13]=d,e[14]=h):h=e[14];let f;e[15]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)(D,{className:"ml-2 h-4 w-4"}),e[15]=f):f=e[15];let x;e[16]===y?x=e[17]:(x=(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(q,{children:(0,r.jsxs)(S,{className:"float-right",size:"xs",variant:"outline",onClick:y,children:["Insert snippet",f]})})}),e[16]=y,e[17]=x);let a;if(e[18]!==u||e[19]!==o.sections||e[20]!==o.title||e[21]!==m){let g;e[23]!==u||e[24]!==o.title||e[25]!==m?(g=C=>{let{code:_,html:N,id:k}=C;return N?(0,r.jsx)("div",{children:oe({html:N})},`${o.title}-${k}`):_?(0,r.jsxs)("div",{className:"relative hover-actions-parent pr-2",children:[(0,r.jsx)(q,{children:(0,r.jsx)(V,{content:"Insert snippet",children:(0,r.jsx)(S,{className:"absolute -top-2 -right-1 z-10 hover-action px-2 bg-background",size:"sm",variant:"outline",onClick:()=>{u(_)},children:(0,r.jsx)(D,{className:"h-5 w-5"})})})}),(0,r.jsx)(w.Suspense,{children:(0,r.jsx)(F,{theme:m==="dark"?"dark":"light",language:"python",className:"cm border rounded overflow-hidden",extensions:ue,value:_,readOnly:!0},`${o.title}-${k}`)})]},`${o.title}-${k}`):null},e[23]=u,e[24]=o.title,e[25]=m,e[26]=g):g=e[26],a=o.sections.map(g),e[18]=u,e[19]=o.sections,e[20]=o.title,e[21]=m,e[22]=a}else a=e[22];let j;e[27]!==x||e[28]!==a?(j=(0,r.jsxs)("div",{className:"px-2 py-2 space-y-4 overflow-auto flex-1",children:[x,a]}),e[27]=x,e[28]=a,e[29]=j):j=e[29];let n;return e[30]!==j||e[31]!==h?(n=(0,r.jsxs)(r.Fragment,{children:[h,j]}),e[30]=j,e[31]=h,e[32]=n):n=e[32],n},ve=t=>{let e=(0,T.c)(7),{snippets:o,onSelect:l}=t,m;if(e[0]!==l||e[1]!==o){let i;e[3]===l?i=e[4]:(i=p=>(0,r.jsx)(le,{className:"rounded-none",onSelect:()=>l(p),children:(0,r.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,r.jsx)("span",{className:"mt-1 text-accent-foreground",children:p.title})})},p.title),e[3]=l,e[4]=i),m=o.map(i),e[0]=l,e[1]=o,e[2]=m}else m=e[2];let s;return e[5]===m?s=e[6]:(s=(0,r.jsx)(me,{className:"flex flex-col overflow-auto",children:m}),e[5]=m,e[6]=s),s};export{je as default};
