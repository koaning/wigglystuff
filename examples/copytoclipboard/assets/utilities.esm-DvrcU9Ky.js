var $n=Object.defineProperty;var On=(t,e,n)=>e in t?$n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var d=(t,e,n)=>On(t,typeof e!="symbol"?e+"":e,n);var de;import{s as wt}from"./chunk-LvLJmgfZ.js";import{d as ie,n as Ge,s as Ie}from"./jotai-D74Ef_p1.js";import{t as Un}from"./react-XTZdWHwa.js";import{Er as Wn,Lr as Bn,Mr as Gn,Rr as we,b as Vn,y as Xn}from"./cells-DoKM12vd.js";import{B as Yn,C as vt,D as Jn,I as Kn,N as Qn,P as ve,R as xt,k as xe,w as St}from"./zod-BBqism5D.js";import{t as Et}from"./compiler-runtime-QczY1yfQ.js";import{t as Zn}from"./get-CyLJYAfP.js";import{r as er}from"./useLifecycle-8fgb5Nue.js";import{t as tr}from"./debounce-Bgq-wc7M.js";import{t as nr}from"./_baseSet-CKSmZC_I.js";import{f as $,u as X}from"./hotkeys-Dh4gy4JD.js";import{t as rr}from"./invariant-Amh6wt4N.js";import{x as ar}from"./utils-x9KlwLm7.js";import{_ as ir}from"./config-CbG7e0K6.js";import{t as lr}from"./api-CoLss8_O.js";import{n as Ct}from"./globals-oV9pRUSB.js";import{t as zt}from"./ErrorBoundary-6EjkHrSV.js";import{t as sr}from"./jsx-runtime-DUsrKwmN.js";import{t as or}from"./button-D8mnDDLX.js";import{t as ur}from"./cn-Cs2e4A8T.js";import{$ as dr,G as cr,J as fr,K as pr,Y as mr,tt as hr}from"./Output-DxdWGPFi.js";import{t as kt}from"./requests-THIDPq-F.js";import{t as Rt}from"./createLucideIcon-BJ2I6csQ.js";import{h as gr}from"./select-CgZgQ5hV.js";import{t as yr}from"./DeferredRequestRegistry-DfLQSvoS.js";import{t as Ve}from"./Deferred-9HYzcD3r.js";import{t as br}from"./uuid-B8w6pjWV.js";import{t as wr}from"./use-toast-DKTyV2AR.js";import{t as It}from"./tooltip-DqNvr2Rw.js";import{t as Pt}from"./mode-DKDAYLK9.js";import{n as vr,r as xr,t as Sr}from"./share-DjbnD3WE.js";import{t as Nt}from"./toggle-PGHtwx2G.js";function Er(t,e,n){return t==null?t:nr(t,e,n)}var Pe=Er,Cr=Rt("crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),zr=Rt("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);function kr(t){return{all:t||(t=new Map),on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(i){i(n)}),(r=t.get("*"))&&r.slice().map(function(i){i(e,n)})}}}var u=wt(Un(),1),Xe=(0,u.createContext)(null),Rr=t=>{let{controller:e}=(0,u.useContext)(Xe),n=u.useRef(Symbol("fill"));return(0,u.useEffect)(()=>(e.mount({name:t.name,ref:n.current,children:t.children}),()=>{e.unmount({name:t.name,ref:n.current})}),[]),(0,u.useEffect)(()=>{e.update({name:t.name,ref:n.current,children:t.children})}),null},Ir=Object.defineProperty,Pr=(t,e,n)=>e in t?Ir(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,At=(t,e,n)=>(Pr(t,typeof e=="symbol"?e:e+"",n),n),_t=console,Nr=class{constructor(t){At(this,"_bus"),At(this,"_db"),this._bus=t,this.handleFillMount=this.handleFillMount.bind(this),this.handleFillUpdated=this.handleFillUpdated.bind(this),this.handleFillUnmount=this.handleFillUnmount.bind(this),this._db={byName:new Map,byFill:new Map}}mount(){this._bus.on("fill-mount",this.handleFillMount),this._bus.on("fill-updated",this.handleFillUpdated),this._bus.on("fill-unmount",this.handleFillUnmount)}unmount(){this._bus.off("fill-mount",this.handleFillMount),this._bus.off("fill-updated",this.handleFillUpdated),this._bus.off("fill-unmount",this.handleFillUnmount)}handleFillMount({fill:t}){let e=u.Children.toArray(t.children),n=t.name,r={fill:t,children:e,name:n},i=this._db.byName.get(n);i?(i.components.push(r),i.listeners.forEach(a=>a([...i.components]))):this._db.byName.set(n,{listeners:[],components:[r]}),this._db.byFill.set(t.ref,r)}handleFillUpdated({fill:t}){let e=this._db.byFill.get(t.ref),n=u.Children.toArray(t.children);if(e){e.children=n;let r=this._db.byName.get(e.name);if(r)r.listeners.forEach(i=>i([...r.components]));else throw Error("registration was expected to be defined")}else{_t.error("[handleFillUpdated] component was expected to be defined");return}}handleFillUnmount({fill:t}){let e=this._db.byFill.get(t.ref);if(!e){_t.error("[handleFillUnmount] component was expected to be defined");return}let n=e.name,r=this._db.byName.get(n);if(!r)throw Error("registration was expected to be defined");r.components=r.components.filter(i=>i!==e),this._db.byFill.delete(t.ref),r.listeners.length===0&&r.components.length===0?this._db.byName.delete(n):r.listeners.forEach(i=>i([...r.components]))}onComponentsChange(t,e){let n=this._db.byName.get(t);n?(n.listeners.push(e),e(n.components)):(this._db.byName.set(t,{listeners:[e],components:[]}),e([]))}getFillsByName(t){let e=this._db.byName.get(t);return e?e.components.map(n=>n.fill):[]}getChildrenByName(t){let e=this._db.byName.get(t);return e?e.components.map(n=>n.children).reduce((n,r)=>n.concat(r),[]):[]}removeOnComponentsChange(t,e){let n=this._db.byName.get(t);if(!n)throw Error("expected registration to be defined");let r=n.listeners;r.splice(r.indexOf(e),1)}},Ar=Object.defineProperty,_r=(t,e,n)=>e in t?Ar(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mr=(t,e,n)=>(_r(t,typeof e=="symbol"?e:e+"",n),n),Mt=class{constructor(){Mr(this,"bus",kr())}mount(t){this.bus.emit("fill-mount",{fill:t})}unmount(t){this.bus.emit("fill-unmount",{fill:t})}update(t){this.bus.emit("fill-updated",{fill:t})}};function Lr(t){let e=t||new Mt;return{controller:e,manager:new Nr(e.bus)}}var Fr=({controller:t,children:e})=>{let[n]=u.useState(()=>{let r=Lr(t);return r.manager.mount(),r});return u.useEffect(()=>()=>{n.manager.unmount()},[]),u.createElement(Xe.Provider,{value:n},e)};function Ye(t,e){let[n,r]=(0,u.useState)([]),{manager:i}=(0,u.useContext)(Xe);return(0,u.useEffect)(()=>(i.onComponentsChange(t,r),()=>{i.removeOnComponentsChange(t,r)}),[t]),n.flatMap((a,l)=>{let{children:s}=a;return s.map((o,g)=>{if(typeof o=="number"||typeof o=="string")throw Error("Only element children will work here");return u.cloneElement(o,{key:l.toString()+g.toString(),...e})})})}var Lt=t=>{let e=Ye(t.name,t.childProps);if(typeof t.children=="function"){let n=t.children(e);if(u.isValidElement(n)||n===null)return n;throw Error("Slot rendered with function must return a valid React Element.")}return e};const Dr=new Mt,Ne={SIDEBAR:"sidebar",CONTEXT_AWARE_PANEL:"context-aware-panel"};var qr=1e10,jr=1e3;function Ae(t,e){let n=t.map(r=>`"${r}"`).join(", ");return Error(`This RPC instance cannot ${e} because the transport did not provide one or more of these methods: ${n}`)}function Tr(t={}){let e={};function n(c){e=c}let r={};function i(c){var x;r.unregisterHandler&&r.unregisterHandler(),r=c,(x=r.registerHandler)==null||x.call(r,_)}let a;function l(c){if(typeof c=="function"){a=c;return}a=(x,N)=>{let C=c[x];if(C)return C(N);let P=c._;if(!P)throw Error(`The requested method has no handler: ${x}`);return P(x,N)}}let{maxRequestTime:s=jr}=t;t.transport&&i(t.transport),t.requestHandler&&l(t.requestHandler),t._debugHooks&&n(t._debugHooks);let o=0;function g(){return o<=qr?++o:o=0}let m=new Map,f=new Map;function p(c,...x){let N=x[0];return new Promise((C,P)=>{var q;if(!r.send)throw Ae(["send"],"make requests");let M=g(),U={type:"request",id:M,method:c,params:N};m.set(M,{resolve:C,reject:P}),s!==1/0&&f.set(M,setTimeout(()=>{f.delete(M),P(Error("RPC request timed out."))},s)),(q=e.onSend)==null||q.call(e,U),r.send(U)})}let y=new Proxy(p,{get:(c,x,N)=>x in c?Reflect.get(c,x,N):C=>p(x,C)}),v=y;function z(c,...x){var P;let N=x[0];if(!r.send)throw Ae(["send"],"send messages");let C={type:"message",id:c,payload:N};(P=e.onSend)==null||P.call(e,C),r.send(C)}let b=new Proxy(z,{get:(c,x,N)=>x in c?Reflect.get(c,x,N):C=>z(x,C)}),I=b,A=new Map,D=new Set;function H(c,x){var N;if(!r.registerHandler)throw Ae(["registerHandler"],"register message listeners");if(c==="*"){D.add(x);return}A.has(c)||A.set(c,new Set),(N=A.get(c))==null||N.add(x)}function G(c,x){var N,C;if(c==="*"){D.delete(x);return}(N=A.get(c))==null||N.delete(x),((C=A.get(c))==null?void 0:C.size)===0&&A.delete(c)}async function _(c){var x,N;if((x=e.onReceive)==null||x.call(e,c),!("type"in c))throw Error("Message does not contain a type.");if(c.type==="request"){if(!r.send||!a)throw Ae(["send","requestHandler"],"handle requests");let{id:C,method:P,params:M}=c,U;try{U={type:"response",id:C,success:!0,payload:await a(P,M)}}catch(q){if(!(q instanceof Error))throw q;U={type:"response",id:C,success:!1,error:q.message}}(N=e.onSend)==null||N.call(e,U),r.send(U);return}if(c.type==="response"){let C=f.get(c.id);C!=null&&clearTimeout(C);let{resolve:P,reject:M}=m.get(c.id)??{};c.success?P==null||P(c.payload):M==null||M(Error(c.error));return}if(c.type==="message"){for(let P of D)P(c.id,c.payload);let C=A.get(c.id);if(!C)return;for(let P of C)P(c.payload);return}throw Error(`Unexpected RPC message type: ${c.type}`)}return{setTransport:i,setRequestHandler:l,request:y,requestProxy:v,send:b,sendProxy:I,addMessageListener:H,removeMessageListener:G,proxy:{send:I,request:v},_setDebugHooks:n}}function Hr(t){return Tr(t)}var Ft="[transport-id]";function $r(t,e){let{transportId:n}=e;return n==null?t:{[Ft]:n,data:t}}function Or(t,e){let{transportId:n,filter:r}=e,i=r==null?void 0:r();if(n!=null&&i!=null)throw Error("Cannot use both `transportId` and `filter` at the same time");let a=t;if(n){if(t[Ft]!==n)return[!0];a=t.data}return i===!1?[!0]:[!1,a]}function Ur(t,e={}){let{transportId:n,filter:r,remotePort:i}=e,a=t,l=i??t,s;return{send(o){l.postMessage($r(o,{transportId:n}))},registerHandler(o){s=g=>{let m=g.data,[f,p]=Or(m,{transportId:n,filter:()=>r==null?void 0:r(g)});f||o(p)},a.addEventListener("message",s)},unregisterHandler(){s&&a.removeEventListener("message",s)}}}function Wr(t,e){return Ur(t,e)}function Dt(t){return Hr({transport:Wr(t,{transportId:"marimo-transport"}),maxRequestTime:2e4,_debugHooks:{onSend:e=>{X.debug("[rpc] Parent -> Worker",e)},onReceive:e=>{X.debug("[rpc] Worker -> Parent",e)}}})}const qt=ie("Initializing..."),Br=ie(t=>{let e=t(Xn),n=Object.values(e.cellRuntime);return n.some(r=>!dr(r.output))?!0:n.every(r=>r.status==="idle")});var jt=vr(),Tt="marimo:file",Ht=new Wn(null);const Gr={saveFile(t){Ht.set(Tt,t)},readFile(){return Ht.get(Tt)}};var Vr={saveFile(t){we.setCodeForHash((0,jt.compressToEncodedURIComponent)(t))},readFile(){let t=we.getCodeFromHash()||we.getCodeFromSearchParam();return t?(0,jt.decompressFromEncodedURIComponent)(t):null}};const Xr={saveFile(t){},readFile(){let t=document.querySelector("marimo-code");return t?decodeURIComponent(t.textContent||"").trim():null}};var Yr={saveFile(t){},readFile(){if(window.location.hostname!=="marimo.app")return null;let t=new URL("files/wasm-intro.py",document.baseURI);return fetch(t.toString()).then(e=>e.ok?e.text():null).catch(()=>null)}},Jr={saveFile(t){},readFile(){return["import marimo","app = marimo.App()","","@app.cell","def __():","  return","",'if __name__ == "__main__":',"  app.run()"].join(`
`)}},$t=class{constructor(t){this.stores=t}insert(t,e){this.stores.splice(t,0,e)}saveFile(t){this.stores.forEach(e=>e.saveFile(t))}readFile(){for(let t of this.stores){let e=t.readFile();if(e)return e}return null}};const _e=new $t([Xr,Vr]),Je=new $t([Gr,Yr,Jr]);var Kr=class qn{constructor(){d(this,"initialized",new Ve);d(this,"sendRename",async({filename:e})=>(e===null||(we.setFilename(e),await this.rpc.proxy.request.bridge({functionName:"rename_file",payload:e})),null));d(this,"sendSave",async e=>{if(!this.saveRpc)return X.warn("Save RPC not initialized"),null;await this.saveRpc.saveNotebook(e);let n=await this.readCode();return n.contents&&(_e.saveFile(n.contents),Je.saveFile(n.contents)),this.rpc.proxy.request.saveNotebook(e).catch(r=>{X.error(r)}),null});d(this,"sendCopy",async()=>{$()});d(this,"sendStdin",async e=>(await this.rpc.proxy.request.bridge({functionName:"put_input",payload:e.text}),null));d(this,"sendPdb",async()=>{$()});d(this,"sendRun",async e=>(await this.rpc.proxy.request.loadPackages(e.codes.join(`
`)),await this.putControlRequest(e),null));d(this,"sendRunScratchpad",async e=>(await this.rpc.proxy.request.loadPackages(e.code),await this.putControlRequest(e),null));d(this,"sendInterrupt",async()=>(this.interruptBuffer!==void 0&&(this.interruptBuffer[0]=2),null));d(this,"sendShutdown",async()=>(window.close(),null));d(this,"sendFormat",async e=>await this.rpc.proxy.request.bridge({functionName:"format",payload:e}));d(this,"sendDeleteCell",async e=>(await this.putControlRequest(e),null));d(this,"sendInstallMissingPackages",async e=>(this.putControlRequest(e),null));d(this,"sendCodeCompletionRequest",async e=>(Ge.get(Vn)||await this.rpc.proxy.request.bridge({functionName:"code_complete",payload:e}),null));d(this,"saveUserConfig",async e=>(await this.rpc.proxy.request.bridge({functionName:"save_user_config",payload:e}),lr.post("/kernel/save_user_config",e,{baseUrl:"/"}).catch(n=>(X.error(n),null))));d(this,"saveAppConfig",async e=>(await this.rpc.proxy.request.bridge({functionName:"save_app_config",payload:e}),null));d(this,"saveCellConfig",async e=>(await this.putControlRequest(e),null));d(this,"sendRestart",async()=>{let e=await this.readCode();return e.contents&&(_e.saveFile(e.contents),Je.saveFile(e.contents)),xr(),null});d(this,"readCode",async()=>this.saveRpc?{contents:await this.saveRpc.readNotebook()}:(X.warn("Save RPC not initialized"),{contents:""}));d(this,"readSnippets",async()=>await this.rpc.proxy.request.bridge({functionName:"read_snippets",payload:void 0}));d(this,"openFile",async({path:e})=>{let n=Sr({code:null,baseUrl:window.location.origin});return window.open(n,"_blank"),null});d(this,"sendListFiles",async e=>await this.rpc.proxy.request.bridge({functionName:"list_files",payload:e}));d(this,"sendSearchFiles",async e=>await this.rpc.proxy.request.bridge({functionName:"search_files",payload:e}));d(this,"sendComponentValues",async e=>(await this.putControlRequest({...e,token:br()}),null));d(this,"sendInstantiate",async e=>null);d(this,"sendFunctionRequest",async e=>(await this.putControlRequest(e),null));d(this,"sendCreateFileOrFolder",async e=>await this.rpc.proxy.request.bridge({functionName:"create_file_or_directory",payload:e}));d(this,"sendDeleteFileOrFolder",async e=>await this.rpc.proxy.request.bridge({functionName:"delete_file_or_directory",payload:e}));d(this,"sendRenameFileOrFolder",async e=>await this.rpc.proxy.request.bridge({functionName:"move_file_or_directory",payload:e}));d(this,"sendUpdateFile",async e=>await this.rpc.proxy.request.bridge({functionName:"update_file",payload:e}));d(this,"sendFileDetails",async e=>await this.rpc.proxy.request.bridge({functionName:"file_details",payload:e}));d(this,"exportAsHTML",async e=>await this.rpc.proxy.request.bridge({functionName:"export_html",payload:e}));d(this,"exportAsMarkdown",async e=>await this.rpc.proxy.request.bridge({functionName:"export_markdown",payload:e}));d(this,"previewDatasetColumn",async e=>(await this.putControlRequest(e),null));d(this,"previewSQLTable",async e=>(await this.putControlRequest(e),null));d(this,"previewSQLTableList",async e=>(await this.putControlRequest(e),null));d(this,"previewDataSourceConnection",async e=>(await this.putControlRequest(e),null));d(this,"validateSQL",async e=>(await this.putControlRequest(e),null));d(this,"sendModelValue",async e=>(await this.putControlRequest(e),null));d(this,"syncCellIds",()=>Promise.resolve(null));d(this,"getUsageStats",$);d(this,"openTutorial",$);d(this,"getRecentFiles",$);d(this,"getWorkspaceFiles",$);d(this,"getRunningNotebooks",$);d(this,"shutdownSession",$);d(this,"autoExportAsHTML",$);d(this,"autoExportAsMarkdown",$);d(this,"autoExportAsIPYNB",$);d(this,"addPackage",async e=>this.rpc.proxy.request.addPackage(e));d(this,"removePackage",async e=>this.rpc.proxy.request.removePackage(e));d(this,"getPackageList",async()=>await this.rpc.proxy.request.listPackages());d(this,"getDependencyTree",async()=>({tree:{dependencies:[],name:"",tags:[],version:null}}));d(this,"listSecretKeys",async e=>(await this.putControlRequest(e),null));d(this,"writeSecret",async e=>(await this.putControlRequest(e),null));d(this,"invokeAiTool",$);d(this,"clearCache",$);d(this,"getCacheInfo",$);ir()&&(this.rpc=Dt(new Worker(new URL(""+new URL("worker-zid3ue6N.js",import.meta.url).href,""+import.meta.url),{type:"module",name:Ct()})),this.rpc.addMessageListener("ready",()=>{this.startSession()}),this.rpc.addMessageListener("initialized",()=>{this.saveRpc=this.getSaveWorker(),this.setInterruptBuffer(),this.initialized.resolve()}),this.rpc.addMessageListener("initializingMessage",({message:e})=>{Ge.set(qt,e)}),this.rpc.addMessageListener("initializedError",({error:e})=>{this.initialized.status==="resolved"&&(X.error(e),wr({title:"Error initializing",description:e,variant:"danger"})),this.initialized.reject(Error(e))}),this.rpc.addMessageListener("kernelMessage",({message:e})=>{var n;(n=this.messageConsumer)==null||n.call(this,e)}))}static get INSTANCE(){let e="_marimo_private_PyodideBridge";return window[e]||(window[e]=new qn),window[e]}getSaveWorker(){return Pt()==="read"?(X.debug("Skipping SaveWorker in read-mode"),{readFile:$,readNotebook:$,saveNotebook:$}):Dt(new Worker(new URL(""+new URL("save-worker-BBAmA_qz.js",import.meta.url).href,""+import.meta.url),{type:"module",name:Ct()})).proxy.request}async startSession(){let e=await _e.readFile(),n=await Je.readFile(),r=we.getFilename(),i=Ge.get(ar),a={},l=new URLSearchParams(window.location.search);for(let s of l.keys()){let o=l.getAll(s);a[s]=o.length===1?o[0]:o}await this.rpc.proxy.request.startSession({queryParameters:a,code:e||n||"",filename:r,userConfig:{...i,runtime:{...i.runtime,auto_instantiate:Pt()==="read"?!0:i.runtime.auto_instantiate}}})}setInterruptBuffer(){crossOriginIsolated?(this.interruptBuffer=new Uint8Array(new SharedArrayBuffer(1)),this.rpc.proxy.request.setInterruptBuffer(this.interruptBuffer)):X.warn("Not running in a secure context; interrupts are not available.")}consumeMessages(e){this.messageConsumer=e,this.rpc.proxy.send.consumerReady({})}async putControlRequest(e){await this.rpc.proxy.request.bridge({functionName:"put_control_request",payload:e})}},Qr=class{constructor(t){d(this,"CONNECTING",WebSocket.CONNECTING);d(this,"OPEN",WebSocket.OPEN);d(this,"CLOSING",WebSocket.CLOSING);d(this,"CLOSED",WebSocket.CLOSED);d(this,"binaryType","blob");d(this,"bufferedAmount",0);d(this,"extensions","");d(this,"protocol","");d(this,"url","");d(this,"onclose",null);d(this,"onerror",null);d(this,"onmessage",null);d(this,"onopen",null);d(this,"openSubscriptions",new Set);d(this,"closeSubscriptions",new Set);d(this,"messageSubscriptions",new Set);d(this,"errorSubscriptions",new Set);d(this,"dispatchEvent",$);d(this,"reconnect",$);d(this,"send",$);d(this,"readyState",WebSocket.OPEN);d(this,"retryCount",0);d(this,"shouldReconnect",!1);this.bridge=t}consumeMessages(){this.bridge.consumeMessages(t=>{this.messageSubscriptions.forEach(e=>{e({data:t})})})}addEventListener(t,e,n){switch(t){case"open":this.openSubscriptions.add(e),e();break;case"close":this.closeSubscriptions.add(e);break;case"message":this.messageSubscriptions.add(e),this.consumeMessages();break;case"error":this.errorSubscriptions.add(e);break}}removeEventListener(t,e,n){switch(t){case"open":this.openSubscriptions.delete(e);break;case"close":this.closeSubscriptions.delete(e);break;case"message":this.messageSubscriptions.delete(e);break;case"error":this.errorSubscriptions.delete(e);break}}close(){}};function Me(t){return()=>({TYPE:t,is(e){return e.type===t},create(e){return new CustomEvent(t,e)}})}const Ot=Me("marimo-value-input")(),Ut=Me("marimo-value-update")(),Wt=Me("marimo-value-ready")(),Bt=Me("marimo-incoming-message")();function Zr(t,e){return Ot.create({bubbles:!0,composed:!0,detail:{value:t,element:e}})}var Gt=class jn{static get INSTANCE(){let e="_marimo_private_UIElementRegistry";return window[e]||(window[e]=new jn),window[e]}constructor(){this.entries=new Map}has(e){return this.entries.has(e)}set(e,n){if(this.entries.has(e))throw Error(`UIElement ${e} already registered`);this.entries.set(e,{objectId:e,value:n,elements:new Set})}registerInstance(e,n){let r=this.entries.get(e);r===void 0?this.entries.set(e,{objectId:e,value:Bn(n,this),elements:new Set([n])}):r.elements.add(n)}removeInstance(e,n){let r=this.entries.get(e);r!=null&&r.elements.has(n)&&r.elements.delete(n)}removeElementsByCell(e){[...this.entries.keys()].filter(n=>n.startsWith(`${e}-`)).forEach(n=>{this.entries.delete(n)})}lookupValue(e){let n=this.entries.get(e);return n===void 0?void 0:n.value}broadcastMessage(e,n,r){let i=this.entries.get(e);i===void 0?X.warn("UIElementRegistry missing entry",e):i.elements.forEach(a=>{a.dispatchEvent(Bt.create({bubbles:!1,composed:!0,detail:{objectId:e,message:n,buffers:r}}))})}broadcastValueUpdate(e,n,r){let i=this.entries.get(n);i===void 0?X.warn("UIElementRegistry missing entry",n):(i.value=r,i.elements.forEach(a=>{a!==e&&a.dispatchEvent(Ut.create({bubbles:!1,composed:!0,detail:{value:r,element:a}}))}),document.dispatchEvent(Wt.create({bubbles:!0,composed:!0,detail:{objectId:n}})))}};const ea=Gt.INSTANCE,ta=new yr("function-call-result",async(t,e)=>{await kt().sendFunctionRequest({functionCallId:t,...e})}),na="68px";var ra="288px";const aa=t=>t?/^\d+$/.test(t)?`${t}px`:t:ra,ia=Gn({isOpen:!0},(t,e)=>{if(!e)return t;switch(e.type){case"toggle":return{...t,isOpen:e.isOpen??t.isOpen};case"setWidth":return{...t,width:e.width};default:return t}});function la(t){return mr(cr(new Uint8Array(t.buffer,t.byteOffset,t.byteLength)))}function Ke(t,e=[]){let n=[];if(t instanceof DataView)n.push(e);else if(Array.isArray(t))for(let r=0;r<t.length;r++)n.push(...Ke(t[r],[...e,r]));else if(typeof t=="object"&&t)for(let[r,i]of Object.entries(t))n.push(...Ke(i,[...e,r]));return n}function Qe(t){let e=Ke(t);if(e.length===0)return{state:t,buffers:[],bufferPaths:[]};let n=structuredClone(t),r=[],i=[];for(let a of e){let l=Zn(t,a);if(l instanceof DataView){let s=la(l);r.push(s),i.push(a),Pe(n,a,s)}}return{state:n,buffers:r,bufferPaths:i}}function sa(t){return typeof t=="object"&&!!t&&"state"in t&&"bufferPaths"in t&&"buffers"in t}function Le(t){let{state:e,bufferPaths:n,buffers:r}=t;if(!n||n.length===0)return e;r&&rr(r.length===n.length,"Buffers and buffer paths not the same length");let i=structuredClone(e);for(let[a,l]of n.entries()){let s=r==null?void 0:r[a];if(s==null){X.warn("[anywidget] Could not find buffer at path",l);continue}if(typeof s=="string"){let o=pr(fr(s));Pe(i,l,new DataView(o.buffer))}else Pe(i,l,s)}return i}const Vt=new class{constructor(t=1e4){d(this,"models",new Map);this.timeout=t}get(t){let e=this.models.get(t);return e||(e=new Ve,this.models.set(t,e),setTimeout(()=>{e.status==="pending"&&(e.reject(Error(`Model not found for key: ${t}`)),this.models.delete(t))},this.timeout)),e.promise}set(t,e){let n=this.models.get(t);n||(n=new Ve,this.models.set(t,n)),n.resolve(e)}delete(t){this.models.delete(t)}};var Xt=(de=class{constructor(e,n,r,i){d(this,"ANY_CHANGE_EVENT","change");d(this,"listeners",{});d(this,"widget_manager",{async get_model(e){let n=await de._modelManager.get(e);if(!n)throw Error(`Model not found with id: ${e}. This is likely because the model was not registered.`);return n}});d(this,"emitAnyChange",tr(()=>{var e;(e=this.listeners[this.ANY_CHANGE_EVENT])==null||e.forEach(n=>n())},0));this.data=e,this.onChange=n,this.sendToWidget=r,this.dirtyFields=new Map([...i].map(a=>[a,this.data[a]]))}off(e,n){var r;if(!e){this.listeners={};return}if(!n){this.listeners[e]=new Set;return}(r=this.listeners[e])==null||r.delete(n)}send(e,n,r){let{state:i,bufferPaths:a,buffers:l}=Qe(e);this.sendToWidget({content:{state:i,bufferPaths:a},buffers:l}).then(n)}get(e){return this.data[e]}set(e,n){this.data={...this.data,[e]:n},this.dirtyFields.set(e,n),this.emit(`change:${e}`,n),this.emitAnyChange()}save_changes(){if(this.dirtyFields.size===0)return;let e=Object.fromEntries(this.dirtyFields.entries());this.dirtyFields.clear(),this.onChange(e)}updateAndEmitDiffs(e){e!=null&&Object.keys(e).forEach(n=>{let r=n;this.data[r]!==e[r]&&this.set(r,e[r])})}receiveCustomMessage(e,n=[]){var i;let r=Yt.safeParse(e);if(r.success){let a=r.data;switch(a.method){case"update":this.updateAndEmitDiffs(Le({state:a.state,bufferPaths:a.buffer_paths??[],buffers:n}));break;case"custom":(i=this.listeners["msg:custom"])==null||i.forEach(l=>l(a.content,n));break;case"open":this.updateAndEmitDiffs(Le({state:a.state,bufferPaths:a.buffer_paths??[],buffers:n}));break;case"echo_update":break;default:X.error("[anywidget] Unknown message method",a.method);break}}else X.error("Failed to parse message",r.error),X.error("Message",e)}on(e,n){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(n)}emit(e,n){this.listeners[e]&&this.listeners[e].forEach(r=>r(n))}},d(de,"_modelManager",Vt),de),Ze=St(St(Yn([xt(),Qn()]))),et=Kn(xt(),vt()),Yt=Jn("method",[ve({method:xe("open"),state:et,buffer_paths:Ze.optional()}),ve({method:xe("update"),state:et,buffer_paths:Ze.optional()}),ve({method:xe("custom"),content:vt()}),ve({method:xe("echo_update"),buffer_paths:Ze,state:et}),ve({method:xe("close")})]);function oa(t){return t==null?!1:Yt.safeParse(t).success}async function ua({modelId:t,msg:e,buffers:n,modelManager:r}){if(e.method==="echo_update")return;if(e.method==="custom"){(await r.get(t)).receiveCustomMessage(e,n);return}if(e.method==="close"){r.delete(t);return}let{method:i,state:a,buffer_paths:l=[]}=e,s=Le({state:a,bufferPaths:l,buffers:n});if(i==="open"){let o=new Xt(s,g=>{let{state:m,buffers:f,bufferPaths:p}=Qe(g);kt().sendModelValue({modelId:t,message:{state:m,bufferPaths:p},buffers:f})},$,new Set);r.set(t,o);return}if(i==="update"){(await r.get(t)).updateAndEmitDiffs(s);return}er(i)}const Jt=ie(null),da=ie(null),Kt=ie(!1),ca=ie(!1),Qt=ie(!1);var Fe=(0,u.createContext)(null);Fe.displayName="PanelGroupContext";var T={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},tt=10,le=u.useLayoutEffect,Zt=u.useId,fa=typeof Zt=="function"?Zt:()=>null,pa=0;function nt(t=null){let e=fa(),n=(0,u.useRef)(t||e||null);return n.current===null&&(n.current=""+pa++),t??n.current}function en({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:a,id:l,maxSize:s,minSize:o,onCollapse:g,onExpand:m,onResize:f,order:p,style:y,tagName:v="div",...z}){let b=(0,u.useContext)(Fe);if(b===null)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:I,expandPanel:A,getPanelSize:D,getPanelStyle:H,groupId:G,isPanelCollapsed:_,reevaluatePanelConstraints:c,registerPanel:x,resizePanel:N,unregisterPanel:C}=b,P=nt(l),M=(0,u.useRef)({callbacks:{onCollapse:g,onExpand:m,onResize:f},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:s,minSize:o},id:P,idIsFromProps:l!==void 0,order:p});(0,u.useRef)({didLogMissingDefaultSizeWarning:!1}),le(()=>{let{callbacks:q,constraints:B}=M.current,V={...B};M.current.id=P,M.current.idIsFromProps=l!==void 0,M.current.order=p,q.onCollapse=g,q.onExpand=m,q.onResize=f,B.collapsedSize=n,B.collapsible=r,B.defaultSize=i,B.maxSize=s,B.minSize=o,(V.collapsedSize!==B.collapsedSize||V.collapsible!==B.collapsible||V.maxSize!==B.maxSize||V.minSize!==B.minSize)&&c(M.current,V)}),le(()=>{let q=M.current;return x(q),()=>{C(q)}},[p,P,x,C]),(0,u.useImperativeHandle)(a,()=>({collapse:()=>{I(M.current)},expand:q=>{A(M.current,q)},getId(){return P},getSize(){return D(M.current)},isCollapsed(){return _(M.current)},isExpanded(){return!_(M.current)},resize:q=>{N(M.current,q)}}),[I,A,D,_,P,N]);let U=H(M.current,i);return(0,u.createElement)(v,{...z,children:t,className:e,id:P,style:{...U,...y},[T.groupId]:G,[T.panel]:"",[T.panelCollapsible]:r||void 0,[T.panelId]:P,[T.panelSize]:parseFloat(""+U.flexGrow).toFixed(1)})}var rt=(0,u.forwardRef)((t,e)=>(0,u.createElement)(en,{...t,forwardedRef:e}));en.displayName="Panel",rt.displayName="forwardRef(Panel)";var ma;function ha(){return ma}var at=null,ga=!0,De=-1,Z=null;function ya(t,e){if(e){let n=(e&un)!==0,r=(e&dn)!==0,i=(e&cn)!==0,a=(e&fn)!==0;if(n)return i?"se-resize":a?"ne-resize":"e-resize";if(r)return i?"sw-resize":a?"nw-resize":"w-resize";if(i)return"s-resize";if(a)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function ba(){Z!==null&&(document.head.removeChild(Z),at=null,Z=null,De=-1)}function it(t,e){var i;if(!ga)return;let n=ya(t,e);if(at!==n){if(at=n,Z===null){Z=document.createElement("style");let a=ha();a&&Z.setAttribute("nonce",a),document.head.appendChild(Z)}if(De>=0){var r;(r=Z.sheet)==null||r.removeRule(De)}De=((i=Z.sheet)==null?void 0:i.insertRule(`*{cursor: ${n} !important;}`))??-1}}function tn(t){return t.type==="keydown"}function nn(t){return t.type.startsWith("pointer")}function rn(t){return t.type.startsWith("mouse")}function qe(t){if(nn(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(rn(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function wa(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function va(t,e,n){return n?t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y:t.x<=e.x+e.width&&t.x+t.width>=e.x&&t.y<=e.y+e.height&&t.y+t.height>=e.y}function xa(t,e){if(t===e)throw Error("Cannot compare node with itself");let n={a:sn(t),b:sn(e)},r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;R(r,"Stacking order can only be calculated for elements with a common ancestor");let i={a:ln(an(n.a)),b:ln(an(n.b))};if(i.a===i.b){let a=r.childNodes,l={a:n.a.at(-1),b:n.b.at(-1)},s=a.length;for(;s--;){let o=a[s];if(o===l.a)return 1;if(o===l.b)return-1}}return Math.sign(i.a-i.b)}var Sa=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Ea(t){let e=getComputedStyle(on(t)??t).display;return e==="flex"||e==="inline-flex"}function Ca(t){let e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||Ea(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Sa.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function an(t){let e=t.length;for(;e--;){let n=t[e];if(R(n,"Missing node"),Ca(n))return n}return null}function ln(t){return t&&Number(getComputedStyle(t).zIndex)||0}function sn(t){let e=[];for(;t;)e.push(t),t=on(t);return e}function on(t){let{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}var un=1,dn=2,cn=4,fn=8,za=wa()==="coarse",K=[],fe=!1,se=new Map,je=new Map,Se=new Set;function ka(t,e,n,r,i){let{ownerDocument:a}=e,l={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:i},s=se.get(a)??0;return se.set(a,s+1),Se.add(l),Te(),function(){je.delete(t),Se.delete(l);let o=se.get(a)??1;if(se.set(a,o-1),Te(),o===1&&se.delete(a),K.includes(l)){let g=K.indexOf(l);g>=0&&K.splice(g,1),dt(),i("up",!0,null)}}}function Ra(t){let{target:e}=t,{x:n,y:r}=qe(t);fe=!0,ot({target:e,x:n,y:r}),Te(),K.length>0&&(He("down",t),t.preventDefault(),pn(e)||t.stopImmediatePropagation())}function lt(t){let{x:e,y:n}=qe(t);if(fe&&t.buttons===0&&(fe=!1,He("up",t)),!fe){let{target:r}=t;ot({target:r,x:e,y:n})}He("move",t),dt(),K.length>0&&t.preventDefault()}function st(t){let{target:e}=t,{x:n,y:r}=qe(t);je.clear(),fe=!1,K.length>0&&(t.preventDefault(),pn(e)||t.stopImmediatePropagation()),He("up",t),ot({target:e,x:n,y:r}),dt(),Te()}function pn(t){let e=t;for(;e;){if(e.hasAttribute(T.resizeHandle))return!0;e=e.parentElement}return!1}function ot({target:t,x:e,y:n}){K.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),Se.forEach(i=>{let{element:a,hitAreaMargins:l}=i,s=a.getBoundingClientRect(),{bottom:o,left:g,right:m,top:f}=s,p=za?l.coarse:l.fine;if(e>=g-p&&e<=m+p&&n>=f-p&&n<=o+p){if(r!==null&&document.contains(r)&&a!==r&&!a.contains(r)&&!r.contains(a)&&xa(r,a)>0){let y=r,v=!1;for(;y&&!y.contains(a);){if(va(y.getBoundingClientRect(),s,!0)){v=!0;break}y=y.parentElement}if(v)return}K.push(i)}})}function ut(t,e){je.set(t,e)}function dt(){let t=!1,e=!1;K.forEach(r=>{let{direction:i}=r;i==="horizontal"?t=!0:e=!0});let n=0;je.forEach(r=>{n|=r}),t&&e?it("intersection",n):t?it("horizontal",n):e?it("vertical",n):ba()}var ct=new AbortController;function Te(){ct.abort(),ct=new AbortController;let t={capture:!0,signal:ct.signal};Se.size&&(fe?(K.length>0&&se.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener("contextmenu",st,t),r.addEventListener("pointerleave",lt,t),r.addEventListener("pointermove",lt,t))}),window.addEventListener("pointerup",st,t),window.addEventListener("pointercancel",st,t)):se.forEach((e,n)=>{let{body:r}=n;e>0&&(r.addEventListener("pointerdown",Ra,t),r.addEventListener("pointermove",lt,t))}))}function He(t,e){Se.forEach(n=>{let{setResizeHandlerState:r}=n;r(t,K.includes(n),e)})}function Ia(){let[t,e]=(0,u.useState)(0);return(0,u.useCallback)(()=>e(n=>n+1),[])}function R(t,e){if(!t)throw console.error(e),Error(e)}function oe(t,e,n=tt){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function ee(t,e,n=tt){return oe(t,e,n)===0}function Y(t,e,n){return oe(t,e,n)===0}function Pa(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],a=e[r];if(!Y(i,a,n))return!1}return!0}function pe({panelConstraints:t,panelIndex:e,size:n}){let r=t[e];R(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:i=0,collapsible:a,maxSize:l=100,minSize:s=0}=r;if(oe(n,s)<0)if(a){let o=(i+s)/2;n=oe(n,o)<0?i:s}else n=s;return n=Math.min(l,n),n=parseFloat(n.toFixed(tt)),n}function Ee({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:a}){if(Y(t,0))return e;let l=[...e],[s,o]=r;R(s!=null,"Invalid first pivot index"),R(o!=null,"Invalid second pivot index");let g=0;if(a==="keyboard"){{let m=t<0?o:s,f=n[m];R(f,`Panel constraints not found for index ${m}`);let{collapsedSize:p=0,collapsible:y,minSize:v=0}=f;if(y){let z=e[m];if(R(z!=null,`Previous layout not found for panel index ${m}`),Y(z,p)){let b=v-z;oe(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}{let m=t<0?s:o,f=n[m];R(f,`No panel constraints found for index ${m}`);let{collapsedSize:p=0,collapsible:y,minSize:v=0}=f;if(y){let z=e[m];if(R(z!=null,`Previous layout not found for panel index ${m}`),Y(z,v)){let b=z-p;oe(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}}{let m=t<0?1:-1,f=t<0?o:s,p=0;for(;;){let v=e[f];R(v!=null,`Previous layout not found for panel index ${f}`);let z=pe({panelConstraints:n,panelIndex:f,size:100})-v;if(p+=z,f+=m,f<0||f>=n.length)break}let y=Math.min(Math.abs(t),Math.abs(p));t=t<0?0-y:y}{let m=t<0?s:o;for(;m>=0&&m<n.length;){let f=Math.abs(t)-Math.abs(g),p=e[m];R(p!=null,`Previous layout not found for panel index ${m}`);let y=p-f,v=pe({panelConstraints:n,panelIndex:m,size:y});if(!Y(p,v)&&(g+=p-v,l[m]=v,g.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?m--:m++}}if(Pa(i,l))return i;{let m=t<0?o:s,f=e[m];R(f!=null,`Previous layout not found for panel index ${m}`);let p=f+g,y=pe({panelConstraints:n,panelIndex:m,size:p});if(l[m]=y,!Y(y,p)){let v=p-y,z=t<0?o:s;for(;z>=0&&z<n.length;){let b=l[z];R(b!=null,`Previous layout not found for panel index ${z}`);let I=b+v,A=pe({panelConstraints:n,panelIndex:z,size:I});if(Y(b,A)||(v-=A-b,l[z]=A),Y(v,0))break;t>0?z--:z++}}}return Y(l.reduce((m,f)=>f+m,0),100)?l:i}function Na({layout:t,panelsArray:e,pivotIndices:n}){let r=0,i=100,a=0,l=0,s=n[0];return R(s!=null,"No pivot index found"),e.forEach((o,g)=>{let{constraints:m}=o,{maxSize:f=100,minSize:p=0}=m;g===s?(r=p,i=f):(a+=p,l+=f)}),{valueMax:Math.min(i,100-a),valueMin:Math.max(r,100-l),valueNow:t[s]}}function Ce(t,e=document){return Array.from(e.querySelectorAll(`[${T.resizeHandleId}][data-panel-group-id="${t}"]`))}function mn(t,e,n=document){return Ce(t,n).findIndex(r=>r.getAttribute(T.resizeHandleId)===e)??null}function hn(t,e,n){let r=mn(t,e,n);return r==null?[-1,-1]:[r,r+1]}function gn(t,e=document){var n;return e instanceof HTMLElement&&((n=e==null?void 0:e.dataset)==null?void 0:n.panelGroupId)==t?e:e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`)||null}function $e(t,e=document){return e.querySelector(`[${T.resizeHandleId}="${t}"]`)||null}function Aa(t,e,n,r=document){var s,o;let i=$e(e,r),a=Ce(t,r),l=i?a.indexOf(i):-1;return[((s=n[l])==null?void 0:s.id)??null,((o=n[l+1])==null?void 0:o.id)??null]}function _a({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:i,panelGroupElement:a,setLayout:l}){(0,u.useRef)({didWarnAboutMissingResizeHandle:!1}),le(()=>{if(!a)return;let s=Ce(n,a);for(let o=0;o<i.length-1;o++){let{valueMax:g,valueMin:m,valueNow:f}=Na({layout:r,panelsArray:i,pivotIndices:[o,o+1]}),p=s[o];if(p!=null){let y=i[o];R(y,`No panel data found for index "${o}"`),p.setAttribute("aria-controls",y.id),p.setAttribute("aria-valuemax",""+Math.round(g)),p.setAttribute("aria-valuemin",""+Math.round(m)),p.setAttribute("aria-valuenow",f==null?"":""+Math.round(f))}}return()=>{s.forEach((o,g)=>{o.removeAttribute("aria-controls"),o.removeAttribute("aria-valuemax"),o.removeAttribute("aria-valuemin"),o.removeAttribute("aria-valuenow")})}},[n,r,i,a]),(0,u.useEffect)(()=>{if(!a)return;let s=e.current;R(s,"Eager values not found");let{panelDataArray:o}=s;R(gn(n,a)!=null,`No group found for id "${n}"`);let g=Ce(n,a);R(g,`No resize handles found for group id "${n}"`);let m=g.map(f=>{let p=f.getAttribute(T.resizeHandleId);R(p,"Resize handle element has no handle id attribute");let[y,v]=Aa(n,p,o,a);if(y==null||v==null)return()=>{};let z=b=>{if(!b.defaultPrevented)switch(b.key){case"Enter":{b.preventDefault();let I=o.findIndex(A=>A.id===y);if(I>=0){let A=o[I];R(A,`No panel data found for index ${I}`);let D=r[I],{collapsedSize:H=0,collapsible:G,minSize:_=0}=A.constraints;if(D!=null&&G){let c=Ee({delta:Y(D,H)?_-H:H-D,initialLayout:r,panelConstraints:o.map(x=>x.constraints),pivotIndices:hn(n,p,a),prevLayout:r,trigger:"keyboard"});r!==c&&l(c)}}break}}};return f.addEventListener("keydown",z),()=>{f.removeEventListener("keydown",z)}});return()=>{m.forEach(f=>f())}},[a,t,e,n,r,i,l])}function yn(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function bn(t,e){let n=t==="horizontal",{x:r,y:i}=qe(e);return n?r:i}function Ma(t,e,n,r,i){let a=n==="horizontal",l=$e(e,i);R(l,`No resize handle element found for id "${e}"`);let s=l.getAttribute(T.groupId);R(s,"Resize handle element has no group id attribute");let{initialCursorPosition:o}=r,g=bn(n,t),m=gn(s,i);R(m,`No group element found for id "${s}"`);let f=m.getBoundingClientRect(),p=a?f.width:f.height;return(g-o)/p*100}function La(t,e,n,r,i,a){if(tn(t)){let l=n==="horizontal",s=0;s=t.shiftKey?100:i??10;let o=0;switch(t.key){case"ArrowDown":o=l?0:s;break;case"ArrowLeft":o=l?-s:0;break;case"ArrowRight":o=l?s:0;break;case"ArrowUp":o=l?0:-s;break;case"End":o=100;break;case"Home":o=-100;break}return o}else return r==null?0:Ma(t,e,n,r,a)}function Fa({panelDataArray:t}){let e=Array(t.length),n=t.map(a=>a.constraints),r=0,i=100;for(let a=0;a<t.length;a++){let l=n[a];R(l,`Panel constraints not found for index ${a}`);let{defaultSize:s}=l;s!=null&&(r++,e[a]=s,i-=s)}for(let a=0;a<t.length;a++){let l=n[a];R(l,`Panel constraints not found for index ${a}`);let{defaultSize:s}=l;if(s!=null)continue;let o=t.length-r,g=i/o;r++,e[a]=g,i-=g}return e}function me(t,e,n){e.forEach((r,i)=>{let a=t[i];R(a,`Panel data not found for index ${i}`);let{callbacks:l,constraints:s,id:o}=a,{collapsedSize:g=0,collapsible:m}=s,f=n[o];if(f==null||r!==f){n[o]=r;let{onCollapse:p,onExpand:y,onResize:v}=l;v&&v(r,f),m&&(p||y)&&(y&&(f==null||ee(f,g))&&!ee(r,g)&&y(),p&&(f==null||!ee(f,g))&&ee(r,g)&&p())}})}function Oe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function Da({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:i,precision:a=3}){let l=n[i],s;return s=l==null?t==null?"1":t.toPrecision(a):r.length===1?"1":l.toPrecision(a),{flexBasis:0,flexGrow:s,flexShrink:1,overflow:"hidden",pointerEvents:e===null?void 0:"none"}}function qa(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function wn(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function vn(t){return`react-resizable-panels:${t}`}function xn(t){return t.map(e=>{let{constraints:n,id:r,idIsFromProps:i,order:a}=e;return i?r:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function Sn(t,e){try{let n=vn(t),r=e.getItem(n);if(r){let i=JSON.parse(r);if(typeof i=="object"&&i)return i}}catch{}return null}function ja(t,e,n){return(Sn(t,n)??{})[xn(e)]??null}function Ta(t,e,n,r,i){let a=vn(t),l=xn(e),s=Sn(t,i)??{};s[l]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(a,JSON.stringify(s))}catch(o){console.error(o)}}function En({layout:t,panelConstraints:e}){let n=[...t],r=n.reduce((a,l)=>a+l,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!Y(r,100)&&n.length>0)for(let a=0;a<e.length;a++){let l=n[a];R(l!=null,`No layout data found for index ${a}`),n[a]=100/r*l}let i=0;for(let a=0;a<e.length;a++){let l=n[a];R(l!=null,`No layout data found for index ${a}`);let s=pe({panelConstraints:e,panelIndex:a,size:l});l!=s&&(i+=l-s,n[a]=s)}if(!Y(i,0))for(let a=0;a<e.length;a++){let l=n[a];R(l!=null,`No layout data found for index ${a}`);let s=l+i,o=pe({panelConstraints:e,panelIndex:a,size:s});if(l!==o&&(i-=o-l,n[a]=o,Y(i,0)))break}return n}var Ha=100,ze={getItem:t=>(wn(ze),ze.getItem(t)),setItem:(t,e)=>{wn(ze),ze.setItem(t,e)}},Cn={};function zn({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:i,id:a=null,onLayout:l=null,keyboardResizeBy:s=null,storage:o=ze,style:g,tagName:m="div",...f}){let p=nt(a),y=(0,u.useRef)(null),[v,z]=(0,u.useState)(null),[b,I]=(0,u.useState)([]),A=Ia(),D=(0,u.useRef)({}),H=(0,u.useRef)(new Map),G=(0,u.useRef)(0),_=(0,u.useRef)({autoSaveId:t,direction:r,dragState:v,id:p,keyboardResizeBy:s,onLayout:l,storage:o}),c=(0,u.useRef)({layout:b,panelDataArray:[],panelDataArrayChanged:!1});(0,u.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,u.useImperativeHandle)(i,()=>({getId:()=>_.current.id,getLayout:()=>{let{layout:h}=c.current;return h},setLayout:h=>{let{onLayout:w}=_.current,{layout:S,panelDataArray:E}=c.current,k=En({layout:h,panelConstraints:E.map(L=>L.constraints)});yn(S,k)||(I(k),c.current.layout=k,w&&w(k),me(E,k,D.current))}}),[]),le(()=>{_.current.autoSaveId=t,_.current.direction=r,_.current.dragState=v,_.current.id=p,_.current.onLayout=l,_.current.storage=o}),_a({committedValuesRef:_,eagerValuesRef:c,groupId:p,layout:b,panelDataArray:c.current.panelDataArray,setLayout:I,panelGroupElement:y.current}),(0,u.useEffect)(()=>{let{panelDataArray:h}=c.current;if(t){if(b.length===0||b.length!==h.length)return;let w=Cn[t];w??(w=qa(Ta,Ha),Cn[t]=w);let S=[...h],E=new Map(H.current);w(t,S,E,b,o)}},[t,b,o]),(0,u.useEffect)(()=>{});let x=(0,u.useCallback)(h=>{let{onLayout:w}=_.current,{layout:S,panelDataArray:E}=c.current;if(h.constraints.collapsible){let k=E.map(O=>O.constraints),{collapsedSize:L=0,panelSize:j,pivotIndices:W}=ue(E,h,S);if(R(j!=null,`Panel size not found for panel "${h.id}"`),!ee(j,L)){H.current.set(h.id,j);let O=Ee({delta:he(E,h)===E.length-1?j-L:L-j,initialLayout:S,panelConstraints:k,pivotIndices:W,prevLayout:S,trigger:"imperative-api"});Oe(S,O)||(I(O),c.current.layout=O,w&&w(O),me(E,O,D.current))}}},[]),N=(0,u.useCallback)((h,w)=>{let{onLayout:S}=_.current,{layout:E,panelDataArray:k}=c.current;if(h.constraints.collapsible){let L=k.map(te=>te.constraints),{collapsedSize:j=0,panelSize:W=0,minSize:O=0,pivotIndices:Q}=ue(k,h,E),J=w??O;if(ee(W,j)){let te=H.current.get(h.id),Re=te!=null&&te>=J?te:J,ae=Ee({delta:he(k,h)===k.length-1?W-Re:Re-W,initialLayout:E,panelConstraints:L,pivotIndices:Q,prevLayout:E,trigger:"imperative-api"});Oe(E,ae)||(I(ae),c.current.layout=ae,S&&S(ae),me(k,ae,D.current))}}},[]),C=(0,u.useCallback)(h=>{let{layout:w,panelDataArray:S}=c.current,{panelSize:E}=ue(S,h,w);return R(E!=null,`Panel size not found for panel "${h.id}"`),E},[]),P=(0,u.useCallback)((h,w)=>{let{panelDataArray:S}=c.current;return Da({defaultSize:w,dragState:v,layout:b,panelData:S,panelIndex:he(S,h)})},[v,b]),M=(0,u.useCallback)(h=>{let{layout:w,panelDataArray:S}=c.current,{collapsedSize:E=0,collapsible:k,panelSize:L}=ue(S,h,w);return R(L!=null,`Panel size not found for panel "${h.id}"`),k===!0&&ee(L,E)},[]),U=(0,u.useCallback)(h=>{let{layout:w,panelDataArray:S}=c.current,{collapsedSize:E=0,collapsible:k,panelSize:L}=ue(S,h,w);return R(L!=null,`Panel size not found for panel "${h.id}"`),!k||oe(L,E)>0},[]),q=(0,u.useCallback)(h=>{let{panelDataArray:w}=c.current;w.push(h),w.sort((S,E)=>{let k=S.order,L=E.order;return k==null&&L==null?0:k==null?-1:L==null?1:k-L}),c.current.panelDataArrayChanged=!0,A()},[A]);le(()=>{if(c.current.panelDataArrayChanged){c.current.panelDataArrayChanged=!1;let{autoSaveId:h,onLayout:w,storage:S}=_.current,{layout:E,panelDataArray:k}=c.current,L=null;if(h){let W=ja(h,k,S);W&&(H.current=new Map(Object.entries(W.expandToSizes)),L=W.layout)}L??(L=Fa({panelDataArray:k}));let j=En({layout:L,panelConstraints:k.map(W=>W.constraints)});yn(E,j)||(I(j),c.current.layout=j,w&&w(j),me(k,j,D.current))}}),le(()=>{let h=c.current;return()=>{h.layout=[]}},[]);let B=(0,u.useCallback)(h=>{let w=!1,S=y.current;return S&&window.getComputedStyle(S,null).getPropertyValue("direction")==="rtl"&&(w=!0),function(E){E.preventDefault();let k=y.current;if(!k)return()=>null;let{direction:L,dragState:j,id:W,keyboardResizeBy:O,onLayout:Q}=_.current,{layout:J,panelDataArray:te}=c.current,{initialLayout:Re}=j??{},ae=hn(W,h,k),ne=La(E,h,L,j,O,k),yt=L==="horizontal";yt&&w&&(ne=-ne);let Tn=te.map(Hn=>Hn.constraints),be=Ee({delta:ne,initialLayout:Re??J,panelConstraints:Tn,pivotIndices:ae,prevLayout:J,trigger:tn(E)?"keyboard":"mouse-or-touch"}),bt=!Oe(J,be);(nn(E)||rn(E))&&G.current!=ne&&(G.current=ne,!bt&&ne!==0?yt?ut(h,ne<0?un:dn):ut(h,ne<0?cn:fn):ut(h,0)),bt&&(I(be),c.current.layout=be,Q&&Q(be),me(te,be,D.current))}},[]),V=(0,u.useCallback)((h,w)=>{let{onLayout:S}=_.current,{layout:E,panelDataArray:k}=c.current,L=k.map(Q=>Q.constraints),{panelSize:j,pivotIndices:W}=ue(k,h,E);R(j!=null,`Panel size not found for panel "${h.id}"`);let O=Ee({delta:he(k,h)===k.length-1?j-w:w-j,initialLayout:E,panelConstraints:L,pivotIndices:W,prevLayout:E,trigger:"imperative-api"});Oe(E,O)||(I(O),c.current.layout=O,S&&S(O),me(k,O,D.current))},[]),ye=(0,u.useCallback)((h,w)=>{let{layout:S,panelDataArray:E}=c.current,{collapsedSize:k=0,collapsible:L}=w,{collapsedSize:j=0,collapsible:W,maxSize:O=100,minSize:Q=0}=h.constraints,{panelSize:J}=ue(E,h,S);J!=null&&(L&&W&&ee(J,k)?ee(k,j)||V(h,j):J<Q?V(h,Q):J>O&&V(h,O))},[V]),ke=(0,u.useCallback)((h,w)=>{let{direction:S}=_.current,{layout:E}=c.current;if(!y.current)return;let k=$e(h,y.current);R(k,`Drag handle element not found for id "${h}"`);let L=bn(S,w);z({dragHandleId:h,dragHandleRect:k.getBoundingClientRect(),initialCursorPosition:L,initialLayout:E})},[]),re=(0,u.useCallback)(()=>{z(null)},[]),ce=(0,u.useCallback)(h=>{let{panelDataArray:w}=c.current,S=he(w,h);S>=0&&(w.splice(S,1),delete D.current[h.id],c.current.panelDataArrayChanged=!0,A())},[A]),We=(0,u.useMemo)(()=>({collapsePanel:x,direction:r,dragState:v,expandPanel:N,getPanelSize:C,getPanelStyle:P,groupId:p,isPanelCollapsed:M,isPanelExpanded:U,reevaluatePanelConstraints:ye,registerPanel:q,registerResizeHandle:B,resizePanel:V,startDragging:ke,stopDragging:re,unregisterPanel:ce,panelGroupElement:y.current}),[x,v,r,N,C,P,p,M,U,ye,q,B,V,ke,re,ce]),Be={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return(0,u.createElement)(Fe.Provider,{value:We},(0,u.createElement)(m,{...f,children:e,className:n,id:a,ref:y,style:{...Be,...g},[T.group]:"",[T.groupDirection]:r,[T.groupId]:p}))}var kn=(0,u.forwardRef)((t,e)=>(0,u.createElement)(zn,{...t,forwardedRef:e}));zn.displayName="PanelGroup",kn.displayName="forwardRef(PanelGroup)";function he(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function ue(t,e,n){let r=he(t,e),i=r===t.length-1?[r-1,r]:[r,r+1],a=n[r];return{...e.constraints,panelSize:a,pivotIndices:i}}function $a({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){(0,u.useEffect)(()=>{if(t||n==null||r==null)return;let i=$e(e,r);if(i==null)return;let a=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":l.preventDefault(),n(l);break;case"F6":{l.preventDefault();let s=i.getAttribute(T.groupId);R(s,`No group element found for id "${s}"`);let o=Ce(s,r),g=mn(s,e,r);R(g!==null,`No resize element found for id "${e}"`),o[l.shiftKey?g>0?g-1:o.length-1:g+1<o.length?g+1:0].focus();break}}};return i.addEventListener("keydown",a),()=>{i.removeEventListener("keydown",a)}},[r,t,e,n])}function ft({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:a,onClick:l,onDragging:s,onFocus:o,onPointerDown:g,onPointerUp:m,style:f={},tabIndex:p=0,tagName:y="div",...v}){let z=(0,u.useRef)(null),b=(0,u.useRef)({onClick:l,onDragging:s,onPointerDown:g,onPointerUp:m});(0,u.useEffect)(()=>{b.current.onClick=l,b.current.onDragging=s,b.current.onPointerDown=g,b.current.onPointerUp=m});let I=(0,u.useContext)(Fe);if(I===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:A,groupId:D,registerResizeHandle:H,startDragging:G,stopDragging:_,panelGroupElement:c}=I,x=nt(i),[N,C]=(0,u.useState)("inactive"),[P,M]=(0,u.useState)(!1),[U,q]=(0,u.useState)(null),B=(0,u.useRef)({state:N});le(()=>{B.current.state=N}),(0,u.useEffect)(()=>{if(n)q(null);else{let re=H(x);q(()=>re)}},[n,x,H]);let V=(r==null?void 0:r.coarse)??15,ye=(r==null?void 0:r.fine)??5;(0,u.useEffect)(()=>{if(n||U==null)return;let re=z.current;R(re,"Element ref not attached");let ce=!1;return ka(x,re,A,{coarse:V,fine:ye},(We,Be,h)=>{if(!Be){C("inactive");return}switch(We){case"down":{C("drag"),ce=!1,R(h,'Expected event to be defined for "down" action'),G(x,h);let{onDragging:w,onPointerDown:S}=b.current;w==null||w(!0),S==null||S();break}case"move":{let{state:w}=B.current;ce=!0,w!=="drag"&&C("hover"),R(h,'Expected event to be defined for "move" action'),U(h);break}case"up":{C("hover"),_();let{onClick:w,onDragging:S,onPointerUp:E}=b.current;S==null||S(!1),E==null||E(),ce||(w==null||w());break}}})},[V,A,n,ye,H,x,U,G,_]),$a({disabled:n,handleId:x,resizeHandler:U,panelGroupElement:c});let ke={touchAction:"none",userSelect:"none"};return(0,u.createElement)(y,{...v,children:t,className:e,id:i,onBlur:()=>{M(!1),a==null||a()},onFocus:()=>{M(!0),o==null||o()},ref:z,role:"separator",style:{...ke,...f},tabIndex:p,[T.groupDirection]:A,[T.groupId]:D,[T.resizeHandle]:"",[T.resizeHandleActive]:N==="drag"?"pointer":P?"keyboard":void 0,[T.resizeHandleEnabled]:!n,[T.resizeHandleId]:x,[T.resizeHandleState]:N})}ft.displayName="PanelResizeHandle";var Oa=Et();const Rn=t=>{let e=(0,Oa.c)(8),{onResize:n,startingWidth:r,minWidth:i,maxWidth:a}=t,l=(0,u.useRef)(null),s=(0,u.useRef)(null),o=(0,u.useRef)(null),g,m;e[0]!==a||e[1]!==i||e[2]!==n?(g=()=>{let v=l.current,z=s.current,b=o.current;if(!v||!z&&!b)return;let I=Number.parseInt(window.getComputedStyle(v).width,10),A=0,D=!1,H=null,G=C=>{if(!v||!D||!H)return;let P=C.clientX-A;A=C.clientX,I=H==="left"?I-P:I+P,i&&(I=Math.max(i,I)),a&&(I=Math.min(a,I)),v.style.width=`${I}px`},_=()=>{D&&(n==null||n(I),D=!1,H=null),document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",_)},c=(C,P)=>{C.preventDefault(),D=!0,H=P,A=C.clientX,document.addEventListener("mousemove",G),document.addEventListener("mouseup",_)},x=C=>c(C,"left"),N=C=>c(C,"right");return z&&z.addEventListener("mousedown",x),b&&b.addEventListener("mousedown",N),()=>{z&&z.removeEventListener("mousedown",x),b&&b.removeEventListener("mousedown",N),document.removeEventListener("mousemove",G),document.removeEventListener("mouseup",_)}},m=[i,a,n],e[0]=a,e[1]=i,e[2]=n,e[3]=g,e[4]=m):(g=e[3],m=e[4]),(0,u.useEffect)(g,m);let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f={left:s,right:o},e[5]=f):f=e[5];let p=r==="contentWidth"?"var(--content-width-medium)":`${r}px`,y;return e[6]===p?y=e[7]:(y={resizableDivRef:l,handleRefs:f,style:{width:p}},e[6]=p,e[7]=y),y};function In(t){t||window.dispatchEvent(new Event("resize"))}var Pn=Et(),F=wt(sr(),1);const Ua=()=>{let t=(0,Pn.c)(16),[e,n]=Ie(Jt),[r,i]=Ie(Kt),[a,l]=Ie(ca),[s,o]=Ie(Qt),g;t[0]!==i||t[1]!==n?(g=()=>{n(null),i(!1)},t[0]=i,t[1]=n,t[2]=g):g=t[2];let m=g;if(Ye(Ne.CONTEXT_AWARE_PANEL).length===0||!e||!r)return null;let f;t[3]!==s||t[4]!==a||t[5]!==o||t[6]!==l?(f=()=>(0,F.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,F.jsx)(It,{content:a?"Unpin panel":"Pin panel",children:(0,F.jsx)(Nt,{size:"xs",onPressedChange:()=>l(!a),pressed:a,"aria-label":a?"Unpin panel":"Pin panel",children:a?(0,F.jsx)(zr,{className:"w-4 h-4"}):(0,F.jsx)(hr,{className:"w-4 h-4"})})}),(0,F.jsx)(It,{content:s?(0,F.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,F.jsx)("span",{children:"Follow focused table"}),(0,F.jsx)("span",{className:"text-xs text-muted-foreground w-64",children:"The panel updates as cells that output tables are focused. Click to fix to the current cell."})]}):(0,F.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,F.jsx)("span",{children:"Focus on current table"}),(0,F.jsx)("span",{className:"text-xs text-muted-foreground w-64",children:"The panel is focused on the current table. Click to update based on which cell is focused."})]}),children:(0,F.jsx)(Nt,{size:"xs",onPressedChange:()=>o(!s),pressed:s,"aria-label":s?"Follow focused cell":"Fixed",children:(0,F.jsx)(Cr,{className:ur("w-4 h-4",s&&"text-primary")})})})]}),t[3]=s,t[4]=a,t[5]=o,t[6]=l,t[7]=f):f=t[7];let p=f,y;t[8]!==m||t[9]!==p?(y=()=>(0,F.jsxs)("div",{className:"mt-2 pb-7 mb-4 h-full overflow-auto",children:[(0,F.jsxs)("div",{className:"flex flex-row justify-between items-center mx-2",children:[p(),(0,F.jsx)(or,{variant:"linkDestructive",size:"icon",onClick:m,"aria-label":"Close selection panel",children:(0,F.jsx)(gr,{className:"w-4 h-4"})})]}),(0,F.jsx)(zt,{children:(0,F.jsx)(Lt,{name:Ne.CONTEXT_AWARE_PANEL})})]}),t[8]=m,t[9]=p,t[10]=y):y=t[10];let v=y;if(!a){let I;return t[11]===v?I=t[12]:(I=(0,F.jsx)(Ba,{children:v()}),t[11]=v,t[12]=I),I}let z;t[13]===Symbol.for("react.memo_cache_sentinel")?(z=(0,F.jsx)(ft,{onDragging:In,className:"resize-handle border-border z-20 no-print border-l"}),t[13]=z):z=t[13];let b;return t[14]===v?b=t[15]:(b=(0,F.jsxs)(F.Fragment,{children:[z,(0,F.jsx)(rt,{defaultSize:20,minSize:15,maxSize:80,children:v()})]}),t[14]=v,t[15]=b),b},Wa=t=>{let e=(0,Pn.c)(2),{children:n}=t,r;return e[0]===n?r=e[1]:(r=(0,F.jsx)(zt,{children:(0,F.jsx)(Rr,{name:Ne.CONTEXT_AWARE_PANEL,children:n})}),e[0]=n,e[1]=r),r};var Ba=({children:t})=>{let{resizableDivRef:e,handleRefs:n,style:r}=Rn({startingWidth:400,minWidth:300,maxWidth:1500});return(0,F.jsxs)("div",{className:"absolute z-40 right-0 h-full bg-background flex flex-row",children:[(0,F.jsx)("div",{ref:n.left,className:"w-1 h-full cursor-col-resize border-l"}),(0,F.jsx)("div",{ref:e,style:r,children:t})]})};function Ga(){var t=[...arguments];return(0,u.useMemo)(()=>e=>{t.forEach(n=>n(e))},t)}var Nn=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0;function Ue(t){let e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function pt(t){return"nodeType"in t}function ge(t){var e;return t?Ue(t)?t:pt(t)?((e=t.ownerDocument)==null?void 0:e.defaultView)??window:window:window}function An(t){let{Document:e}=ge(t);return t instanceof e}function _n(t){return Ue(t)?!1:t instanceof ge(t).HTMLElement}function Mn(t){return t instanceof ge(t).SVGElement}function Va(t){return t?Ue(t)?t.document:pt(t)?An(t)?t:_n(t)||Mn(t)?t.ownerDocument:document:document:document}var mt=Nn?u.useLayoutEffect:u.useEffect;function Ln(t){let e=(0,u.useRef)(t);return mt(()=>{e.current=t}),(0,u.useCallback)(function(){var n=[...arguments];return e.current==null?void 0:e.current(...n)},[])}function Xa(){let t=(0,u.useRef)(null);return[(0,u.useCallback)((e,n)=>{t.current=setInterval(e,n)},[]),(0,u.useCallback)(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[])]}function Ya(t,e){e===void 0&&(e=[t]);let n=(0,u.useRef)(t);return mt(()=>{n.current!==t&&(n.current=t)},e),n}function Ja(t,e){let n=(0,u.useRef)();return(0,u.useMemo)(()=>{let r=t(n.current);return n.current=r,r},[...e])}function Ka(t){let e=Ln(t),n=(0,u.useRef)(null);return[n,(0,u.useCallback)(r=>{r!==n.current&&(e==null||e(r,n.current)),n.current=r},[])]}function Qa(t){let e=(0,u.useRef)();return(0,u.useEffect)(()=>{e.current=t},[t]),e.current}var ht={};function Za(t,e){return(0,u.useMemo)(()=>{if(e)return e;let n=ht[t]==null?0:ht[t]+1;return ht[t]=n,t+"-"+n},[t,e])}function Fn(t){return function(e){return[...arguments].slice(1).reduce((n,r)=>{let i=Object.entries(r);for(let[a,l]of i){let s=n[a];s!=null&&(n[a]=s+t*l)}return n},{...e})}}var ei=Fn(1),ti=Fn(-1);function ni(t){return"clientX"in t&&"clientY"in t}function ri(t){if(!t)return!1;let{KeyboardEvent:e}=ge(t.target);return e&&t instanceof e}function ai(t){if(!t)return!1;let{TouchEvent:e}=ge(t.target);return e&&t instanceof e}function ii(t){if(ai(t)){if(t.touches&&t.touches.length){let{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){let{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return ni(t)?{x:t.clientX,y:t.clientY}:null}var gt=Object.freeze({Translate:{toString(t){if(!t)return;let{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;let{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[gt.Translate.toString(t),gt.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Dn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function li(t){return t.matches(Dn)?t:t.querySelector(Dn)}export{Kr as $,ft as A,sa as B,Za as C,Rn as D,In as E,Vt as F,ta as G,na as H,Xt as I,Bt as J,Gt as K,ua as L,Jt as M,da as N,rt as O,Qt as P,Zr as Q,oa as R,Qa as S,Wa as T,aa as U,Qe as V,ia as W,Wt as X,Ot as Y,Ut as Z,Xa as _,ii as a,Dr as at,Ja as b,An as c,Ye as ct,pt as d,Qr as et,Mn as f,Ln as g,Ga as h,li as i,Ne as it,Kt as j,kn as k,_n as l,Pe as lt,ti as m,ei as n,Br as nt,Va as o,Fr as ot,Ue as p,ea as q,Nn as r,qt as rt,ge as s,Lt as st,gt as t,_e as tt,ri as u,mt as v,Ua as w,Ka as x,Ya as y,Le as z};
