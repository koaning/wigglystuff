var lr=Object.defineProperty;var St=y=>{throw TypeError(y)};var ur=(y,b,_)=>b in y?lr(y,b,{enumerable:!0,configurable:!0,writable:!0,value:_}):y[b]=_;var a=(y,b,_)=>ur(y,typeof b!="symbol"?b+"":b,_),qe=(y,b,_)=>b.has(y)||St("Cannot "+_);var l=(y,b,_)=>(qe(y,b,"read from private field"),_?_.call(y):b.get(y)),k=(y,b,_)=>b.has(y)?St("Cannot add the same private member more than once"):b instanceof WeakSet?b.add(y):b.set(y,_),F=(y,b,_,ce)=>(qe(y,b,"write to private field"),ce?ce.call(y,_):b.set(y,_),_),$=(y,b,_)=>(qe(y,b,"access private method"),_);import{s as kt}from"./chunk-LvLJmgfZ.js";import{i as ie,l as we,p as V,u as dr}from"./useEvent-BhXAndur.js";import{t as cr}from"./react-Bj1aDYRI.js";import{Kr as fr,Ur as hr,Yr as mr,b as pr,ei as gr,mn as yr,qr as br,ti as ae,y as wr,__tla as vr}from"./cells-Botr-aL3.js";import{t as Ft}from"./compiler-runtime-B3qBwwSJ.js";import{t as xr}from"./get-6uJrSKbw.js";import{t as Er}from"./assertNever-CBU83Y6o.js";import{t as _r}from"./debounce-B3mjKxHe.js";import{t as Cr}from"./_baseSet-5Rdwpmr3.js";import{d as g,p as R}from"./hotkeys-BHHWjLlp.js";import{t as Rr}from"./invariant-CAG_dYON.js";import{S as Sr}from"./utils-YqBXNpsM.js";import{S as kr,n as Fr}from"./config-Q0O7_stz.js";import{a as Mr}from"./switch-Vbll2pdD.js";import{n as Mt}from"./globals-DVVNoYwt.js";import{t as Nt}from"./ErrorBoundary-B9Ifj8Jf.js";import{t as Nr}from"./jsx-runtime-ZmTK25f3.js";import{t as qr}from"./button-CZ3Cs4qb.js";import{t as Pr}from"./cn-BKtXLv3a.js";import{Q as jr,X as qt,Y as Pe,__tla as Lr}from"./JsonOutput-ChH_9MPt.js";import{t as Ar}from"./createReducer-B3rBsy4P.js";import{t as je}from"./requests-B4FYHTZl.js";import{t as Pt}from"./createLucideIcon-BCdY6lG5.js";import{t as Ir}from"./x-ZP5cObgf.js";import{a as jt,l as Tr,r as Lt}from"./markdown-renderer-DqiLSa6X.js";import{t as Ur}from"./DeferredRequestRegistry-CMf25YiV.js";import{t as Or}from"./preload-helper-D2MJg03u.js";import{t as At}from"./Deferred-DxQeE5uh.js";import{t as It}from"./uuid-DXdzqzcr.js";import{t as Wr}from"./use-toast-BDYuj3zG.js";import{t as Tt}from"./tooltip-CMQz28hC.js";import{t as Ut}from"./mode-C1hn9AVp.js";import{n as zr,r as Dr,t as Br}from"./share-ipf2hrOh.js";import{t as Hr}from"./blob-D-eV0cU3.js";import{r as $r,t as Vr}from"./react-resizable-panels.browser.esm-Da3ksQXL.js";import{t as Ot}from"./toggle-zVW4FXNz.js";let Le,Wt,Ae,zt,Ie,Te,Dt,Ue,Bt,Oe,Ht,$t,Vt,Xt,Yt,We,Qt,Kt,ze,Gt,Jt,ve,De,Zt,en,Be,oe,tn,nn,rn,sn,He,xe,Ee,$e,Ve,Xe,an,on,ln,Ye,Qe,Ke,le,un,dn,cn,fn,hn,ue,mn,Ge,pn,G,Je,_e,de,gn,Ce,yn,bn,wn,Ze,Xr=Promise.all([(()=>{try{return vr}catch{}})(),(()=>{try{return Lr}catch{}})()]).then(async()=>{var X,ge,xn,xt,U,Y,I,Et,W,_t,O,ne,J,Re,Ct,Rt,ye,z,D,Z,M,Q,B,En,_n,Cn,be;function y(t,e,n){return t==null?t:Cr(t,e,n)}let b,_;le=y,b=Pt("crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),_=Pt("pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);function ce(t){return{all:t||(t=new Map),on:function(e,n){var r=t.get(e);r?r.push(n):t.set(e,[n])},off:function(e,n){var r=t.get(e);r&&(n?r.splice(r.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var r=t.get(e);r&&r.slice().map(function(s){s(n)}),(r=t.get("*"))&&r.slice().map(function(s){s(e,n)})}}}var c=kt(cr(),1),Se=(0,c.createContext)(null),Sn=t=>{let{controller:e}=(0,c.useContext)(Se),n=c.useRef(Symbol("fill"));return(0,c.useEffect)(()=>(e.mount({name:t.name,ref:n.current,children:t.children}),()=>{e.unmount({name:t.name,ref:n.current})}),[]),(0,c.useEffect)(()=>{e.update({name:t.name,ref:n.current,children:t.children})}),null},kn=Object.defineProperty,Fn=(t,e,n)=>e in t?kn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tt=(t,e,n)=>(Fn(t,typeof e=="symbol"?e:e+"",n),n),nt=console,Mn=class{constructor(t){tt(this,"_bus"),tt(this,"_db"),this._bus=t,this.handleFillMount=this.handleFillMount.bind(this),this.handleFillUpdated=this.handleFillUpdated.bind(this),this.handleFillUnmount=this.handleFillUnmount.bind(this),this._db={byName:new Map,byFill:new Map}}mount(){this._bus.on("fill-mount",this.handleFillMount),this._bus.on("fill-updated",this.handleFillUpdated),this._bus.on("fill-unmount",this.handleFillUnmount)}unmount(){this._bus.off("fill-mount",this.handleFillMount),this._bus.off("fill-updated",this.handleFillUpdated),this._bus.off("fill-unmount",this.handleFillUnmount)}handleFillMount({fill:t}){let e=c.Children.toArray(t.children),n=t.name,r={fill:t,children:e,name:n},s=this._db.byName.get(n);s?(s.components.push(r),s.listeners.forEach(i=>i([...s.components]))):this._db.byName.set(n,{listeners:[],components:[r]}),this._db.byFill.set(t.ref,r)}handleFillUpdated({fill:t}){let e=this._db.byFill.get(t.ref),n=c.Children.toArray(t.children);if(e){e.children=n;let r=this._db.byName.get(e.name);if(r)r.listeners.forEach(s=>s([...r.components]));else throw Error("registration was expected to be defined")}else{nt.error("[handleFillUpdated] component was expected to be defined");return}}handleFillUnmount({fill:t}){let e=this._db.byFill.get(t.ref);if(!e){nt.error("[handleFillUnmount] component was expected to be defined");return}let n=e.name,r=this._db.byName.get(n);if(!r)throw Error("registration was expected to be defined");r.components=r.components.filter(s=>s!==e),this._db.byFill.delete(t.ref),r.listeners.length===0&&r.components.length===0?this._db.byName.delete(n):r.listeners.forEach(s=>s([...r.components]))}onComponentsChange(t,e){let n=this._db.byName.get(t);n?(n.listeners.push(e),e(n.components)):(this._db.byName.set(t,{listeners:[e],components:[]}),e([]))}getFillsByName(t){let e=this._db.byName.get(t);return e?e.components.map(n=>n.fill):[]}getChildrenByName(t){let e=this._db.byName.get(t);return e?e.components.map(n=>n.children).reduce((n,r)=>n.concat(r),[]):[]}removeOnComponentsChange(t,e){let n=this._db.byName.get(t);if(!n)throw Error("expected registration to be defined");let r=n.listeners;r.splice(r.indexOf(e),1)}},Nn=Object.defineProperty,qn=(t,e,n)=>e in t?Nn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pn=(t,e,n)=>(qn(t,typeof e=="symbol"?e:e+"",n),n),rt=class{constructor(){Pn(this,"bus",ce())}mount(t){this.bus.emit("fill-mount",{fill:t})}unmount(t){this.bus.emit("fill-unmount",{fill:t})}update(t){this.bus.emit("fill-updated",{fill:t})}};function jn(t){let e=t||new rt;return{controller:e,manager:new Mn(e.bus)}}hn=({controller:t,children:e})=>{let[n]=c.useState(()=>{let r=jn(t);return r.manager.mount(),r});return c.useEffect(()=>()=>{n.manager.unmount()},[]),c.createElement(Se.Provider,{value:n},e)},xe=function(t,e){let[n,r]=(0,c.useState)([]),{manager:s}=(0,c.useContext)(Se);return(0,c.useEffect)(()=>(s.onComponentsChange(t,r),()=>{s.removeOnComponentsChange(t,r)}),[t]),n.flatMap((i,d)=>{let{children:u}=i;return u.map((p,w)=>{if(typeof p=="number"||typeof p=="string")throw Error("Only element children will work here");return c.cloneElement(p,{key:d.toString()+w.toString(),...e})})})},Je=t=>{let e=xe(t.name,t.childProps);if(typeof t.children=="function"){let n=t.children(e);if(c.isValidElement(n)||n===null)return n;throw Error("Slot rendered with function must return a valid React Element.")}return e},pn=V(null);var{valueAtom:Ln,useActions:An}=Ar(()=>({banners:[]}),{addBanner:(t,e)=>({...t,banners:[...t.banners,{...e,id:It()}]}),removeBanner:(t,e)=>({...t,banners:t.banners.filter(n=>n.id!==e)}),clearBanners:t=>({...t,banners:[]})});ln=()=>dr(Ln),rn=function(){return An()},cn=new rt,de={SIDEBAR:"sidebar",CONTEXT_AWARE_PANEL:"context-aware-panel"};let st,it,at;st=class{constructor(){a(this,"subscriptions",new Map)}addSubscription(t,e){var n;this.subscriptions.has(t)||this.subscriptions.set(t,new Set),(n=this.subscriptions.get(t))==null||n.add(e)}removeSubscription(t,e){var n;(n=this.subscriptions.get(t))==null||n.delete(e)}notify(t,e){for(let n of this.subscriptions.get(t)??[])n(e)}},$e=class et{constructor(e){a(this,"subscriptions",new st);this.producer=e}static withProducerCallback(e){return new et(e)}static empty(){return new et}startProducer(){this.producer&&this.producer(e=>{this.subscriptions.notify("message",e)})}connect(){return new Promise(e=>setTimeout(e,0)).then(()=>{this.subscriptions.notify("open",new Event("open"))})}get readyState(){return WebSocket.OPEN}reconnect(e,n){this.close(),this.connect()}close(){this.subscriptions.notify("close",new Event("close"))}send(e){return this.subscriptions.notify("message",new MessageEvent("message",{data:e})),Promise.resolve()}addEventListener(e,n){this.subscriptions.addSubscription(e,n),e==="open"&&n(new Event("open")),e==="message"&&this.startProducer()}removeEventListener(e,n){this.subscriptions.removeSubscription(e,n)}},it=1e10,at=1e3;function fe(t,e){let n=t.map(r=>`"${r}"`).join(", ");return Error(`This RPC instance cannot ${e} because the transport did not provide one or more of these methods: ${n}`)}function In(t={}){let e={};function n(o){e=o}let r={};function s(o){var m;r.unregisterHandler&&r.unregisterHandler(),r=o,(m=r.registerHandler)==null||m.call(r,se)}let i;function d(o){if(typeof o=="function"){i=o;return}i=(m,x)=>{let f=o[m];if(f)return f(x);let v=o._;if(!v)throw Error(`The requested method has no handler: ${m}`);return v(m,x)}}let{maxRequestTime:u=at}=t;t.transport&&s(t.transport),t.requestHandler&&d(t.requestHandler),t._debugHooks&&n(t._debugHooks);let p=0;function w(){return p<=it?++p:p=0}let C=new Map,E=new Map;function N(o,...m){let x=m[0];return new Promise((f,v)=>{var te;if(!r.send)throw fe(["send"],"make requests");let T=w(),K={type:"request",id:T,method:o,params:x};C.set(T,{resolve:f,reject:v}),u!==1/0&&E.set(T,setTimeout(()=>{E.delete(T),v(Error("RPC request timed out."))},u)),(te=e.onSend)==null||te.call(e,K),r.send(K)})}let q=new Proxy(N,{get:(o,m,x)=>m in o?Reflect.get(o,m,x):f=>N(m,f)}),P=q;function j(o,...m){var v;let x=m[0];if(!r.send)throw fe(["send"],"send messages");let f={type:"message",id:o,payload:x};(v=e.onSend)==null||v.call(e,f),r.send(f)}let L=new Proxy(j,{get:(o,m,x)=>m in o?Reflect.get(o,m,x):f=>j(m,f)}),S=L,A=new Map,H=new Set;function ee(o,m){var x;if(!r.registerHandler)throw fe(["registerHandler"],"register message listeners");if(o==="*"){H.add(m);return}A.has(o)||A.set(o,new Set),(x=A.get(o))==null||x.add(m)}function re(o,m){var x,f;if(o==="*"){H.delete(m);return}(x=A.get(o))==null||x.delete(m),((f=A.get(o))==null?void 0:f.size)===0&&A.delete(o)}async function se(o){var m,x;if((m=e.onReceive)==null||m.call(e,o),!("type"in o))throw Error("Message does not contain a type.");if(o.type==="request"){if(!r.send||!i)throw fe(["send","requestHandler"],"handle requests");let{id:f,method:v,params:T}=o,K;try{K={type:"response",id:f,success:!0,payload:await i(v,T)}}catch(te){if(!(te instanceof Error))throw te;K={type:"response",id:f,success:!1,error:te.message}}(x=e.onSend)==null||x.call(e,K),r.send(K);return}if(o.type==="response"){let f=E.get(o.id);f!=null&&clearTimeout(f);let{resolve:v,reject:T}=C.get(o.id)??{};o.success?v==null||v(o.payload):T==null||T(Error(o.error));return}if(o.type==="message"){for(let v of H)v(o.id,o.payload);let f=A.get(o.id);if(!f)return;for(let v of f)v(o.payload);return}throw Error(`Unexpected RPC message type: ${o.type}`)}return{setTransport:s,setRequestHandler:d,request:q,requestProxy:P,send:L,sendProxy:S,addMessageListener:ee,removeMessageListener:re,proxy:{send:S,request:P},_setDebugHooks:n}}function Tn(t){return In(t)}var ot="[transport-id]";function Un(t,e){let{transportId:n}=e;return n==null?t:{[ot]:n,data:t}}function On(t,e){let{transportId:n,filter:r}=e,s=r==null?void 0:r();if(n!=null&&s!=null)throw Error("Cannot use both `transportId` and `filter` at the same time");let i=t;if(n){if(t[ot]!==n)return[!0];i=t.data}return s===!1?[!0]:[!1,i]}function Wn(t,e={}){let{transportId:n,filter:r,remotePort:s}=e,i=t,d=s??t,u;return{send(p){d.postMessage(Un(p,{transportId:n}))},registerHandler(p){u=w=>{let C=w.data,[E,N]=On(C,{transportId:n,filter:()=>r==null?void 0:r(w)});E||p(N)},i.addEventListener("message",u)},unregisterHandler(){u&&i.removeEventListener("message",u)}}}function zn(t,e){return Wn(t,e)}function lt(t){return Tn({transport:zn(t,{transportId:"marimo-transport"}),maxRequestTime:2e4,_debugHooks:{onSend:e=>{g.debug("[rpc] Parent -> Worker",e)},onReceive:e=>{g.debug("[rpc] Worker -> Parent",e)}}})}Le=V("Initializing..."),Kt=V(t=>{let e=t(wr),n=Object.values(e.cellRuntime);return n.some(r=>!Tr(r.output))?!0:n.every(r=>r.status==="idle")});var ut=zr(),dt="marimo:file",ct=new hr(null);const Dn={saveFile(t){ct.set(dt,t)},readFile(){return ct.get(dt)}};var Bn={saveFile(t){ae.setCodeForHash((0,ut.compressToEncodedURIComponent)(t))},readFile(){let t=ae.getCodeFromHash()||ae.getCodeFromSearchParam();return t?(0,ut.decompressFromEncodedURIComponent)(t):null}};const Hn={saveFile(t){},readFile(){let t=document.querySelector("marimo-code");return t?decodeURIComponent(t.textContent||"").trim():null}};var $n={saveFile(t){},readFile(){if(window.location.hostname!=="marimo.app")return null;let t=new URL("files/wasm-intro.py",document.baseURI);return fetch(t.toString()).then(e=>e.ok?e.text():null).catch(()=>null)}};const Vn={saveFile(t){},readFile(){return ie.get(fr)??null}};var Xn={saveFile(t){},readFile(){return["import marimo","app = marimo.App()","","@app.cell","def __():","  return","",'if __name__ == "__main__":',"  app.run()"].join(`
`)}},ft=class{constructor(t){this.stores=t}insert(t,e){this.stores.splice(t,0,e)}saveFile(t){this.stores.forEach(e=>e.saveFile(t))}readFile(){for(let t of this.stores){let e=t.readFile();if(e)return e}return null}};let he;oe=new ft([Vn,Hn,Bn]),he=new ft([Dn,$n,Xn]),Be=class vn{constructor(){a(this,"initialized",new At);a(this,"sendRename",async({filename:e})=>(e===null||(ae.setFilename(e),await this.rpc.proxy.request.bridge({functionName:"rename_file",payload:e})),null));a(this,"sendSave",async e=>{if(!this.saveRpc)return g.warn("Save RPC not initialized"),null;await this.saveRpc.saveNotebook(e);let n=await this.readCode();return n.contents&&(oe.saveFile(n.contents),he.saveFile(n.contents)),this.rpc.proxy.request.saveNotebook(e).catch(r=>{g.error(r)}),null});a(this,"sendCopy",async()=>{R()});a(this,"sendStdin",async e=>(await this.rpc.proxy.request.bridge({functionName:"put_input",payload:e.text}),null));a(this,"sendPdb",async()=>{R()});a(this,"sendRun",async e=>(await this.rpc.proxy.request.loadPackages(e.codes.join(`
`)),await this.putControlRequest({type:"execute-cells",...e}),null));a(this,"sendRunScratchpad",async e=>(await this.rpc.proxy.request.loadPackages(e.code),await this.putControlRequest({type:"execute-scratchpad",...e}),null));a(this,"sendInterrupt",async()=>(this.interruptBuffer!==void 0&&(this.interruptBuffer[0]=2),null));a(this,"sendShutdown",async()=>(window.close(),null));a(this,"sendFormat",async e=>await this.rpc.proxy.request.bridge({functionName:"format",payload:e}));a(this,"sendDeleteCell",async e=>(await this.putControlRequest({type:"delete-cell",...e}),null));a(this,"sendInstallMissingPackages",async e=>(this.putControlRequest({type:"install-packages",...e}),null));a(this,"sendCodeCompletionRequest",async e=>(ie.get(pr)||await this.rpc.proxy.request.bridge({functionName:"code_complete",payload:e}),null));a(this,"saveUserConfig",async e=>(await this.rpc.proxy.request.bridge({functionName:"save_user_config",payload:e}),Mr.post("/kernel/save_user_config",e,{baseUrl:"/"}).catch(n=>(g.error(n),null))));a(this,"saveAppConfig",async e=>(await this.rpc.proxy.request.bridge({functionName:"save_app_config",payload:e}),null));a(this,"saveCellConfig",async e=>(await this.putControlRequest({type:"update-cell-config",...e}),null));a(this,"sendRestart",async()=>{let e=await this.readCode();return e.contents&&(oe.saveFile(e.contents),he.saveFile(e.contents)),Dr(),null});a(this,"readCode",async()=>this.saveRpc?{contents:await this.saveRpc.readNotebook()}:(g.warn("Save RPC not initialized"),{contents:""}));a(this,"readSnippets",async()=>await this.rpc.proxy.request.bridge({functionName:"read_snippets",payload:void 0}));a(this,"openFile",async({path:e})=>{let n=Br({code:null,baseUrl:window.location.origin});return window.open(n,"_blank"),null});a(this,"sendListFiles",async e=>await this.rpc.proxy.request.bridge({functionName:"list_files",payload:e}));a(this,"sendSearchFiles",async e=>await this.rpc.proxy.request.bridge({functionName:"search_files",payload:e}));a(this,"sendComponentValues",async e=>(await this.putControlRequest({type:"update-ui-element",...e,token:It()}),null));a(this,"sendInstantiate",async e=>null);a(this,"sendFunctionRequest",async e=>(await this.putControlRequest({type:"invoke-function",...e}),null));a(this,"sendCreateFileOrFolder",async e=>await this.rpc.proxy.request.bridge({functionName:"create_file_or_directory",payload:e}));a(this,"sendDeleteFileOrFolder",async e=>await this.rpc.proxy.request.bridge({functionName:"delete_file_or_directory",payload:e}));a(this,"sendRenameFileOrFolder",async e=>await this.rpc.proxy.request.bridge({functionName:"move_file_or_directory",payload:e}));a(this,"sendUpdateFile",async e=>await this.rpc.proxy.request.bridge({functionName:"update_file",payload:e}));a(this,"sendFileDetails",async e=>await this.rpc.proxy.request.bridge({functionName:"file_details",payload:e}));a(this,"exportAsHTML",async e=>await this.rpc.proxy.request.bridge({functionName:"export_html",payload:e}));a(this,"exportAsMarkdown",async e=>await this.rpc.proxy.request.bridge({functionName:"export_markdown",payload:e}));a(this,"previewDatasetColumn",async e=>(await this.putControlRequest({type:"preview-dataset-column",...e}),null));a(this,"previewSQLTable",async e=>(await this.putControlRequest({type:"preview-sql-table",...e}),null));a(this,"previewSQLTableList",async e=>(await this.putControlRequest({type:"list-sql-tables",...e}),null));a(this,"previewDataSourceConnection",async e=>(await this.putControlRequest({type:"list-data-source-connection",...e}),null));a(this,"validateSQL",async e=>(await this.putControlRequest({type:"validate-sql",...e}),null));a(this,"sendModelValue",async e=>(await this.putControlRequest({type:"model",...e}),null));a(this,"syncCellIds",()=>Promise.resolve(null));a(this,"addPackage",async e=>this.rpc.proxy.request.addPackage(e));a(this,"removePackage",async e=>this.rpc.proxy.request.removePackage(e));a(this,"getPackageList",async()=>await this.rpc.proxy.request.listPackages());a(this,"getDependencyTree",async()=>({tree:{dependencies:[],name:"",tags:[],version:null}}));a(this,"listSecretKeys",async e=>(await this.putControlRequest({type:"list-secret-keys",...e}),null));a(this,"getUsageStats",R);a(this,"openTutorial",R);a(this,"getRecentFiles",R);a(this,"getWorkspaceFiles",R);a(this,"getRunningNotebooks",R);a(this,"shutdownSession",R);a(this,"exportAsPDF",R);a(this,"autoExportAsHTML",R);a(this,"autoExportAsMarkdown",R);a(this,"autoExportAsIPYNB",R);a(this,"updateCellOutputs",R);a(this,"writeSecret",R);a(this,"invokeAiTool",R);a(this,"clearCache",R);a(this,"getCacheInfo",R);kr()&&(this.rpc=lt(new Worker(new URL(""+new URL("worker-BPV9SmHz.js",import.meta.url).href,""+import.meta.url),{type:"module",name:Mt()})),this.rpc.addMessageListener("ready",()=>{this.startSession()}),this.rpc.addMessageListener("initialized",()=>{this.saveRpc=this.getSaveWorker(),this.setInterruptBuffer(),this.initialized.resolve()}),this.rpc.addMessageListener("initializingMessage",({message:e})=>{ie.set(Le,e)}),this.rpc.addMessageListener("initializedError",({error:e})=>{this.initialized.status==="resolved"&&(g.error(e),Wr({title:"Error initializing",description:e,variant:"danger"})),this.initialized.reject(Error(e))}),this.rpc.addMessageListener("kernelMessage",({message:e})=>{var n;(n=this.messageConsumer)==null||n.call(this,new MessageEvent("message",{data:e}))}))}static get INSTANCE(){let e="_marimo_private_PyodideBridge";return window[e]||(window[e]=new vn),window[e]}getSaveWorker(){return Ut()==="read"?(g.debug("Skipping SaveWorker in read-mode"),{readFile:R,readNotebook:R,saveNotebook:R}):lt(new Worker(new URL(""+new URL("save-worker-CtJsIYIM.js",import.meta.url).href,""+import.meta.url),{type:"module",name:Mt()})).proxy.request}async startSession(){let e=await oe.readFile(),n=await he.readFile(),r=ie.get(br)??ae.getFilename(),s=ie.get(Sr),i={},d=new URLSearchParams(window.location.search);for(let u of d.keys()){let p=d.getAll(u);i[u]=p.length===1?p[0]:p}await this.rpc.proxy.request.startSession({queryParameters:i,code:e||n||"",filename:r,userConfig:{...s,runtime:{...s.runtime,auto_instantiate:Ut()==="read"?!0:s.runtime.auto_instantiate}}})}setInterruptBuffer(){crossOriginIsolated?(this.interruptBuffer=new Uint8Array(new SharedArrayBuffer(1)),this.rpc.proxy.request.setInterruptBuffer(this.interruptBuffer)):g.warn("Not running in a secure context; interrupts are not available.")}attachMessageConsumer(e){this.messageConsumer=e,this.rpc.proxy.send.consumerReady({})}async putControlRequest(e){await this.rpc.proxy.request.bridge({functionName:"put_control_request",payload:e})}},en=function(){return $e.withProducerCallback(t=>{Be.INSTANCE.attachMessageConsumer(t)})},mn=function(t=Pe()){let e=window.fetch;return window.fetch=async(n,r)=>{let s=n instanceof Request?n.url:n.toString();if(s.startsWith("data:"))return e(n,r);try{let i=me(s,t);if(i){let d=await(await e(i)).arrayBuffer();return new Response(d,{headers:{"Content-Type":Yn(s)}})}return e(n,r)}catch(i){return g.error("Error parsing URL",i),e(n,r)}},()=>{window.fetch=e}};function Yn(t){return t.endsWith(".csv")?"text/csv":t.endsWith(".json")?"application/json":t.endsWith(".txt")?"text/plain":"application/octet-stream"}Ht=function(t,e=Pe()){let n=t.http.bind(t),r=t.load.bind(t);return t.http=async s=>{let i=me(s,e);if(i)return await window.fetch(i).then(d=>d.text());try{return await n(s)}catch(d){if(s.startsWith("data:"))return await window.fetch(s).then(u=>u.text());throw d}},t.load=async s=>{let i=me(s,e);if(i)return await window.fetch(i).then(d=>d.text());try{return await r(s)}catch(d){if(s.startsWith("data:"))return await window.fetch(s).then(u=>u.text());throw d}},()=>{t.http=n,t.load=r}};function ht(t){return t.startsWith(".")?t.slice(1):t}function Qn(t,e=Pe()){let n=me(t,e);if(!n)return t;let r=Hr(n);return URL.createObjectURL(r)}function me(t,e){let n=document.baseURI;n.startsWith("blob:")&&(n=n.replace("blob:",""));let r=new URL(t,n).pathname,s=mt(t),i=mt(r);return e[t]||e[ht(t)]||e[r]||e[ht(r)]||s&&e[s]||i&&e[i]}function mt(t){let e=t.indexOf("/@file/");return e===-1?null:t.slice(e)}function ke(t,e=[]){let n=[];if(t instanceof DataView)n.push(e);else if(Array.isArray(t))for(let[r,s]of t.entries())n.push(...ke(s,[...e,r]));else if(typeof t=="object"&&t)for(let[r,s]of Object.entries(t))n.push(...ke(s,[...e,r]));return n}function Kn(t){let e=ke(t);if(e.length===0)return{state:t,buffers:[],bufferPaths:[]};let n=structuredClone(t),r=[],s=[];for(let i of e){let d=xr(t,i);if(d instanceof DataView){let u=jt(d);r.push(u),s.push(i),le(n,i,u)}}return{state:n,buffers:r,bufferPaths:s}}function pt(t){let{state:e,bufferPaths:n,buffers:r}=t;if(!n||n.length===0)return e;r&&Rr(r.length===n.length,"Buffers and buffer paths not the same length");let s=e;for(let[i,d]of n.entries()){let u=r==null?void 0:r[i];if(u==null){g.warn("[anywidget] Could not find buffer at path",d);continue}typeof u=="string"?le(s,d,Lt(u)):le(s,d,u)}return s}const gt={invoke:async()=>{let t="anywidget.invoke not supported in marimo. Please file an issue at https://github.com/marimo-team/marimo/issues";throw g.warn(t),Error(t)}};function Gn(t){if(typeof AbortSignal.any=="function")return AbortSignal.any(t);let e=new AbortController;for(let n of t){if(n.aborted)return e.abort(n.reason),e.signal;n.addEventListener("abort",()=>e.abort(n.reason),{once:!0})}return e.signal}var Jn=(xt=class{constructor(){k(this,ge);k(this,X,new Map)}getModule(t,e){let n=l(this,X).get(e);if(n)return n;let r=$(this,ge,xn).call(this,t).catch(s=>{throw l(this,X).delete(e),s});return l(this,X).set(e,r),r}invalidate(t){g.debug(`[WidgetDefRegistry] Invalidating module cache for hash=${t}`),l(this,X).delete(t)}},X=new WeakMap,ge=new WeakSet,xn=async function(t){let e=Fr(t).toString();return qt()&&(e=Qn(e)),Or(()=>import(e).then(async n=>(await n.__tla,n)),[],import.meta.url)},xt),Zn=(Et=class{constructor(){k(this,U);k(this,Y);k(this,I)}async bind(t,e){var i,d;if(l(this,I)&&l(this,Y)===t)return l(this,I);l(this,I)&&l(this,Y)!==t&&(g.debug("[WidgetBinding] Hot-reload detected, aborting previous binding"),(i=l(this,U))==null||i.abort(),F(this,U,void 0),F(this,I,void 0)),F(this,Y,t),F(this,U,new AbortController);let n=l(this,U).signal,r=typeof t=="function"?await t():t,s=await((d=r.initialize)==null?void 0:d.call(r,{model:e,experimental:gt}));return s&&n.addEventListener("abort",s),F(this,I,async(u,p)=>{var C;let w=await((C=r.render)==null?void 0:C.call(r,{model:e,el:u,experimental:gt}));w&&Gn([p,n]).addEventListener("abort",()=>{let E=p.aborted?"view unmount":"binding destroyed";g.debug(`[WidgetBinding] Render cleanup triggered (reason: ${E})`),w()})}),l(this,I)}destroy(){var t;g.debug("[WidgetBinding] Destroying binding, aborting initialize lifecycle"),(t=l(this,U))==null||t.abort(),F(this,U,void 0),F(this,Y,void 0),F(this,I,void 0)}},U=new WeakMap,Y=new WeakMap,I=new WeakMap,Et),er=(_t=class{constructor(){k(this,W,new Map)}getOrCreate(t){let e=l(this,W).get(t);return e||(e=new Zn,l(this,W).set(t,e)),e}destroy(t){let e=l(this,W).get(t);e&&(g.debug(`[BindingManager] Destroying binding for model=${t}`),e.destroy(),l(this,W).delete(t))}has(t){return l(this,W).has(t)}},W=new WeakMap,_t);$t=new Jn,Ue=new er;var tr=(Ct=class{constructor(t=1e4){k(this,J);k(this,O,new Map);k(this,ne);F(this,ne,t)}get(t){let e=$(this,J,Re).call(this,t);return e.deferred.status==="pending"&&setTimeout(()=>{e.deferred.status==="pending"&&(e.deferred.reject(Error(`Model not found for key: ${t}`)),l(this,O).delete(t))},l(this,ne)),e.deferred.promise}create(t,e){let n=$(this,J,Re).call(this,t);n.deferred.resolve(e(n.controller.signal))}set(t,e){$(this,J,Re).call(this,t).deferred.resolve(e)}getSync(t){let e=l(this,O).get(t);if(e&&e.deferred.status==="resolved")return e.deferred.value}delete(t){var e;g.debug(`[ModelManager] Deleting model=${t}, aborting lifecycle signal`),(e=l(this,O).get(t))==null||e.controller.abort(),l(this,O).delete(t)}},O=new WeakMap,ne=new WeakMap,J=new WeakSet,Re=function(t){let e=l(this,O).get(t);return e||(e={deferred:new At,controller:new AbortController},l(this,O).set(t,e)),e},Ct),yt=Symbol("marimo");function Fe(t){return t[yt]}ve=new tr;var nr=(Rt=yt,Q=class{constructor(e,n,r){k(this,B);k(this,ye,"change");k(this,z);k(this,D);k(this,Z);k(this,M,{});a(this,Rt,{updateAndEmitDiffs:e=>$(this,B,_n).call(this,e),emitCustomMessage:(e,n)=>$(this,B,Cn).call(this,e,n)});a(this,"widget_manager",{async get_model(e){let n=await Q._modelManager.get(e);if(!n)throw Error(`Model not found with id: ${e}. This is likely because the model was not registered.`);return n}});k(this,be,_r(()=>{let e=l(this,M)[l(this,ye)];if(e)for(let n of e)try{n()}catch(r){g.error("Error emitting event",r)}},0));F(this,D,e),F(this,Z,n),F(this,z,new Map),r&&r.addEventListener("abort",()=>{g.debug("[Model] Signal aborted, clearing all listeners"),F(this,M,{})})}off(e,n){var r;if(!e){F(this,M,{});return}if(!n){l(this,M)[e]=new Set;return}(r=l(this,M)[e])==null||r.delete(n)}send(e,n,r){let s=(r??[]).map(i=>i instanceof ArrayBuffer?new DataView(i):new DataView(i.buffer,i.byteOffset,i.byteLength));return l(this,Z).sendCustomMessage(e,s).then(()=>n==null?void 0:n())}get(e){return l(this,D)[e]}set(e,n){F(this,D,{...l(this,D),[e]:n}),l(this,z).set(e,n),$(this,B,En).call(this,`change:${e}`,n),l(this,be).call(this)}save_changes(){if(l(this,z).size===0)return;let e=Object.fromEntries(l(this,z).entries());l(this,z).clear(),l(this,Z).sendUpdate(e)}on(e,n){l(this,M)[e]||(l(this,M)[e]=new Set),l(this,M)[e].add(n)}},ye=new WeakMap,z=new WeakMap,D=new WeakMap,Z=new WeakMap,M=new WeakMap,B=new WeakSet,En=function(e,n){if(!l(this,M)[e])return;let r=l(this,M)[e];for(let s of r)try{s(n)}catch(i){g.error("Error emitting event",i)}},_n=function(e){e!=null&&Object.keys(e).forEach(n=>{let r=n;l(this,D)[r]!==e[r]&&this.set(r,e[r])})},Cn=function(e,n=[]){let r=l(this,M)["msg:custom"];if(r)for(let s of r)try{s(e.content,n)}catch(i){g.error("Error emitting event",i)}},be=new WeakMap,a(Q,"_modelManager",ve),Q);Zt=async function(t,e){let n=e.model_id,r=e.message,s=("buffers"in r?r.buffers:[]).map(Lt);switch(r.method){case"open":{let{state:i,buffer_paths:d=[]}=r,u=pt({state:i,bufferPaths:d,buffers:s}),p=t.getSync(n);if(p){Fe(p).updateAndEmitDiffs(u);return}t.create(n,w=>new nr(u,qt()?{sendUpdate:async()=>{},sendCustomMessage:async()=>{}}:{async sendUpdate(C){if(w.aborted){g.debug(`[Model] sendUpdate suppressed for model=${n} (signal aborted)`);return}let{state:E,buffers:N,bufferPaths:q}=Kn(C);await je().sendModelValue({modelId:n,message:{method:"update",state:E,bufferPaths:q},buffers:N})},async sendCustomMessage(C,E){if(w.aborted){g.debug(`[Model] sendCustomMessage suppressed for model=${n} (signal aborted)`);return}await je().sendModelValue({modelId:n,message:{method:"custom",content:C},buffers:E.map(jt)})}},w));return}case"custom":Fe(await t.get(n)).emitCustomMessage({method:"custom",content:r.content},s);return;case"close":Ue.destroy(n),t.delete(n);return;case"update":{let{state:i,buffer_paths:d=[]}=r,u=pt({state:i,bufferPaths:d,buffers:s});Fe(await t.get(n)).updateAndEmitDiffs(u);return}default:Er(r)}},yr(ve,"MODEL_MANAGER");function pe(t){return()=>({TYPE:t,is(e){return e.type===t},create(e){return new CustomEvent(t,e)}})}Ze=pe("marimo-value-input")(),De=pe("marimo-value-update")(),Ae=pe("marimo-value-ready")(),ze=pe("marimo-incoming-message")(),Bt=function(t,e){return Ze.create({bubbles:!0,composed:!0,detail:{value:t,element:e}})},Oe=class Rn{static get INSTANCE(){let e="_marimo_private_UIElementRegistry";return window[e]||(window[e]=new Rn),window[e]}constructor(){this.entries=new Map}has(e){return this.entries.has(e)}set(e,n){this.entries.has(e)&&g.debug("UIElementRegistry overwriting entry for objectId.",e),this.entries.set(e,{objectId:e,value:n,elements:new Set})}registerInstance(e,n){let r=this.entries.get(e);r===void 0?this.entries.set(e,{objectId:e,value:gr(n,this),elements:new Set([n])}):r.elements.add(n)}removeInstance(e,n){let r=this.entries.get(e);r!=null&&r.elements.has(n)&&r.elements.delete(n)}removeElementsByCell(e){[...this.entries.keys()].filter(n=>n.startsWith(`${e}-`)).forEach(n=>{this.entries.delete(n)})}lookupValue(e){let n=this.entries.get(e);return n===void 0?void 0:n.value}broadcastMessage(e,n,r){let s=this.entries.get(e);s===void 0?g.warn("UIElementRegistry missing entry",e):s.elements.forEach(i=>{i.dispatchEvent(ze.create({bubbles:!1,composed:!0,detail:{objectId:e,message:n,buffers:r}}))})}broadcastValueUpdate(e,n,r){let s=this.entries.get(n);s===void 0?g.warn("UIElementRegistry missing entry",n):(s.value=r,s.elements.forEach(i=>{i!==e&&i.dispatchEvent(De.create({bubbles:!1,composed:!0,detail:{value:r,element:i}}))}),document.dispatchEvent(Ae.create({bubbles:!0,composed:!0,detail:{objectId:n}})))}},Vt=Oe.INSTANCE,Dt=new Ur("function-call-result",async(t,e)=>{await je().sendFunctionRequest({functionCallId:t,...e})}),Xt="68px";var rr="288px";let bt;Yt=t=>t?/^\d+$/.test(t)?`${t}px`:t:rr,Qt=mr({isOpen:!0},(t,e)=>{if(!e)return t;switch(e.type){case"toggle":return{...t,isOpen:e.isOpen??t.isOpen};case"setWidth":return{...t,width:e.width};default:return t}}),Qe=V(null),Wt=V(null),We=V(!1),bt=V(!1),Ye=V(!1);var sr=Ft();Ie=t=>{let e=(0,sr.c)(8),{onResize:n,startingWidth:r,minWidth:s,maxWidth:i}=t,d=(0,c.useRef)(null),u=(0,c.useRef)(null),p=(0,c.useRef)(null),w,C;e[0]!==i||e[1]!==s||e[2]!==n?(w=()=>{let P=d.current,j=u.current,L=p.current;if(!P||!j&&!L)return;let S=Number.parseInt(window.getComputedStyle(P).width,10),A=0,H=!1,ee=null,re=f=>{if(!P||!H||!ee)return;let v=f.clientX-A;A=f.clientX,S=ee==="left"?S-v:S+v,s&&(S=Math.max(s,S)),i&&(S=Math.min(i,S)),P.style.width=`${S}px`},se=()=>{H&&(n==null||n(S),H=!1,ee=null),document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",se)},o=(f,v)=>{f.preventDefault(),H=!0,ee=v,A=f.clientX,document.addEventListener("mousemove",re),document.addEventListener("mouseup",se)},m=f=>o(f,"left"),x=f=>o(f,"right");return j&&j.addEventListener("mousedown",m),L&&L.addEventListener("mousedown",x),()=>{j&&j.removeEventListener("mousedown",m),L&&L.removeEventListener("mousedown",x),document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",se)}},C=[s,i,n],e[0]=i,e[1]=s,e[2]=n,e[3]=w,e[4]=C):(w=e[3],C=e[4]),(0,c.useEffect)(w,C);let E;e[5]===Symbol.for("react.memo_cache_sentinel")?(E={left:u,right:p},e[5]=E):E=e[5];let N=r==="contentWidth"?"var(--content-width-medium)":`${r}px`,q;return e[6]===N?q=e[7]:(q={resizableDivRef:d,handleRefs:E,style:{width:N}},e[6]=N,e[7]=q),q},Te=function(t){t||window.dispatchEvent(new Event("resize"))};var wt=Ft(),h=kt(Nr(),1);yn=()=>{let t=(0,wt.c)(16),[e,n]=we(Qe),[r,s]=we(We),[i,d]=we(bt),[u,p]=we(Ye),w;t[0]!==s||t[1]!==n?(w=()=>{n(null),s(!1)},t[0]=s,t[1]=n,t[2]=w):w=t[2];let C=w;if(xe(de.CONTEXT_AWARE_PANEL).length===0||!e||!r)return null;let E;t[3]!==u||t[4]!==i||t[5]!==p||t[6]!==d?(E=()=>(0,h.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,h.jsx)(Tt,{content:i?"Unpin panel":"Pin panel",children:(0,h.jsx)(Ot,{size:"xs",onPressedChange:()=>d(!i),pressed:i,"aria-label":i?"Unpin panel":"Pin panel",children:i?(0,h.jsx)(_,{className:"w-4 h-4"}):(0,h.jsx)(jr,{className:"w-4 h-4"})})}),(0,h.jsx)(Tt,{content:u?(0,h.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,h.jsx)("span",{children:"Follow focused table"}),(0,h.jsx)("span",{className:"text-xs text-muted-foreground w-64",children:"The panel updates as cells that output tables are focused. Click to fix to the current cell."})]}):(0,h.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,h.jsx)("span",{children:"Focus on current table"}),(0,h.jsx)("span",{className:"text-xs text-muted-foreground w-64",children:"The panel is focused on the current table. Click to update based on which cell is focused."})]}),children:(0,h.jsx)(Ot,{size:"xs",onPressedChange:()=>p(!u),pressed:u,"aria-label":u?"Follow focused cell":"Fixed",children:(0,h.jsx)(b,{className:Pr("w-4 h-4",u&&"text-primary")})})})]}),t[3]=u,t[4]=i,t[5]=p,t[6]=d,t[7]=E):E=t[7];let N=E,q;t[8]!==C||t[9]!==N?(q=()=>(0,h.jsxs)("div",{className:"mt-2 pb-7 mb-4 h-full overflow-auto",children:[(0,h.jsxs)("div",{className:"flex flex-row justify-between items-center mx-2",children:[N(),(0,h.jsx)(qr,{variant:"linkDestructive",size:"icon",onClick:C,"aria-label":"Close selection panel",children:(0,h.jsx)(Ir,{className:"w-4 h-4"})})]}),(0,h.jsx)(Nt,{children:(0,h.jsx)(Je,{name:de.CONTEXT_AWARE_PANEL})})]}),t[8]=C,t[9]=N,t[10]=q):q=t[10];let P=q;if(!i){let S;return t[11]===P?S=t[12]:(S=(0,h.jsx)(ir,{children:P()}),t[11]=P,t[12]=S),S}let j;t[13]===Symbol.for("react.memo_cache_sentinel")?(j=(0,h.jsx)($r,{onDragging:Te,className:"resize-handle border-border z-20 print:hidden border-l"}),t[13]=j):j=t[13];let L;return t[14]===P?L=t[15]:(L=(0,h.jsxs)(h.Fragment,{children:[j,(0,h.jsx)(Vr,{defaultSize:20,minSize:15,maxSize:80,children:P()})]}),t[14]=P,t[15]=L),L},Jt=t=>{let e=(0,wt.c)(2),{children:n}=t,r;return e[0]===n?r=e[1]:(r=(0,h.jsx)(Nt,{children:(0,h.jsx)(Sn,{name:de.CONTEXT_AWARE_PANEL,children:n})}),e[0]=n,e[1]=r),r};var ir=({children:t})=>{let{resizableDivRef:e,handleRefs:n,style:r}=Ie({startingWidth:400,minWidth:300,maxWidth:1500});return(0,h.jsxs)("div",{className:"absolute z-40 right-0 h-full bg-background flex flex-row",children:[(0,h.jsx)("div",{ref:n.left,className:"w-1 h-full cursor-col-resize border-l"}),(0,h.jsx)("div",{ref:e,style:r,children:t})]})};an=function(){var t=[...arguments];return(0,c.useMemo)(()=>e=>{t.forEach(n=>n(e))},t)},Ge=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,ue=function(t){let e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"},Ee=function(t){return"nodeType"in t},G=function(t){var e;return t?ue(t)?t:Ee(t)?((e=t.ownerDocument)==null?void 0:e.defaultView)??window:window:window},He=function(t){let{Document:e}=G(t);return t instanceof e},Ke=function(t){return ue(t)?!1:t instanceof G(t).HTMLElement},Ve=function(t){return t instanceof G(t).SVGElement},fn=function(t){return t?ue(t)?t.document:Ee(t)?He(t)?t:Ke(t)||Ve(t)?t.ownerDocument:document:document:document},Ce=Ge?c.useLayoutEffect:c.useEffect,Xe=function(t){let e=(0,c.useRef)(t);return Ce(()=>{e.current=t}),(0,c.useCallback)(function(){var n=[...arguments];return e.current==null?void 0:e.current(...n)},[])},tn=function(){let t=(0,c.useRef)(null);return[(0,c.useCallback)((e,n)=>{t.current=setInterval(e,n)},[]),(0,c.useCallback)(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[])]},wn=function(t,e){e===void 0&&(e=[t]);let n=(0,c.useRef)(t);return Ce(()=>{n.current!==t&&(n.current=t)},e),n},sn=function(t,e){let n=(0,c.useRef)();return(0,c.useMemo)(()=>{let r=t(n.current);return n.current=r,r},[...e])},bn=function(t){let e=Xe(t),n=(0,c.useRef)(null);return[n,(0,c.useCallback)(r=>{r!==n.current&&(e==null||e(r,n.current)),n.current=r},[])]},Gt=function(t){let e=(0,c.useRef)();return(0,c.useEffect)(()=>{e.current=t},[t]),e.current};var Me={};zt=function(t,e){return(0,c.useMemo)(()=>{if(e)return e;let n=Me[t]==null?0:Me[t]+1;return Me[t]=n,t+"-"+n},[t,e])};function vt(t){return function(e){return[...arguments].slice(1).reduce((n,r)=>{let s=Object.entries(r);for(let[i,d]of s){let u=n[i];u!=null&&(n[i]=u+t*d)}return n},{...e})}}dn=vt(1),un=vt(-1);function ar(t){return"clientX"in t&&"clientY"in t}gn=function(t){if(!t)return!1;let{KeyboardEvent:e}=G(t.target);return e&&t instanceof e};function or(t){if(!t)return!1;let{TouchEvent:e}=G(t.target);return e&&t instanceof e}nn=function(t){if(or(t)){if(t.touches&&t.touches.length){let{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){let{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return ar(t)?{x:t.clientX,y:t.clientY}:null};let Ne;_e=Object.freeze({Translate:{toString(t){if(!t)return;let{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;let{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[_e.Translate.toString(t),_e.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Ne="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",on=function(t){return t.matches(Ne)?t:t.querySelector(Ne)}});export{Le as $,Wt as A,Ae as B,zt as C,Ie as D,Te as E,Dt as F,Ue as G,Bt as H,Oe as I,Ht as J,$t as K,Vt as L,Xt as M,Yt as N,We as O,Qt as P,Kt as Q,ze as R,Gt as S,Jt as T,ve as U,De as V,Zt as W,en as X,Be as Y,oe as Z,tn as _,Xr as __tla,nn as a,rn as at,sn as b,He as c,xe as ct,Ee as d,$e as et,Ve as f,Xe as g,an as h,on as i,ln as it,Ye as j,Qe as k,Ke as l,le as lt,un as m,dn as n,cn as nt,fn as o,hn as ot,ue as p,mn as q,Ge as r,pn as rt,G as s,Je as st,_e as t,de as tt,gn as u,Ce as v,yn as w,bn as x,wn as y,Ze as z};
