import{s as g}from"./chunk-LvLJmgfZ.js";import{t as C}from"./react-BGmjiNul.js";import{P as N,R as j}from"./zod-Cg4WLWh2.js";import{t as P}from"./compiler-runtime-DeeZ7FnK.js";import{d as O}from"./hotkeys-uKX61F1_.js";import{t as D}from"./jsx-runtime-DN_bIXfG.js";import{n as F,t as I}from"./cn-C1rgT0yh.js";import{a as J,c as T,i as U,l as V,n as z,s as A,t as K}from"./alert-dialog-jcHA5geR.js";var y=N({detail:j()}),v=N({error:j()});function S(r){if(!r)return"Unknown error";if(r instanceof Error){let e=y.safeParse(r.cause);return e.success?e.data.detail:R(r.message)}if(typeof r=="object"){let e=y.safeParse(r);if(e.success)return e.data.detail;let t=v.safeParse(r);if(t.success)return t.data.error}try{return JSON.stringify(r)}catch{return String(r)}}function R(r){let e=q(r);if(!e)return r;let t=y.safeParse(e);if(t.success)return t.data.detail;let s=v.safeParse(e);return s.success?s.data.error:r}function q(r){try{return JSON.parse(r)}catch{return r}}var B=class extends Error{constructor(r="The cell containing this UI element has not been run yet. Please run the cell first."){super(r),this.name="CellNotInitializedError"}},G=class extends Error{constructor(r="Not yet connected to a kernel."){super(r),this.name="NoKernelConnectedError"}},E=P(),H=g(C(),1),a=g(D(),1);const L=r=>{let e=(0,E.c)(23),{error:t,className:s,action:l}=r,[c,i]=(0,H.useState)(!1);if(!t)return null;O.error(t);let n;e[0]===t?n=e[1]:(n=S(t),e[0]=t,e[1]=n);let o=n,p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=()=>i(!0),e[2]=p):p=e[2];let d;e[3]===o?d=e[4]:(d=(0,a.jsx)("span",{className:"line-clamp-4",children:o}),e[3]=o,e[4]=d);let m;e[5]===l?m=e[6]:(m=l&&(0,a.jsx)("div",{className:"flex justify-end",children:l}),e[5]=l,e[6]=m);let f;e[7]!==s||e[8]!==d||e[9]!==m?(f=(0,a.jsxs)(_,{kind:"danger",className:s,clickable:!0,onClick:p,children:[d,m]}),e[7]=s,e[8]=d,e[9]=m,e[10]=f):f=e[10];let b;e[11]===Symbol.for("react.memo_cache_sentinel")?(b=(0,a.jsx)(T,{children:(0,a.jsx)(V,{className:"text-error",children:"Error"})}),e[11]=b):b=e[11];let u;e[12]===o?u=e[13]:(u=(0,a.jsx)(J,{asChild:!0,className:"text-error text-sm p-2 font-mono overflow-auto whitespace-pre-wrap",children:(0,a.jsx)("pre",{children:o})}),e[12]=o,e[13]=u);let k;e[14]===Symbol.for("react.memo_cache_sentinel")?(k=(0,a.jsx)(A,{children:(0,a.jsx)(z,{autoFocus:!0,onClick:()=>i(!1),children:"Ok"})}),e[14]=k):k=e[14];let h;e[15]===u?h=e[16]:(h=(0,a.jsxs)(U,{className:"max-w-[80%] max-h-[80%] overflow-hidden flex flex-col",children:[b,u,k]}),e[15]=u,e[16]=h);let x;e[17]!==c||e[18]!==h?(x=(0,a.jsx)(K,{open:c,onOpenChange:i,children:h}),e[17]=c,e[18]=h,e[19]=x):x=e[19];let w;return e[20]!==x||e[21]!==f?(w=(0,a.jsxs)(a.Fragment,{children:[f,x]}),e[20]=x,e[21]=f,e[22]=w):w=e[22],w};var M=F("text-sm p-2 border whitespace-pre-wrap overflow-hidden",{variants:{kind:{danger:"text-error border-(--red-6) shadow-md-solid shadow-error bg-(--red-1)",info:"text-primary border-(--blue-6) shadow-md-solid shadow-accent bg-(--blue-1)",warn:"border-(--yellow-6) bg-(--yellow-2) dark:bg-(--yellow-4) text-(--yellow-11) dark:text-(--yellow-12)"},clickable:{true:"cursor-pointer"}},compoundVariants:[{clickable:!0,kind:"danger",className:"hover:bg-(--red-3)"},{clickable:!0,kind:"info",className:"hover:bg-(--blue-3)"},{clickable:!0,kind:"warn",className:"hover:bg-(--yellow-3)"}],defaultVariants:{kind:"info"}});const _=r=>{let e=(0,E.c)(14),t,s,l,c,i;e[0]===r?(t=e[1],s=e[2],l=e[3],c=e[4],i=e[5]):({kind:c,clickable:l,className:s,children:t,...i}=r,e[0]=r,e[1]=t,e[2]=s,e[3]=l,e[4]=c,e[5]=i);let n;e[6]!==s||e[7]!==l||e[8]!==c?(n=I(M({kind:c,clickable:l}),s),e[6]=s,e[7]=l,e[8]=c,e[9]=n):n=e[9];let o;return e[10]!==t||e[11]!==i||e[12]!==n?(o=(0,a.jsx)("div",{className:n,...i,children:t}),e[10]=t,e[11]=i,e[12]=n,e[13]=o):o=e[13],o};export{S as a,G as i,L as n,B as r,_ as t};
