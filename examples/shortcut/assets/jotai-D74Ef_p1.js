import{s as ut}from"./chunk-LvLJmgfZ.js";import{t as it}from"./react-XTZdWHwa.js";import{t as ot}from"./compiler-runtime-QczY1yfQ.js";import{t as ft}from"./_baseIsEqual-C8v2yRqO.js";function B(t){return"init"in t}function F(t){return!!t.write}function G(t){return"v"in t||"e"in t}function z(t){if("e"in t)throw t.e;return t.v}var A=new WeakMap;function H(t){var e;return C(t)&&!!((e=A.get(t))!=null&&e[0])}function st(t){let e=A.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))}function D(t,e){let n=A.get(t);if(!n){n=[!0,new Set],A.set(t,n);let r=()=>{n[0]=!1};t.then(r,r)}n[1].add(e)}function C(t){return typeof(t==null?void 0:t.then)=="function"}function J(t,e,n){if(!n.p.has(t)){n.p.add(t);let r=()=>n.p.delete(t);e.then(r,r)}}function K(t,e,n){var l;let r=new Set;for(let a of((l=n.get(t))==null?void 0:l.t)||[])n.has(a)&&r.add(a);for(let a of e.p)r.add(a);return r}var ct=(t,e,...n)=>e.read(...n),dt=(t,e,...n)=>e.write(...n),ht=(t,e)=>{var n;return(n=e.unstable_onInit)==null?void 0:n.call(e,t)},gt=(t,e,n)=>{var r;return(r=e.onMount)==null?void 0:r.call(e,n)},pt=(t,e)=>{var n;let r=v(t),l=r[0],a=r[6],u=r[9],f=l.get(e);return f||(f={d:new Map,p:new Set,n:0},l.set(e,f),(n=a.i)==null||n.call(a,e),u==null||u(t,e)),f},yt=t=>{let e=v(t),n=e[1],r=e[3],l=e[4],a=e[5],u=e[6],f=e[13],h=[],i=o=>{try{o()}catch(c){h.push(c)}};do{u.f&&i(u.f);let o=new Set,c=o.add.bind(o);r.forEach(d=>{var g;return(g=n.get(d))==null?void 0:g.l.forEach(c)}),r.clear(),a.forEach(c),a.clear(),l.forEach(c),l.clear(),o.forEach(i),r.size&&f(t)}while(r.size||a.size||l.size);if(h.length)throw AggregateError(h)},vt=t=>{let e=v(t),n=e[1],r=e[2],l=e[3],a=e[11],u=e[14],f=e[17],h=[],i=new WeakSet,o=new WeakSet,c=Array.from(l);for(;c.length;){let d=c[c.length-1],g=a(t,d);if(o.has(d)){c.pop();continue}if(i.has(d)){r.get(d)===g.n&&h.push([d,g]),o.add(d),c.pop();continue}i.add(d);for(let p of K(d,g,n))i.has(p)||c.push(p)}for(let d=h.length-1;d>=0;--d){let[g,p]=h[d],w=!1;for(let s of p.d.keys())if(s!==g&&l.has(s)){w=!0;break}w&&(u(t,g),f(t,g)),r.delete(g)}},wt=(t,e)=>{var n,r;let l=v(t),a=l[1],u=l[2],f=l[3],h=l[6],i=l[7],o=l[11],c=l[12],d=l[13],g=l[14],p=l[16],w=l[17],s=o(t,e);if(G(s)&&(a.has(e)&&u.get(e)!==s.n||Array.from(s.d).every(([y,j])=>g(t,y).n===j)))return s;s.d.clear();let b=!0;function k(){a.has(e)&&(w(t,e),d(t),c(t))}function W(y){var j;if(y===e){let q=o(t,y);if(!G(q))if(B(y))x(t,y,y.init);else throw Error("no atom init");return z(q)}let O=g(t,y);try{return z(O)}finally{s.d.set(y,O.n),H(s.v)&&J(e,s.v,O),(j=a.get(y))==null||j.t.add(e),b||k()}}let S,E,at={get signal(){return S||(S=new AbortController),S.signal},get setSelf(){return!E&&F(e)&&(E=(...y)=>{if(!b)try{return p(t,e,...y)}finally{d(t),c(t)}}),E}},$=s.n;try{let y=i(t,e,W,at);return x(t,e,y),C(y)&&(D(y,()=>S==null?void 0:S.abort()),y.then(k,k)),(n=h.r)==null||n.call(h,e),s}catch(y){return delete s.v,s.e=y,++s.n,s}finally{b=!1,$!==s.n&&u.get(e)===$&&(u.set(e,s.n),f.add(e),(r=h.c)==null||r.call(h,e))}},mt=(t,e)=>{let n=v(t),r=n[1],l=n[2],a=n[11],u=[e];for(;u.length;){let f=u.pop(),h=a(t,f);for(let i of K(f,h,r)){let o=a(t,i);l.set(i,o.n),u.push(i)}}},L=(t,e,...n)=>{let r=v(t),l=r[3],a=r[6],u=r[8],f=r[11],h=r[12],i=r[13],o=r[14],c=r[15],d=r[17],g=!0,p=s=>z(o(t,s)),w=(s,...b)=>{var k;let W=f(t,s);try{if(s===e){if(!B(s))throw Error("atom not writable");let S=W.n,E=b[0];x(t,s,E),d(t,s),S!==W.n&&(l.add(s),(k=a.c)==null||k.call(a,s),c(t,s));return}else return L(t,s,...b)}finally{g||(i(t),h(t))}};try{return u(t,e,p,w,...n)}finally{g=!1}},bt=(t,e)=>{var g;var n;let r=v(t),l=r[1],a=r[3],u=r[6],f=r[11],h=r[15],i=r[18],o=r[19],c=f(t,e),d=l.get(e);if(d&&!H(c.v)){for(let[p,w]of c.d)if(!d.d.has(p)){let s=f(t,p);i(t,p).t.add(e),d.d.add(p),w!==s.n&&(a.add(p),(n=u.c)==null||n.call(u,p),h(t,p))}for(let p of d.d||[])c.d.has(p)||(d.d.delete(p),(g=o(t,p))==null||g.t.delete(e))}},N=(t,e)=>{var n;let r=v(t),l=r[1],a=r[4],u=r[6],f=r[10],h=r[11],i=r[12],o=r[13],c=r[14],d=r[16],g=h(t,e),p=l.get(e);if(!p){c(t,e);for(let w of g.d.keys())N(t,w).t.add(e);p={l:new Set,d:new Set(g.d.keys()),t:new Set},l.set(e,p),(n=u.m)==null||n.call(u,e),F(e)&&a.add(()=>{let w=!0,s=(...b)=>{try{return d(t,e,...b)}finally{w||(o(t),i(t))}};try{let b=f(t,e,s);b&&(p.u=()=>{w=!0;try{b()}finally{w=!1}})}finally{w=!1}})}return p},St=(t,e)=>{var c;var n;let r=v(t),l=r[1],a=r[5],u=r[6],f=r[11],h=r[19],i=f(t,e),o=l.get(e);if(o&&!o.l.size&&!Array.from(o.t).some(d=>{var g;return(g=l.get(d))==null?void 0:g.d.has(e)})){o.u&&a.add(o.u),o=void 0,l.delete(e),(n=u.u)==null||n.call(u,e);for(let d of i.d.keys())(c=h(t,d))==null||c.t.delete(e);return}return o},x=(t,e,n)=>{let r=v(t)[11],l=r(t,e),a="v"in l,u=l.v;if(C(n))for(let f of l.d.keys())J(e,n,r(t,f));l.v=n,delete l.e,(!a||!Object.is(u,l.v))&&(++l.n,C(u)&&st(u))},kt=(t,e)=>{let n=v(t)[14];return z(n(t,e))},Et=(t,e,...n)=>{let r=v(t),l=r[12],a=r[13],u=r[16];try{return u(t,e,...n)}finally{a(t),l(t)}},Mt=(t,e,n)=>{let r=v(t),l=r[12],a=r[18],u=r[19],f=a(t,e).l;return f.add(n),l(t),()=>{f.delete(n),u(t,e),l(t)}},Q=new WeakMap,v=t=>Q.get(t);function Wt(t){let e=v(t),n=e[24];return n?n(e):e}function U(...t){let e={get(r){let l=v(e)[21];return l(e,r)},set(r,...l){let a=v(e)[22];return a(e,r,...l)},sub(r,l){let a=v(e)[23];return a(e,r,l)}},n=[new WeakMap,new WeakMap,new WeakMap,new Set,new Set,new Set,{},ct,dt,ht,gt,pt,yt,vt,wt,mt,L,bt,N,St,x,kt,Et,Mt,void 0].map((r,l)=>t[l]||r);return Q.set(e,Object.freeze(n)),e}var jt=0;function X(t,e){let n=`atom${++jt}`,r={toString(){return n}};return typeof t=="function"?r.read=t:(r.init=t,r.read=zt,r.write=At),e&&(r.write=e),r}function zt(t){return t(this)}function At(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}var Y;function P(){return Y?Y():U()}var Z;function Ct(){return Z||(Z=P()),Z}var m=ut(it(),1),R=(0,m.createContext)(void 0);function _(t){let e=(0,m.useContext)(R);return(t==null?void 0:t.store)||e||Ct()}function xt({children:t,store:e}){let n=(0,m.useRef)(null);return e?(0,m.createElement)(R.Provider,{value:e},t):(n.current===null&&(n.current=P()),(0,m.createElement)(R.Provider,{value:n.current},t))}var T=t=>typeof(t==null?void 0:t.then)=="function",I=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},Pt=m.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(I(t),t)}),V=new WeakMap,tt=(t,e)=>{let n=V.get(t);return n||(n=new Promise((r,l)=>{let a=t,u=i=>o=>{a===i&&r(o)},f=i=>o=>{a===i&&l(o)},h=()=>{try{let i=e();T(i)?(V.set(i,n),a=i,i.then(u(i),f(i)),D(i,h)):r(i)}catch(i){l(i)}};t.then(u(t),f(t)),D(t,h)}),V.set(t,n)),n};function et(t,e){let{delay:n,unstable_promiseStatus:r=!m.use}=e||{},l=_(e),[[a,u,f],h]=(0,m.useReducer)(o=>{let c=l.get(t);return Object.is(o[0],c)&&o[1]===l&&o[2]===t?o:[c,l,t]},void 0,()=>[l.get(t),l,t]),i=a;if((u!==l||f!==t)&&(h(),i=l.get(t)),(0,m.useEffect)(()=>{let o=l.sub(t,()=>{if(r)try{let c=l.get(t);T(c)&&I(tt(c,()=>l.get(t)))}catch{}if(typeof n=="number"){setTimeout(h,n);return}h()});return h(),o},[l,t,n,r]),(0,m.useDebugValue)(i),T(i)){let o=tt(i,()=>l.get(t));return r&&I(o),Pt(o)}return i}function rt(t,e){let n=_(e);return(0,m.useCallback)((...r)=>n.set(t,...r),[n,t])}function _t(t,e){return[et(t,e),rt(t,e)]}function Ot(t,e){return ft(t,e)}var nt=Ot,Dt=ot();const M=P();async function Rt(t,e){return e(M.get(t))?M.get(t):new Promise(n=>{let r=M.sub(t,()=>{let l=M.get(t);e(l)&&(r(),n(l))})})}function Tt(t,e){let n=(0,Dt.c)(5),r=_(),l,a;n[0]!==t||n[1]!==e||n[2]!==r?(l=()=>{let u=r.get(t);r.sub(t,()=>{let f=r.get(t);e(f,u),u=f})},a=[t,e,r],n[0]=t,n[1]=e,n[2]=r,n[3]=l,n[4]=a):(l=n[3],a=n[4]),(0,m.useEffect)(l,a)}var lt=Symbol("sentinel");function It(t,e=nt){let n=lt;return X(r=>{let l=r(t);return(n===lt||!e(n,l))&&(n=l),n})}export{nt as a,et as c,X as d,P as f,Rt as i,rt as l,Wt as m,M as n,xt as o,U as p,Tt as r,_t as s,It as t,_ as u};
